<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- SEO Meta Tags -->
    <meta name="description" content="Calculate Unix file permissions (chmod) values. Convert between numeric and symbolic notation. Visual permission calculator for Linux/Unix.">
    <meta name="keywords" content="chmod calculator, file permissions, Unix permissions, Linux chmod, permission calculator, octal permissions">
    <meta name="author" content="OldWeb LLC">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://oldweb.tech/system/chmod-calculator.html">

    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Chmod Calculator - OldWeb.tech">
    <meta property="og:description" content="Calculate Unix file permissions (chmod) values. Convert between numeric and symbolic notation. Visual permission calculator for Linux/Unix.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://oldweb.tech/system/chmod-calculator.html">
    <meta property="og:site_name" content="OldWeb.tech">
    <meta property="og:image" content="https://oldweb.tech/logo/og-image.png">

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Chmod Calculator - OldWeb.tech">
    <meta name="twitter:description" content="Calculate Unix file permissions (chmod) values. Convert between numeric and symbolic notation. Visual permission calculator for Linux/Unix.">
    <meta name="twitter:image" content="https://oldweb.tech/logo/og-image.png">

    <!-- Additional Meta Tags -->
    <meta name="theme-color" content="#1a1a2e">

    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="../logo/favicon-32x32.png">

    <title>Chmod Calculator - OldWeb.tech</title>
    <link rel="stylesheet" href="../a11y.css">
    <script src="../a11y-utils.js"></script>
    <script src="../storage-utils.js"></script>
    <script src="../i18n-utils.js"></script>
    <script src="../navigationv2.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            padding: 40px 20px;
            color: #fff;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        .ascii-logo {
            position: absolute;
            top: 20px;
            right: 40px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.65rem;
            line-height: 1.1;
            color: #4fc3f7;
            text-shadow: 0 0 10px rgba(79, 195, 247, 0.3);
            opacity: 0.8;
            white-space: pre;
        }

        h1 {
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5rem;
            color: #4fc3f7;
            text-shadow: 0 0 20px rgba(79, 195, 247, 0.3);
        }

        .subtitle {
            text-align: center;
            color: #90caf9;
            font-size: 1rem;
            margin-bottom: 30px;
            opacity: 0.9;
        }

        .quick-reference {
            background: rgba(79, 195, 247, 0.1);
            border-left: 4px solid #4fc3f7;
            border-radius: 8px;
            padding: 15px 20px;
            margin-bottom: 20px;
            color: #90caf9;
            font-size: 0.9rem;
            line-height: 1.6;
        }

        .quick-reference strong {
            color: #4fc3f7;
        }

        .quick-reference code {
            background: rgba(0, 0, 0, 0.3);
            padding: 2px 8px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            color: #fff;
            font-size: 0.95em;
        }

        .calculator {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 20px;
        }

        .section-title {
            font-size: 0.9rem;
            color: #90caf9;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 15px;
        }

        .permissions-grid {
            display: grid;
            grid-template-columns: 100px repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 25px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 12px;
            padding: 20px;
        }

        .perm-header {
            text-align: center;
            font-weight: 600;
            color: #4fc3f7;
            padding: 10px;
        }

        .perm-label {
            display: flex;
            align-items: center;
            color: #90caf9;
            font-weight: 500;
        }

        .perm-cell {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            transition: all 0.2s;
        }

        .perm-cell:hover {
            background: rgba(79, 195, 247, 0.1);
        }

        .perm-cell input[type="checkbox"] {
            width: 24px;
            height: 24px;
            cursor: pointer;
            accent-color: #4fc3f7;
        }

        .perm-cell .perm-bit {
            margin-top: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.5);
        }

        .perm-cell input:checked + .perm-bit {
            color: #4fc3f7;
        }

        .presets-section {
            margin-bottom: 25px;
        }

        .presets-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .preset-btn {
            padding: 8px 16px;
            border: 1px solid rgba(79, 195, 247, 0.3);
            background: rgba(0, 0, 0, 0.2);
            color: #90caf9;
            border-radius: 6px;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            transition: all 0.2s;
        }

        .preset-btn:hover {
            background: rgba(79, 195, 247, 0.2);
            border-color: #4fc3f7;
            color: #4fc3f7;
        }

        .preset-btn .preset-desc {
            font-family: 'Segoe UI', sans-serif;
            font-size: 0.75rem;
            color: rgba(255, 255, 255, 0.5);
            margin-left: 8px;
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }

        .result-card {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            padding: 20px;
            border-left: 4px solid #4fc3f7;
        }

        .result-card h4 {
            font-size: 0.8rem;
            color: #90caf9;
            text-transform: uppercase;
            margin-bottom: 10px;
        }

        .result-card .value {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .result-card .value code {
            font-family: 'Courier New', monospace;
            font-size: 1.4rem;
            color: #4fc3f7;
            flex: 1;
        }

        .copy-btn {
            padding: 6px 12px;
            background: rgba(102, 187, 106, 0.2);
            border: 1px solid #66bb6a;
            border-radius: 6px;
            color: #66bb6a;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.2s;
        }

        .copy-btn:hover {
            background: rgba(102, 187, 106, 0.3);
        }

        .copy-btn.copied {
            background: #66bb6a;
            color: #1a1a2e;
        }

        .special-perms {
            margin-bottom: 25px;
        }

        .special-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }

        .special-item {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            padding: 15px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .special-item input[type="checkbox"] {
            width: 20px;
            height: 20px;
            accent-color: #ff9800;
        }

        .special-item .special-info {
            flex: 1;
        }

        .special-item .special-name {
            color: #ff9800;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .special-item .special-desc {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.8rem;
            margin-top: 3px;
        }

        .umask-section {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 12px;
            padding: 25px;
            margin-top: 20px;
        }

        .umask-section h3 {
            color: #4fc3f7;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .umask-row {
            display: flex;
            gap: 20px;
            align-items: flex-start;
        }

        .umask-input-group {
            flex: 0 0 200px;
        }

        .umask-input-group label {
            display: block;
            font-size: 0.85rem;
            color: #90caf9;
            margin-bottom: 8px;
        }

        .umask-input-group input {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid rgba(79, 195, 247, 0.3);
            border-radius: 8px;
            background: rgba(0, 0, 0, 0.3);
            color: #fff;
            font-family: 'Courier New', monospace;
            font-size: 1.2rem;
            text-align: center;
        }

        .umask-results {
            flex: 1;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .umask-result {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            padding: 15px;
            border-left: 3px solid #66bb6a;
        }

        .umask-result h5 {
            font-size: 0.75rem;
            color: #90caf9;
            text-transform: uppercase;
            margin-bottom: 8px;
        }

        .umask-result .umask-value {
            font-family: 'Courier New', monospace;
            font-size: 1.3rem;
            color: #66bb6a;
        }

        .umask-result .umask-symbolic {
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
            margin-top: 5px;
        }

        .reference-table {
            margin-top: 20px;
        }

        .reference-table h3 {
            color: #4fc3f7;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .ref-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
        }

        .ref-item {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 6px;
            padding: 10px;
            text-align: center;
        }

        .ref-item .ref-octal {
            font-family: 'Courier New', monospace;
            font-size: 1.2rem;
            color: #4fc3f7;
        }

        .ref-item .ref-perms {
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.6);
            margin-top: 5px;
        }

        .error {
            background: rgba(244, 67, 54, 0.1);
            border: 1px solid #f44336;
            border-left: 4px solid #f44336;
            color: #ff8a80;
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
        }

        .error.show {
            display: block;
        }

        /* Tab Navigation */
        .tab-navigation {
            display: flex;
            gap: 5px;
            margin-bottom: 25px;
            border-bottom: 2px solid rgba(79, 195, 247, 0.2);
            padding-bottom: 0;
        }

        .tab-btn {
            padding: 12px 24px;
            border: none;
            background: transparent;
            color: #90caf9;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            border-radius: 8px 8px 0 0;
            transition: all 0.2s;
            position: relative;
            bottom: -2px;
            border-bottom: 2px solid transparent;
        }

        .tab-btn:hover {
            background: rgba(79, 195, 247, 0.1);
            color: #4fc3f7;
        }

        .tab-btn.active {
            background: rgba(79, 195, 247, 0.15);
            color: #4fc3f7;
            border-bottom: 2px solid #4fc3f7;
        }

        .tab-btn:focus {
            outline: 2px solid #4fc3f7;
            outline-offset: 2px;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Live Permission Inputs */
        .perm-input-section {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 25px;
        }

        .perm-inputs-row {
            display: flex;
            gap: 20px;
        }

        .perm-input-group {
            flex: 1;
        }

        .perm-input-group label {
            display: block;
            font-size: 0.85rem;
            color: #90caf9;
            margin-bottom: 8px;
        }

        .perm-input-group input {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid rgba(79, 195, 247, 0.3);
            border-radius: 8px;
            background: rgba(0, 0, 0, 0.3);
            color: #4fc3f7;
            font-family: 'Courier New', monospace;
            font-size: 1.3rem;
            text-align: center;
        }

        .perm-input-group input:focus {
            outline: none;
            border-color: #4fc3f7;
            box-shadow: 0 0 10px rgba(79, 195, 247, 0.3);
        }

        /* Clickable permission cells */
        .perm-cell-label {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            width: 100%;
            height: 100%;
        }

        footer {
            text-align: center;
            margin-top: 30px;
            color: rgba(255, 255, 255, 0.4);
            font-size: 0.85rem;
        }

        .btn.secondary {
            background: transparent;
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: #90caf9;
            margin-top: 10px;
        }
        .btn.secondary:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.5);
            box-shadow: none;
            transform: none;
        }

        @media (max-width: 768px) {
            .ascii-logo {
                position: static;
                text-align: center;
                margin-bottom: 20px;
                font-size: 0.5rem;
            }

            h1 {
                font-size: 1.8rem;
            }

            .permissions-grid {
                grid-template-columns: 80px repeat(3, 1fr);
                gap: 5px;
                padding: 15px;
            }

            .perm-cell {
                padding: 10px;
            }

            .special-grid {
                grid-template-columns: 1fr;
            }

            .umask-row {
                flex-direction: column;
            }

            .umask-input-group {
                flex: 1;
                width: 100%;
            }

            .umask-results {
                grid-template-columns: 1fr;
            }

            .results-grid {
                grid-template-columns: 1fr;
            }

            .tab-navigation {
                flex-wrap: wrap;
            }

            .tab-btn {
                padding: 10px 16px;
                font-size: 0.9rem;
                flex: 1;
                min-width: auto;
            }

            .perm-inputs-row {
                flex-direction: column;
                gap: 15px;
            }

            .perm-input-group input {
                font-size: 1.1rem;
            }
        }
    </style>

    <!-- Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Chmod Calculator",
      "description": "Calculate Unix file permissions (chmod) values. Convert between numeric and symbolic notation. Visual permission calculator for Linux/Unix.",
      "url": "https://oldweb.tech/chmod-calculator.html",
      "applicationCategory": "UtilitiesApplication",
      "operatingSystem": "Web Browser",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "creator": {
        "@type": "Organization",
        "name": "OldWeb.tech"
      }
    }
    </script>
</head>
<body>
    <a href="#main-content" class="skip-link" data-i18n="common.skipToContent">Skip to main content</a>
    <div class="ascii-logo" aria-hidden="true">  ___  _    _  __        __   _
 / _ \| | _| | \ \      / /__| |__
| | | | |/ _` | \ \ /\ / / _ \ '_ \
| |_| | | (_| |  \ V  V /  __/ |_) |
 \___/|_|\__,_|   \_/\_/ \___|_.__/
</div>
    <main id="main-content" class="container">
        <h1 data-i18n="tools.chmodCalculator.title">Chmod Calculator</h1>
        <p class="subtitle" data-i18n="tools.chmodCalculator.subtitle">Visual Unix file permissions calculator</p>

        <div class="calculator">
            <div class="tab-navigation" role="tablist" aria-label="Chmod calculator sections">
                <button type="button" class="tab-btn active" id="tab-btn-permissions" data-tab="permissions" role="tab" aria-selected="true" aria-controls="tab-permissions" data-i18n="tools.chmodCalculator.tabs.permissions">Permissions</button>
                <button type="button" class="tab-btn" id="tab-btn-umask" data-tab="umask" role="tab" aria-selected="false" aria-controls="tab-umask" data-i18n="tools.chmodCalculator.tabs.umask">Umask</button>
            </div>

            <div class="tab-content active" id="tab-permissions" role="tabpanel" aria-labelledby="tab-btn-permissions">
                <div class="quick-reference">
                    <strong data-i18n="tools.chmodCalculator.reference.quickRef">Quick Reference:</strong> <span data-i18n="tools.chmodCalculator.reference.permFormat">Permissions format: <code>Owner-Group-Other</code></span><br>
                    • <span data-i18n="tools.chmodCalculator.reference.octalExample">Octal: <code>754</code> = Owner(7), Group(5), Other(4)</span><br>
                    • <span data-i18n="tools.chmodCalculator.reference.symbolicExample">Symbolic: <code>-rwxr-xr--</code> = File type + Owner(rwx) + Group(r-x) + Other(r--)</span>
                </div>

                <div class="perm-input-section">
                    <div class="perm-inputs-row">
                        <div class="perm-input-group">
                            <label for="permInput" data-i18n="tools.chmodCalculator.labels.octal">Octal</label>
                            <input type="text"
                                   id="permInput"
                                   value="755"
                                   maxlength="4"
                                   oninput="updateFromOctalInput()"
                                   aria-describedby="perm-input-help">
                            <span id="perm-input-help" class="sr-only">Enter 3 or 4 digit octal permission value like 755 or 0755</span>
                        </div>
                        <div class="perm-input-group">
                            <label for="symbolicInput" data-i18n="tools.chmodCalculator.labels.symbolic">Symbolic</label>
                            <input type="text"
                                   id="symbolicInput"
                                   value="-rwxr-xr-x"
                                   maxlength="10"
                                   oninput="updateFromSymbolicInput()"
                                   aria-describedby="symbolic-input-help">
                            <span id="symbolic-input-help" class="sr-only">Enter symbolic notation like -rwxr-xr-x</span>
                        </div>
                    </div>
                </div>

                <h3 class="section-title" data-i18n="tools.chmodCalculator.labels.permissionCheckboxes">Permission Checkboxes</h3>
            <div class="permissions-grid">
                <div class="perm-header"></div>
                <div class="perm-header" data-i18n="tools.chmodCalculator.labels.read">Read (r)</div>
                <div class="perm-header" data-i18n="tools.chmodCalculator.labels.write">Write (w)</div>
                <div class="perm-header" data-i18n="tools.chmodCalculator.labels.execute">Execute (x)</div>

                <div class="perm-label" data-i18n="tools.chmodCalculator.labels.owner">Owner</div>
                <div class="perm-cell">
                    <label for="owner-r" class="perm-cell-label">
                        <input type="checkbox" id="owner-r" checked onchange="updateFromCheckboxes()" aria-label="Owner read permission (value 4)">
                        <span class="perm-bit">4</span>
                    </label>
                </div>
                <div class="perm-cell">
                    <label for="owner-w" class="perm-cell-label">
                        <input type="checkbox" id="owner-w" checked onchange="updateFromCheckboxes()" aria-label="Owner write permission (value 2)">
                        <span class="perm-bit">2</span>
                    </label>
                </div>
                <div class="perm-cell">
                    <label for="owner-x" class="perm-cell-label">
                        <input type="checkbox" id="owner-x" checked onchange="updateFromCheckboxes()" aria-label="Owner execute permission (value 1)">
                        <span class="perm-bit">1</span>
                    </label>
                </div>

                <div class="perm-label" data-i18n="tools.chmodCalculator.labels.group">Group</div>
                <div class="perm-cell">
                    <label for="group-r" class="perm-cell-label">
                        <input type="checkbox" id="group-r" checked onchange="updateFromCheckboxes()" aria-label="Group read permission (value 4)">
                        <span class="perm-bit">4</span>
                    </label>
                </div>
                <div class="perm-cell">
                    <label for="group-w" class="perm-cell-label">
                        <input type="checkbox" id="group-w" onchange="updateFromCheckboxes()" aria-label="Group write permission (value 2)">
                        <span class="perm-bit">2</span>
                    </label>
                </div>
                <div class="perm-cell">
                    <label for="group-x" class="perm-cell-label">
                        <input type="checkbox" id="group-x" checked onchange="updateFromCheckboxes()" aria-label="Group execute permission (value 1)">
                        <span class="perm-bit">1</span>
                    </label>
                </div>

                <div class="perm-label" data-i18n="tools.chmodCalculator.labels.other">Other</div>
                <div class="perm-cell">
                    <label for="other-r" class="perm-cell-label">
                        <input type="checkbox" id="other-r" checked onchange="updateFromCheckboxes()" aria-label="Other read permission (value 4)">
                        <span class="perm-bit">4</span>
                    </label>
                </div>
                <div class="perm-cell">
                    <label for="other-w" class="perm-cell-label">
                        <input type="checkbox" id="other-w" onchange="updateFromCheckboxes()" aria-label="Other write permission (value 2)">
                        <span class="perm-bit">2</span>
                    </label>
                </div>
                <div class="perm-cell">
                    <label for="other-x" class="perm-cell-label">
                        <input type="checkbox" id="other-x" checked onchange="updateFromCheckboxes()" aria-label="Other execute permission (value 1)">
                        <span class="perm-bit">1</span>
                    </label>
                </div>
            </div>

            <div class="presets-section">
                <h3 class="section-title" data-i18n="tools.chmodCalculator.presets.title">Common Presets</h3>
                <div class="presets-grid" role="group" aria-label="Common permission presets">
                    <button type="button" class="preset-btn" onclick="applyPreset(755)" aria-label="Apply 755 permissions for executables - owner read write execute, group and other read execute">755<span class="preset-desc" data-i18n="tools.chmodCalculator.presets.executables">Executables</span></button>
                    <button type="button" class="preset-btn" onclick="applyPreset(644)" aria-label="Apply 644 permissions for files - owner read write, group and other read only">644<span class="preset-desc" data-i18n="tools.chmodCalculator.presets.files">Files</span></button>
                    <button type="button" class="preset-btn" onclick="applyPreset(777)" aria-label="Apply 777 permissions for full access - all users read write execute">777<span class="preset-desc" data-i18n="tools.chmodCalculator.presets.fullAccess">Full access</span></button>
                    <button type="button" class="preset-btn" onclick="applyPreset(600)" aria-label="Apply 600 permissions for private files - owner read write only">600<span class="preset-desc" data-i18n="tools.chmodCalculator.presets.private">Private</span></button>
                    <button type="button" class="preset-btn" onclick="applyPreset(700)" aria-label="Apply 700 permissions for private executables - owner read write execute only">700<span class="preset-desc" data-i18n="tools.chmodCalculator.presets.privateExec">Private exec</span></button>
                    <button type="button" class="preset-btn" onclick="applyPreset(750)" aria-label="Apply 750 permissions for group executables - owner read write execute, group read execute">750<span class="preset-desc" data-i18n="tools.chmodCalculator.presets.groupExec">Group exec</span></button>
                    <button type="button" class="preset-btn" onclick="applyPreset(664)" aria-label="Apply 664 permissions for group writable files - owner and group read write, other read only">664<span class="preset-desc" data-i18n="tools.chmodCalculator.presets.groupWrite">Group write</span></button>
                    <button type="button" class="preset-btn" onclick="applyPreset(640)" aria-label="Apply 640 permissions for config files - owner read write, group read only">640<span class="preset-desc" data-i18n="tools.chmodCalculator.presets.config">Config</span></button>
                    <button type="button" class="preset-btn" onclick="applyPreset(400)" aria-label="Apply 400 permissions for read-only files - owner read only">400<span class="preset-desc" data-i18n="tools.chmodCalculator.presets.readOnly">Read-only</span></button>
                </div>
            </div>

            <div class="special-perms">
                <h3 class="section-title" data-i18n="tools.chmodCalculator.special.title">Special Permissions</h3>
                <div class="special-grid" role="group" aria-label="Special permission bits">
                    <div class="special-item">
                        <input type="checkbox" id="setuid" onchange="updateFromCheckboxes()" aria-label="Setuid bit (value 4) - run file as file owner">
                        <div class="special-info">
                            <div class="special-name" data-i18n="tools.chmodCalculator.special.setuid">Setuid (4)</div>
                            <div class="special-desc" data-i18n="tools.chmodCalculator.special.setuidDesc">Run as file owner</div>
                        </div>
                    </div>
                    <div class="special-item">
                        <input type="checkbox" id="setgid" onchange="updateFromCheckboxes()" aria-label="Setgid bit (value 2) - run file as file group">
                        <div class="special-info">
                            <div class="special-name" data-i18n="tools.chmodCalculator.special.setgid">Setgid (2)</div>
                            <div class="special-desc" data-i18n="tools.chmodCalculator.special.setgidDesc">Run as file group</div>
                        </div>
                    </div>
                    <div class="special-item">
                        <input type="checkbox" id="sticky" onchange="updateFromCheckboxes()" aria-label="Sticky bit (value 1) - restrict deletion to file owner only">
                        <div class="special-info">
                            <div class="special-name" data-i18n="tools.chmodCalculator.special.sticky">Sticky (1)</div>
                            <div class="special-desc" data-i18n="tools.chmodCalculator.special.stickyDesc">Restrict deletion</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="error" id="error" role="alert" aria-live="assertive" aria-atomic="true"></div>

            <div class="results-grid" role="region" aria-live="polite" aria-label="Permission calculation results">
                <div class="result-card">
                    <h4 data-i18n="tools.chmodCalculator.results.octalNotation">Octal Notation</h4>
                    <div class="value">
                        <code id="octalOutput">755</code>
                        <button type="button" class="copy-btn" onclick="copyValue('octalOutput', this)" aria-label="Copy octal notation to clipboard" data-i18n="common.copy">Copy</button>
                    </div>
                </div>
                <div class="result-card">
                    <h4 data-i18n="tools.chmodCalculator.results.symbolicNotation">Symbolic Notation</h4>
                    <div class="value">
                        <code id="symbolicOutput">-rwxr-xr-x</code>
                        <button type="button" class="copy-btn" onclick="copyValue('symbolicOutput', this)" aria-label="Copy symbolic notation to clipboard" data-i18n="common.copy">Copy</button>
                    </div>
                </div>
                <div class="result-card">
                    <h4 data-i18n="tools.chmodCalculator.results.chmodCommand">chmod Command</h4>
                    <div class="value">
                        <code id="commandOutput">chmod 755 filename</code>
                        <button type="button" class="copy-btn" onclick="copyValue('commandOutput', this)" aria-label="Copy chmod command to clipboard" data-i18n="common.copy">Copy</button>
                    </div>
                </div>
            </div>

            <div class="reference-table">
                <h3 data-i18n="tools.chmodCalculator.reference.title">Octal Reference</h3>
                <div class="ref-grid">
                    <div class="ref-item"><div class="ref-octal">0</div><div class="ref-perms">---</div></div>
                    <div class="ref-item"><div class="ref-octal">1</div><div class="ref-perms">--x</div></div>
                    <div class="ref-item"><div class="ref-octal">2</div><div class="ref-perms">-w-</div></div>
                    <div class="ref-item"><div class="ref-octal">3</div><div class="ref-perms">-wx</div></div>
                    <div class="ref-item"><div class="ref-octal">4</div><div class="ref-perms">r--</div></div>
                    <div class="ref-item"><div class="ref-octal">5</div><div class="ref-perms">r-x</div></div>
                    <div class="ref-item"><div class="ref-octal">6</div><div class="ref-perms">rw-</div></div>
                    <div class="ref-item"><div class="ref-octal">7</div><div class="ref-perms">rwx</div></div>
                </div>
            </div>

            <button type="button" class="btn secondary" onclick="clearAllSavedData()" aria-label="Clear all saved form data from this page" data-i18n="common.clearSavedData">Clear Saved Data</button>
            </div><!-- End tab-permissions -->

            <div class="tab-content" id="tab-umask" role="tabpanel" aria-labelledby="tab-btn-umask">
                <div class="umask-section" style="margin-top: 0;">
                    <h3 data-i18n="tools.chmodCalculator.umask.title">Umask Calculator</h3>
                    <p style="color: rgba(255, 255, 255, 0.7); margin-bottom: 15px; font-size: 0.9rem;" data-i18n="tools.chmodCalculator.umask.description">Calculate default file and directory permissions based on umask value.</p>
                    <div class="umask-row">
                        <div class="umask-input-group">
                            <label for="umaskInput" data-i18n="tools.chmodCalculator.labels.umaskValue">Umask Value</label>
                            <input type="text"
                                   id="umaskInput"
                                   value="022"
                                   oninput="calculateUmask()"
                                   aria-describedby="umask-help">
                            <span id="umask-help" class="sr-only">Enter a umask value in octal notation to calculate default file and directory permissions</span>
                        </div>
                        <div class="umask-results" role="region" aria-live="polite" aria-label="Umask calculation results">
                            <div class="umask-result">
                                <h5 data-i18n="tools.chmodCalculator.labels.defaultFilePerms">Default File Permissions</h5>
                                <div class="umask-value" id="filePerms">644</div>
                                <div class="umask-symbolic" id="fileSymbolic">-rw-r--r--</div>
                            </div>
                            <div class="umask-result">
                                <h5 data-i18n="tools.chmodCalculator.labels.defaultDirPerms">Default Directory Permissions</h5>
                                <div class="umask-value" id="dirPerms">755</div>
                                <div class="umask-symbolic" id="dirSymbolic">drwxr-xr-x</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div><!-- End tab-umask -->
        </div>

        <footer role="contentinfo" data-i18n="common.worksOffline">
            Chmod Calculator - Works offline, no installation required
        </footer>
    </main>

    <script>
        // Tab Navigation
        function switchTab(tabName) {
            // Update tab buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                const isActive = btn.dataset.tab === tabName;
                btn.classList.toggle('active', isActive);
                btn.setAttribute('aria-selected', isActive);
            });

            // Update tab content
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.toggle('active', content.id === `tab-${tabName}`);
            });

            // Announce tab change for screen readers
            const tabLabel = document.querySelector(`[data-tab="${tabName}"]`).textContent;
            A11yUtils.announce(`${tabLabel} tab selected`, 'polite');
        }

        // Initialize tab click handlers
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.addEventListener('click', () => switchTab(btn.dataset.tab));
            });

            // Keyboard navigation for tabs
            const tabList = document.querySelector('.tab-navigation');
            tabList.addEventListener('keydown', function(e) {
                const tabs = Array.from(document.querySelectorAll('.tab-btn'));
                const currentIndex = tabs.findIndex(tab => tab === document.activeElement);

                if (currentIndex === -1) return;

                let newIndex = currentIndex;
                if (e.key === 'ArrowRight' || e.key === 'ArrowDown') {
                    newIndex = (currentIndex + 1) % tabs.length;
                    e.preventDefault();
                } else if (e.key === 'ArrowLeft' || e.key === 'ArrowUp') {
                    newIndex = (currentIndex - 1 + tabs.length) % tabs.length;
                    e.preventDefault();
                } else if (e.key === 'Home') {
                    newIndex = 0;
                    e.preventDefault();
                } else if (e.key === 'End') {
                    newIndex = tabs.length - 1;
                    e.preventDefault();
                }

                if (newIndex !== currentIndex) {
                    tabs[newIndex].focus();
                    switchTab(tabs[newIndex].dataset.tab);
                }
            });
        });

        // Live octal input handler
        function updateFromOctalInput() {
            const input = document.getElementById('permInput').value.trim();

            // Only process if it looks like a valid octal (3-4 digits, 0-7)
            if (/^[0-7]{3,4}$/.test(input)) {
                setCheckboxesFromOctal(input);
                const { owner, group, other, special } = getPermissionsFromCheckboxes();
                updateDisplay(owner, group, other, special);
            }
        }

        // Live symbolic input handler
        function updateFromSymbolicInput() {
            const input = document.getElementById('symbolicInput').value.trim();
            const result = symbolicToOctal(input);

            if (result) {
                const octal = result.special > 0
                    ? `${result.special}${result.owner}${result.group}${result.other}`
                    : `${result.owner}${result.group}${result.other}`;
                setCheckboxesFromOctal(octal);
                const { owner, group, other, special } = getPermissionsFromCheckboxes();
                updateDisplay(owner, group, other, special);
            }
        }

        function getPermissionsFromCheckboxes() {
            const owner =
                (document.getElementById('owner-r').checked ? 4 : 0) +
                (document.getElementById('owner-w').checked ? 2 : 0) +
                (document.getElementById('owner-x').checked ? 1 : 0);

            const group =
                (document.getElementById('group-r').checked ? 4 : 0) +
                (document.getElementById('group-w').checked ? 2 : 0) +
                (document.getElementById('group-x').checked ? 1 : 0);

            const other =
                (document.getElementById('other-r').checked ? 4 : 0) +
                (document.getElementById('other-w').checked ? 2 : 0) +
                (document.getElementById('other-x').checked ? 1 : 0);

            const special =
                (document.getElementById('setuid').checked ? 4 : 0) +
                (document.getElementById('setgid').checked ? 2 : 0) +
                (document.getElementById('sticky').checked ? 1 : 0);

            return { owner, group, other, special };
        }

        function setCheckboxesFromOctal(octal) {
            const str = octal.toString().padStart(3, '0');
            let special = 0;
            let perms = str;

            if (str.length === 4) {
                special = parseInt(str[0]);
                perms = str.slice(1);
            }

            const owner = parseInt(perms[0]);
            const group = parseInt(perms[1]);
            const other = parseInt(perms[2]);

            document.getElementById('owner-r').checked = (owner & 4) !== 0;
            document.getElementById('owner-w').checked = (owner & 2) !== 0;
            document.getElementById('owner-x').checked = (owner & 1) !== 0;

            document.getElementById('group-r').checked = (group & 4) !== 0;
            document.getElementById('group-w').checked = (group & 2) !== 0;
            document.getElementById('group-x').checked = (group & 1) !== 0;

            document.getElementById('other-r').checked = (other & 4) !== 0;
            document.getElementById('other-w').checked = (other & 2) !== 0;
            document.getElementById('other-x').checked = (other & 1) !== 0;

            document.getElementById('setuid').checked = (special & 4) !== 0;
            document.getElementById('setgid').checked = (special & 2) !== 0;
            document.getElementById('sticky').checked = (special & 1) !== 0;
        }

        function octalToSymbolic(owner, group, other, special = 0, isDir = false) {
            const permChar = (val, r, w, x, specialBit, specialChar) => {
                let result = (val & 4) ? r : '-';
                result += (val & 2) ? w : '-';
                if (specialBit) {
                    result += (val & 1) ? specialChar.toLowerCase() : specialChar.toUpperCase();
                } else {
                    result += (val & 1) ? x : '-';
                }
                return result;
            };

            const prefix = isDir ? 'd' : '-';
            const ownerStr = permChar(owner, 'r', 'w', 'x', special & 4, 's');
            const groupStr = permChar(group, 'r', 'w', 'x', special & 2, 's');
            const otherStr = permChar(other, 'r', 'w', 'x', special & 1, 't');

            return prefix + ownerStr + groupStr + otherStr;
        }

        function symbolicToOctal(symbolic) {
            let str = symbolic.trim();

            // Remove file type prefix if present
            if (str.match(/^[dlcbps-]/)) {
                str = str.slice(1);
            }

            if (str.length !== 9) {
                return null;
            }

            const parseGroup = (chars) => {
                let val = 0;
                val += (chars[0] === 'r') ? 4 : 0;
                val += (chars[1] === 'w') ? 2 : 0;
                val += (chars[2] === 'x' || chars[2] === 's' || chars[2] === 't') ? 1 : 0;
                return val;
            };

            const owner = parseGroup(str.slice(0, 3));
            const group = parseGroup(str.slice(3, 6));
            const other = parseGroup(str.slice(6, 9));

            let special = 0;
            if (str[2] === 's' || str[2] === 'S') special += 4;
            if (str[5] === 's' || str[5] === 'S') special += 2;
            if (str[8] === 't' || str[8] === 'T') special += 1;

            return { owner, group, other, special };
        }

        function updateFromCheckboxes() {
            const { owner, group, other, special } = getPermissionsFromCheckboxes();
            updateDisplay(owner, group, other, special);
            announcePermissionsChange();
        }

        function updateDisplay(owner, group, other, special = 0) {
            const octal = special > 0
                ? `${special}${owner}${group}${other}`
                : `${owner}${group}${other}`;

            const symbolic = octalToSymbolic(owner, group, other, special);

            document.getElementById('octalOutput').textContent = octal;
            document.getElementById('symbolicOutput').textContent = symbolic;
            document.getElementById('commandOutput').textContent = `chmod ${octal} filename`;

            // Sync the live inputs (only if not currently focused to avoid cursor issues)
            const permInput = document.getElementById('permInput');
            if (permInput && document.activeElement !== permInput) {
                permInput.value = octal;
            }

            const symbolicInput = document.getElementById('symbolicInput');
            if (symbolicInput && document.activeElement !== symbolicInput) {
                symbolicInput.value = symbolic;
            }

            hideError();
        }

        let lastAnnouncedPermissions = null;
        function announcePermissionsChange() {
            const octal = document.getElementById('octalOutput').textContent;
            const symbolic = document.getElementById('symbolicOutput').textContent;

            // Only announce if permissions actually changed
            if (lastAnnouncedPermissions !== octal) {
                A11yUtils.announce(`Permissions updated to ${octal}, ${symbolic}`, 'polite');
                lastAnnouncedPermissions = octal;
            }
        }

        function applyPreset(octal) {
            setCheckboxesFromOctal(octal);
            updateFromCheckboxes();
            A11yUtils.announce(`Applied preset permissions ${octal}`, 'polite');
        }

        let lastUmaskValue = null;
        function calculateUmask() {
            const input = document.getElementById('umaskInput').value.trim();

            if (!/^[0-7]{3,4}$/.test(input)) {
                document.getElementById('filePerms').textContent = '---';
                document.getElementById('dirPerms').textContent = '---';
                document.getElementById('fileSymbolic').textContent = '';
                document.getElementById('dirSymbolic').textContent = '';
                return;
            }

            const umask = parseInt(input, 8);

            // Default file creation mode is 666, directory is 777
            const fileMode = 0o666 & ~umask;
            const dirMode = 0o777 & ~umask;

            const fileOctal = fileMode.toString(8).padStart(3, '0');
            const dirOctal = dirMode.toString(8).padStart(3, '0');

            const fileOwner = parseInt(fileOctal[0]);
            const fileGroup = parseInt(fileOctal[1]);
            const fileOther = parseInt(fileOctal[2]);

            const dirOwner = parseInt(dirOctal[0]);
            const dirGroup = parseInt(dirOctal[1]);
            const dirOther = parseInt(dirOctal[2]);

            document.getElementById('filePerms').textContent = fileOctal;
            document.getElementById('fileSymbolic').textContent = octalToSymbolic(fileOwner, fileGroup, fileOther);

            document.getElementById('dirPerms').textContent = dirOctal;
            document.getElementById('dirSymbolic').textContent = octalToSymbolic(dirOwner, dirGroup, dirOther, 0, true);

            // Only announce if umask value actually changed
            if (lastUmaskValue !== input) {
                A11yUtils.announce(`Umask ${input} results in file permissions ${fileOctal} and directory permissions ${dirOctal}`, 'polite');
                lastUmaskValue = input;
            }
        }

        function copyValue(elementId, button) {
            const value = document.getElementById(elementId).textContent;
            navigator.clipboard.writeText(value).then(() => {
                const copiedText = I18nUtils.t('common.copied') || 'Copied!';
                const copyText = I18nUtils.t('common.copy') || 'Copy';
                button.textContent = copiedText;
                button.classList.add('copied');
                A11yUtils.announce(I18nUtils.t('common.copiedToClipboard') || `Copied ${value} to clipboard`, 'polite');
                setTimeout(() => {
                    button.textContent = copyText;
                    button.classList.remove('copied');
                }, 1500);
            });
        }

        function showError(message) {
            const errorDiv = document.getElementById('error');
            errorDiv.textContent = message;
            errorDiv.classList.add('show');
        }

        function hideError() {
            document.getElementById('error').classList.remove('show');
        }

        // localStorage persistence
        const chmodCalcFields = ['permInput', 'symbolicInput', 'owner-r', 'owner-w', 'owner-x', 'group-r', 'group-w', 'group-x', 'other-r', 'other-w', 'other-x', 'setuid', 'setgid', 'sticky', 'umaskInput'];

        function clearAllSavedData() {
            StorageUtils.remove('chmod-calc');
            // Reset to defaults
            document.getElementById('permInput').value = '755';
            document.getElementById('symbolicInput').value = '-rwxr-xr-x';
            document.getElementById('umaskInput').value = '022';
            // Reset checkboxes to default states (755 = rwxr-xr-x)
            document.getElementById('owner-r').checked = true;
            document.getElementById('owner-w').checked = true;
            document.getElementById('owner-x').checked = true;
            document.getElementById('group-r').checked = true;
            document.getElementById('group-w').checked = false;
            document.getElementById('group-x').checked = true;
            document.getElementById('other-r').checked = true;
            document.getElementById('other-w').checked = false;
            document.getElementById('other-x').checked = true;
            document.getElementById('setuid').checked = false;
            document.getElementById('setgid').checked = false;
            document.getElementById('sticky').checked = false;
            // Update display
            updateFromCheckboxes();
            calculateUmask();
            A11yUtils.announce(I18nUtils.t('common.allDataCleared') || 'All saved data has been cleared', 'polite');
        }

        document.addEventListener('DOMContentLoaded', function() {
            StorageUtils.loadFormInputs('chmod-calc', chmodCalcFields, function() {
                // After loading, update display from loaded values
                updateFromOctalInput();
                calculateUmask();
            });
            StorageUtils.autoSaveFormInputs('chmod-calc', chmodCalcFields);
        });

        // Initialize
        updateFromCheckboxes();
        calculateUmask();
    </script>
    <script>
        document.querySelector('.skip-link').addEventListener('click', function(e) {
            e.preventDefault();
            const target = document.getElementById('main-content');
            if (target) {
                target.setAttribute('tabindex', '-1');
                target.focus();
                target.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        });
    </script>
</body>
</html>
