<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- SEO Meta Tags -->
    <meta name="description" content="Calculate Unix file permissions (chmod) values. Convert between numeric and symbolic notation. Visual permission calculator for Linux/Unix.">
    <meta name="keywords" content="chmod calculator, file permissions, Unix permissions, Linux chmod, permission calculator, octal permissions">
    <meta name="author" content="OldWeb LLC">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://oldweb.tech/system/chmod-calculator.html">

    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Chmod Calculator - OldWeb.tech">
    <meta property="og:description" content="Calculate Unix file permissions (chmod) values. Convert between numeric and symbolic notation. Visual permission calculator for Linux/Unix.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://oldweb.tech/system/chmod-calculator.html">
    <meta property="og:site_name" content="OldWeb.tech">

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Chmod Calculator - OldWeb.tech">
    <meta name="twitter:description" content="Calculate Unix file permissions (chmod) values. Convert between numeric and symbolic notation. Visual permission calculator for Linux/Unix.">

    <!-- Additional Meta Tags -->
    <meta name="theme-color" content="#1a1a2e">

    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="../logo/favicon-32x32.png">

    <title>Chmod Calculator - OldWeb.tech</title>
    <link rel="stylesheet" href="../a11y.css">
    <script src="../a11y-utils.js"></script>
    <script src="../navigationv2.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            padding: 40px 20px;
            color: #fff;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        .ascii-logo {
            position: absolute;
            top: 20px;
            right: 40px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.65rem;
            line-height: 1.1;
            color: #4fc3f7;
            text-shadow: 0 0 10px rgba(79, 195, 247, 0.3);
            opacity: 0.8;
            white-space: pre;
        }

        h1 {
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5rem;
            color: #4fc3f7;
            text-shadow: 0 0 20px rgba(79, 195, 247, 0.3);
        }

        .subtitle {
            text-align: center;
            color: #90caf9;
            font-size: 1rem;
            margin-bottom: 30px;
            opacity: 0.9;
        }

        .calculator {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 20px;
        }

        .section-title {
            font-size: 0.9rem;
            color: #90caf9;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 15px;
        }

        .permissions-grid {
            display: grid;
            grid-template-columns: 100px repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 25px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 12px;
            padding: 20px;
        }

        .perm-header {
            text-align: center;
            font-weight: 600;
            color: #4fc3f7;
            padding: 10px;
        }

        .perm-label {
            display: flex;
            align-items: center;
            color: #90caf9;
            font-weight: 500;
        }

        .perm-cell {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            transition: all 0.2s;
        }

        .perm-cell:hover {
            background: rgba(79, 195, 247, 0.1);
        }

        .perm-cell input[type="checkbox"] {
            width: 24px;
            height: 24px;
            cursor: pointer;
            accent-color: #4fc3f7;
        }

        .perm-cell .perm-bit {
            margin-top: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.5);
        }

        .perm-cell input:checked + .perm-bit {
            color: #4fc3f7;
        }

        .presets-section {
            margin-bottom: 25px;
        }

        .presets-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .preset-btn {
            padding: 8px 16px;
            border: 1px solid rgba(79, 195, 247, 0.3);
            background: rgba(0, 0, 0, 0.2);
            color: #90caf9;
            border-radius: 6px;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            transition: all 0.2s;
        }

        .preset-btn:hover {
            background: rgba(79, 195, 247, 0.2);
            border-color: #4fc3f7;
            color: #4fc3f7;
        }

        .preset-btn .preset-desc {
            font-family: 'Segoe UI', sans-serif;
            font-size: 0.75rem;
            color: rgba(255, 255, 255, 0.5);
            margin-left: 8px;
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }

        .result-card {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            padding: 20px;
            border-left: 4px solid #4fc3f7;
        }

        .result-card h4 {
            font-size: 0.8rem;
            color: #90caf9;
            text-transform: uppercase;
            margin-bottom: 10px;
        }

        .result-card .value {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .result-card .value code {
            font-family: 'Courier New', monospace;
            font-size: 1.4rem;
            color: #4fc3f7;
            flex: 1;
        }

        .copy-btn {
            padding: 6px 12px;
            background: rgba(102, 187, 106, 0.2);
            border: 1px solid #66bb6a;
            border-radius: 6px;
            color: #66bb6a;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.2s;
        }

        .copy-btn:hover {
            background: rgba(102, 187, 106, 0.3);
        }

        .copy-btn.copied {
            background: #66bb6a;
            color: #1a1a2e;
        }

        .input-section {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 25px;
        }

        .input-row {
            display: flex;
            gap: 15px;
            align-items: flex-end;
        }

        .input-group {
            flex: 1;
        }

        .input-group label {
            display: block;
            font-size: 0.85rem;
            color: #90caf9;
            margin-bottom: 8px;
        }

        .input-group input {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid rgba(79, 195, 247, 0.3);
            border-radius: 8px;
            background: rgba(0, 0, 0, 0.3);
            color: #fff;
            font-family: 'Courier New', monospace;
            font-size: 1.1rem;
        }

        .input-group input:focus {
            outline: none;
            border-color: #4fc3f7;
            box-shadow: 0 0 10px rgba(79, 195, 247, 0.3);
        }

        .convert-btn {
            padding: 12px 24px;
            background: linear-gradient(135deg, #4fc3f7 0%, #2196f3 100%);
            border: none;
            border-radius: 8px;
            color: #1a1a2e;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .convert-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(79, 195, 247, 0.4);
        }

        .special-perms {
            margin-bottom: 25px;
        }

        .special-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }

        .special-item {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            padding: 15px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .special-item input[type="checkbox"] {
            width: 20px;
            height: 20px;
            accent-color: #ff9800;
        }

        .special-item .special-info {
            flex: 1;
        }

        .special-item .special-name {
            color: #ff9800;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .special-item .special-desc {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.8rem;
            margin-top: 3px;
        }

        .umask-section {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 12px;
            padding: 25px;
            margin-top: 20px;
        }

        .umask-section h3 {
            color: #4fc3f7;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .umask-row {
            display: flex;
            gap: 20px;
            align-items: flex-start;
        }

        .umask-input-group {
            flex: 0 0 200px;
        }

        .umask-input-group label {
            display: block;
            font-size: 0.85rem;
            color: #90caf9;
            margin-bottom: 8px;
        }

        .umask-input-group input {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid rgba(79, 195, 247, 0.3);
            border-radius: 8px;
            background: rgba(0, 0, 0, 0.3);
            color: #fff;
            font-family: 'Courier New', monospace;
            font-size: 1.2rem;
            text-align: center;
        }

        .umask-results {
            flex: 1;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .umask-result {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            padding: 15px;
            border-left: 3px solid #66bb6a;
        }

        .umask-result h5 {
            font-size: 0.75rem;
            color: #90caf9;
            text-transform: uppercase;
            margin-bottom: 8px;
        }

        .umask-result .umask-value {
            font-family: 'Courier New', monospace;
            font-size: 1.3rem;
            color: #66bb6a;
        }

        .umask-result .umask-symbolic {
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
            margin-top: 5px;
        }

        .reference-table {
            margin-top: 20px;
        }

        .reference-table h3 {
            color: #4fc3f7;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .ref-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
        }

        .ref-item {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 6px;
            padding: 10px;
            text-align: center;
        }

        .ref-item .ref-octal {
            font-family: 'Courier New', monospace;
            font-size: 1.2rem;
            color: #4fc3f7;
        }

        .ref-item .ref-perms {
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.6);
            margin-top: 5px;
        }

        .error {
            background: rgba(244, 67, 54, 0.1);
            border: 1px solid #f44336;
            border-left: 4px solid #f44336;
            color: #ff8a80;
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
        }

        .error.show {
            display: block;
        }

        footer {
            text-align: center;
            margin-top: 30px;
            color: rgba(255, 255, 255, 0.4);
            font-size: 0.85rem;
        }

        @media (max-width: 768px) {
            .ascii-logo {
                position: static;
                text-align: center;
                margin-bottom: 20px;
                font-size: 0.5rem;
            }

            h1 {
                font-size: 1.8rem;
            }

            .permissions-grid {
                grid-template-columns: 80px repeat(3, 1fr);
                gap: 5px;
                padding: 15px;
            }

            .perm-cell {
                padding: 10px;
            }

            .special-grid {
                grid-template-columns: 1fr;
            }

            .input-row {
                flex-direction: column;
            }

            .umask-row {
                flex-direction: column;
            }

            .umask-input-group {
                flex: 1;
                width: 100%;
            }

            .umask-results {
                grid-template-columns: 1fr;
            }

            .results-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>

    <!-- Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Chmod Calculator",
      "description": "Calculate Unix file permissions (chmod) values. Convert between numeric and symbolic notation. Visual permission calculator for Linux/Unix.",
      "url": "https://oldweb.tech/chmod-calculator.html",
      "applicationCategory": "UtilitiesApplication",
      "operatingSystem": "Web Browser",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "creator": {
        "@type": "Organization",
        "name": "OldWeb.tech"
      }
    }
    </script>
</head>
<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>
    <div class="ascii-logo" aria-hidden="true">  ___  _    _  __        __   _
 / _ \| | _| | \ \      / /__| |__
| | | | |/ _` | \ \ /\ / / _ \ '_ \
| |_| | | (_| |  \ V  V /  __/ |_) |
 \___/|_|\__,_|   \_/\_/ \___|_.__/
</div>
    <main id="main-content" class="container">
        <h1>Chmod Calculator</h1>
        <p class="subtitle">Visual Unix file permissions calculator</p>

        <div class="calculator">
            <h3 class="section-title">Permission Checkboxes</h3>
            <div class="permissions-grid">
                <div class="perm-header"></div>
                <div class="perm-header">Read (r)</div>
                <div class="perm-header">Write (w)</div>
                <div class="perm-header">Execute (x)</div>

                <div class="perm-label">Owner</div>
                <div class="perm-cell">
                    <input type="checkbox" id="owner-r" checked onchange="updateFromCheckboxes()">
                    <span class="perm-bit">4</span>
                </div>
                <div class="perm-cell">
                    <input type="checkbox" id="owner-w" checked onchange="updateFromCheckboxes()">
                    <span class="perm-bit">2</span>
                </div>
                <div class="perm-cell">
                    <input type="checkbox" id="owner-x" checked onchange="updateFromCheckboxes()">
                    <span class="perm-bit">1</span>
                </div>

                <div class="perm-label">Group</div>
                <div class="perm-cell">
                    <input type="checkbox" id="group-r" checked onchange="updateFromCheckboxes()">
                    <span class="perm-bit">4</span>
                </div>
                <div class="perm-cell">
                    <input type="checkbox" id="group-w" onchange="updateFromCheckboxes()">
                    <span class="perm-bit">2</span>
                </div>
                <div class="perm-cell">
                    <input type="checkbox" id="group-x" checked onchange="updateFromCheckboxes()">
                    <span class="perm-bit">1</span>
                </div>

                <div class="perm-label">Other</div>
                <div class="perm-cell">
                    <input type="checkbox" id="other-r" checked onchange="updateFromCheckboxes()">
                    <span class="perm-bit">4</span>
                </div>
                <div class="perm-cell">
                    <input type="checkbox" id="other-w" onchange="updateFromCheckboxes()">
                    <span class="perm-bit">2</span>
                </div>
                <div class="perm-cell">
                    <input type="checkbox" id="other-x" checked onchange="updateFromCheckboxes()">
                    <span class="perm-bit">1</span>
                </div>
            </div>

            <div class="presets-section">
                <h3 class="section-title">Common Presets</h3>
                <div class="presets-grid">
                    <button class="preset-btn" onclick="applyPreset(755)">755<span class="preset-desc">Executables</span></button>
                    <button class="preset-btn" onclick="applyPreset(644)">644<span class="preset-desc">Files</span></button>
                    <button class="preset-btn" onclick="applyPreset(777)">777<span class="preset-desc">Full access</span></button>
                    <button class="preset-btn" onclick="applyPreset(600)">600<span class="preset-desc">Private</span></button>
                    <button class="preset-btn" onclick="applyPreset(700)">700<span class="preset-desc">Private exec</span></button>
                    <button class="preset-btn" onclick="applyPreset(750)">750<span class="preset-desc">Group exec</span></button>
                    <button class="preset-btn" onclick="applyPreset(664)">664<span class="preset-desc">Group write</span></button>
                    <button class="preset-btn" onclick="applyPreset(640)">640<span class="preset-desc">Config</span></button>
                    <button class="preset-btn" onclick="applyPreset(400)">400<span class="preset-desc">Read-only</span></button>
                </div>
            </div>

            <div class="special-perms">
                <h3 class="section-title">Special Permissions</h3>
                <div class="special-grid">
                    <div class="special-item">
                        <input type="checkbox" id="setuid" onchange="updateFromCheckboxes()">
                        <div class="special-info">
                            <div class="special-name">Setuid (4)</div>
                            <div class="special-desc">Run as file owner</div>
                        </div>
                    </div>
                    <div class="special-item">
                        <input type="checkbox" id="setgid" onchange="updateFromCheckboxes()">
                        <div class="special-info">
                            <div class="special-name">Setgid (2)</div>
                            <div class="special-desc">Run as file group</div>
                        </div>
                    </div>
                    <div class="special-item">
                        <input type="checkbox" id="sticky" onchange="updateFromCheckboxes()">
                        <div class="special-info">
                            <div class="special-name">Sticky (1)</div>
                            <div class="special-desc">Restrict deletion</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="error" id="error"></div>

            <div class="results-grid">
                <div class="result-card">
                    <h4>Octal Notation</h4>
                    <div class="value">
                        <code id="octalOutput">755</code>
                        <button class="copy-btn" onclick="copyValue('octalOutput', this)">Copy</button>
                    </div>
                </div>
                <div class="result-card">
                    <h4>Symbolic Notation</h4>
                    <div class="value">
                        <code id="symbolicOutput">-rwxr-xr-x</code>
                        <button class="copy-btn" onclick="copyValue('symbolicOutput', this)">Copy</button>
                    </div>
                </div>
                <div class="result-card">
                    <h4>chmod Command</h4>
                    <div class="value">
                        <code id="commandOutput">chmod 755 filename</code>
                        <button class="copy-btn" onclick="copyValue('commandOutput', this)">Copy</button>
                    </div>
                </div>
            </div>

            <div class="input-section">
                <h3 class="section-title">Convert from Octal or Symbolic</h3>
                <div class="input-row">
                    <div class="input-group">
                        <label>Enter octal (e.g., 755) or symbolic (e.g., -rwxr-xr-x)</label>
                        <input type="text" id="convertInput" placeholder="755 or -rwxr-xr-x">
                    </div>
                    <button class="convert-btn" onclick="convertInput()">Convert</button>
                </div>
            </div>

            <div class="umask-section">
                <h3>Umask Calculator</h3>
                <div class="umask-row">
                    <div class="umask-input-group">
                        <label>Umask Value</label>
                        <input type="text" id="umaskInput" value="022" oninput="calculateUmask()">
                    </div>
                    <div class="umask-results">
                        <div class="umask-result">
                            <h5>Default File Permissions</h5>
                            <div class="umask-value" id="filePerms">644</div>
                            <div class="umask-symbolic" id="fileSymbolic">-rw-r--r--</div>
                        </div>
                        <div class="umask-result">
                            <h5>Default Directory Permissions</h5>
                            <div class="umask-value" id="dirPerms">755</div>
                            <div class="umask-symbolic" id="dirSymbolic">drwxr-xr-x</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="reference-table">
                <h3>Octal Reference</h3>
                <div class="ref-grid">
                    <div class="ref-item"><div class="ref-octal">0</div><div class="ref-perms">---</div></div>
                    <div class="ref-item"><div class="ref-octal">1</div><div class="ref-perms">--x</div></div>
                    <div class="ref-item"><div class="ref-octal">2</div><div class="ref-perms">-w-</div></div>
                    <div class="ref-item"><div class="ref-octal">3</div><div class="ref-perms">-wx</div></div>
                    <div class="ref-item"><div class="ref-octal">4</div><div class="ref-perms">r--</div></div>
                    <div class="ref-item"><div class="ref-octal">5</div><div class="ref-perms">r-x</div></div>
                    <div class="ref-item"><div class="ref-octal">6</div><div class="ref-perms">rw-</div></div>
                    <div class="ref-item"><div class="ref-octal">7</div><div class="ref-perms">rwx</div></div>
                </div>
            </div>
        </div>

        <footer role="contentinfo">
            Chmod Calculator - Works offline, no installation required
        </footer>
    </main>

    <script>
        function getPermissionsFromCheckboxes() {
            const owner =
                (document.getElementById('owner-r').checked ? 4 : 0) +
                (document.getElementById('owner-w').checked ? 2 : 0) +
                (document.getElementById('owner-x').checked ? 1 : 0);

            const group =
                (document.getElementById('group-r').checked ? 4 : 0) +
                (document.getElementById('group-w').checked ? 2 : 0) +
                (document.getElementById('group-x').checked ? 1 : 0);

            const other =
                (document.getElementById('other-r').checked ? 4 : 0) +
                (document.getElementById('other-w').checked ? 2 : 0) +
                (document.getElementById('other-x').checked ? 1 : 0);

            const special =
                (document.getElementById('setuid').checked ? 4 : 0) +
                (document.getElementById('setgid').checked ? 2 : 0) +
                (document.getElementById('sticky').checked ? 1 : 0);

            return { owner, group, other, special };
        }

        function setCheckboxesFromOctal(octal) {
            const str = octal.toString().padStart(3, '0');
            let special = 0;
            let perms = str;

            if (str.length === 4) {
                special = parseInt(str[0]);
                perms = str.slice(1);
            }

            const owner = parseInt(perms[0]);
            const group = parseInt(perms[1]);
            const other = parseInt(perms[2]);

            document.getElementById('owner-r').checked = (owner & 4) !== 0;
            document.getElementById('owner-w').checked = (owner & 2) !== 0;
            document.getElementById('owner-x').checked = (owner & 1) !== 0;

            document.getElementById('group-r').checked = (group & 4) !== 0;
            document.getElementById('group-w').checked = (group & 2) !== 0;
            document.getElementById('group-x').checked = (group & 1) !== 0;

            document.getElementById('other-r').checked = (other & 4) !== 0;
            document.getElementById('other-w').checked = (other & 2) !== 0;
            document.getElementById('other-x').checked = (other & 1) !== 0;

            document.getElementById('setuid').checked = (special & 4) !== 0;
            document.getElementById('setgid').checked = (special & 2) !== 0;
            document.getElementById('sticky').checked = (special & 1) !== 0;
        }

        function octalToSymbolic(owner, group, other, special = 0, isDir = false) {
            const permChar = (val, r, w, x, specialBit, specialChar) => {
                let result = (val & 4) ? r : '-';
                result += (val & 2) ? w : '-';
                if (specialBit) {
                    result += (val & 1) ? specialChar.toLowerCase() : specialChar.toUpperCase();
                } else {
                    result += (val & 1) ? x : '-';
                }
                return result;
            };

            const prefix = isDir ? 'd' : '-';
            const ownerStr = permChar(owner, 'r', 'w', 'x', special & 4, 's');
            const groupStr = permChar(group, 'r', 'w', 'x', special & 2, 's');
            const otherStr = permChar(other, 'r', 'w', 'x', special & 1, 't');

            return prefix + ownerStr + groupStr + otherStr;
        }

        function symbolicToOctal(symbolic) {
            let str = symbolic.trim();

            // Remove file type prefix if present
            if (str.match(/^[dlcbps-]/)) {
                str = str.slice(1);
            }

            if (str.length !== 9) {
                return null;
            }

            const parseGroup = (chars) => {
                let val = 0;
                val += (chars[0] === 'r') ? 4 : 0;
                val += (chars[1] === 'w') ? 2 : 0;
                val += (chars[2] === 'x' || chars[2] === 's' || chars[2] === 't') ? 1 : 0;
                return val;
            };

            const owner = parseGroup(str.slice(0, 3));
            const group = parseGroup(str.slice(3, 6));
            const other = parseGroup(str.slice(6, 9));

            let special = 0;
            if (str[2] === 's' || str[2] === 'S') special += 4;
            if (str[5] === 's' || str[5] === 'S') special += 2;
            if (str[8] === 't' || str[8] === 'T') special += 1;

            return { owner, group, other, special };
        }

        function updateFromCheckboxes() {
            const { owner, group, other, special } = getPermissionsFromCheckboxes();
            updateDisplay(owner, group, other, special);
        }

        function updateDisplay(owner, group, other, special = 0) {
            const octal = special > 0
                ? `${special}${owner}${group}${other}`
                : `${owner}${group}${other}`;

            const symbolic = octalToSymbolic(owner, group, other, special);

            document.getElementById('octalOutput').textContent = octal;
            document.getElementById('symbolicOutput').textContent = symbolic;
            document.getElementById('commandOutput').textContent = `chmod ${octal} filename`;

            hideError();
        }

        function applyPreset(octal) {
            setCheckboxesFromOctal(octal);
            updateFromCheckboxes();
        }

        function convertInput() {
            const input = document.getElementById('convertInput').value.trim();

            if (!input) {
                showError('Please enter a value to convert');
                return;
            }

            // Check if it's octal
            if (/^[0-7]{3,4}$/.test(input)) {
                const cleaned = input.replace(/^0+/, '') || '0';
                if (!/^[0-7]+$/.test(cleaned)) {
                    showError('Invalid octal value. Use digits 0-7 only.');
                    return;
                }
                setCheckboxesFromOctal(input);
                updateFromCheckboxes();
                return;
            }

            // Check if it's symbolic
            const result = symbolicToOctal(input);
            if (result) {
                setCheckboxesFromOctal(
                    result.special > 0
                        ? `${result.special}${result.owner}${result.group}${result.other}`
                        : `${result.owner}${result.group}${result.other}`
                );
                updateFromCheckboxes();
                return;
            }

            showError('Invalid format. Enter octal (e.g., 755) or symbolic (e.g., -rwxr-xr-x)');
        }

        function calculateUmask() {
            const input = document.getElementById('umaskInput').value.trim();

            if (!/^[0-7]{3,4}$/.test(input)) {
                document.getElementById('filePerms').textContent = '---';
                document.getElementById('dirPerms').textContent = '---';
                document.getElementById('fileSymbolic').textContent = '';
                document.getElementById('dirSymbolic').textContent = '';
                return;
            }

            const umask = parseInt(input, 8);

            // Default file creation mode is 666, directory is 777
            const fileMode = 0o666 & ~umask;
            const dirMode = 0o777 & ~umask;

            const fileOctal = fileMode.toString(8).padStart(3, '0');
            const dirOctal = dirMode.toString(8).padStart(3, '0');

            const fileOwner = parseInt(fileOctal[0]);
            const fileGroup = parseInt(fileOctal[1]);
            const fileOther = parseInt(fileOctal[2]);

            const dirOwner = parseInt(dirOctal[0]);
            const dirGroup = parseInt(dirOctal[1]);
            const dirOther = parseInt(dirOctal[2]);

            document.getElementById('filePerms').textContent = fileOctal;
            document.getElementById('fileSymbolic').textContent = octalToSymbolic(fileOwner, fileGroup, fileOther);

            document.getElementById('dirPerms').textContent = dirOctal;
            document.getElementById('dirSymbolic').textContent = octalToSymbolic(dirOwner, dirGroup, dirOther, 0, true);
        }

        function copyValue(elementId, button) {
            const value = document.getElementById(elementId).textContent;
            navigator.clipboard.writeText(value).then(() => {
                button.textContent = 'Copied!';
                button.classList.add('copied');
                setTimeout(() => {
                    button.textContent = 'Copy';
                    button.classList.remove('copied');
                }, 1500);
            });
        }

        function showError(message) {
            const errorDiv = document.getElementById('error');
            errorDiv.textContent = message;
            errorDiv.classList.add('show');
        }

        function hideError() {
            document.getElementById('error').classList.remove('show');
        }

        // Initialize
        document.getElementById('convertInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                convertInput();
            }
        });

        updateFromCheckboxes();
        calculateUmask();
    </script>
    <script>
        document.querySelector('.skip-link').addEventListener('click', function(e) {
            e.preventDefault();
            const target = document.getElementById('main-content');
            if (target) {
                target.setAttribute('tabindex', '-1');
                target.focus();
                target.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        });
    </script>
</body>
</html>
