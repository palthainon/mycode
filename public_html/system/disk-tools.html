<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- SEO Meta Tags -->
    <meta name="description" content="Calculate RAID capacity, usable storage, and parity overhead. Supports RAID 0, 1, 5, 6, 10, and JBOD configurations. Storage planning made easy.">
    <meta name="keywords" content="RAID calculator, storage calculator, disk capacity calculator, RAID 5 calculator, RAID 6 calculator, usable capacity">
    <meta name="author" content="OldWeb LLC">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://oldweb.tech/system/disk-tools.html">

    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="DISK Tools - RAID & Storage Calculator - OldWeb.tech">
    <meta property="og:description" content="Calculate RAID capacity, usable storage, and parity overhead. Supports RAID 0, 1, 5, 6, 10, and JBOD configurations. Storage planning made easy.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://oldweb.tech/system/disk-tools.html">
    <meta property="og:site_name" content="OldWeb.tech">
    <meta property="og:image" content="https://oldweb.tech/logo/og-image.png">

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="DISK Tools - RAID & Storage Calculator - OldWeb.tech">
    <meta name="twitter:description" content="Calculate RAID capacity, usable storage, and parity overhead. Supports RAID 0, 1, 5, 6, 10, and JBOD configurations. Storage planning made easy.">
    <meta name="twitter:image" content="https://oldweb.tech/logo/og-image.png">

    <!-- Additional Meta Tags -->
    <meta name="theme-color" content="#1a1a2e">

    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="../logo/favicon-32x32.png">

    <title>DISK Tools - RAID & Storage Calculator - OldWeb.tech</title>
    <link rel="stylesheet" href="../a11y.css">
    <script src="../a11y-utils.js"></script>
    <script src="../storage-utils.js"></script>
    <script src="../navigationv2.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            padding: 40px 20px;
            color: #fff;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5rem;
            color: #4fc3f7;
            text-shadow: 0 0 20px rgba(79, 195, 247, 0.3);
        }

        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }

        @media (max-width: 768px) {
            .tools-grid {
                grid-template-columns: 1fr;
            }
        }

        .calculator {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .calculator h2 {
            color: #4fc3f7;
            margin-bottom: 20px;
            font-size: 1.5rem;
            text-align: center;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-field {
            margin-bottom: 15px;
        }

        .input-field label {
            display: block;
            margin-bottom: 8px;
            color: #90caf9;
            font-weight: 500;
        }

        .input-field input, .input-field select {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            background: #0f1419;
            color: #fff;
            font-size: 1rem;
            transition: border-color 0.3s, box-shadow 0.3s;
        }

        .input-field select option {
            background: #0f1419;
            color: #fff;
        }

        .input-field input:focus, .input-field select:focus {
            outline: none;
            border-color: #4fc3f7;
            box-shadow: 0 0 15px rgba(79, 195, 247, 0.2);
        }

        .input-field input::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }

        .input-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .btn {
            background: linear-gradient(135deg, #4fc3f7 0%, #2196f3 100%);
            color: #fff;
            border: none;
            padding: 14px 40px;
            font-size: 1.1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            font-weight: 600;
            width: 100%;
            margin-top: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(79, 195, 247, 0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        .results {
            display: none;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: 20px;
        }

        .results.show {
            display: block;
            animation: fadeIn 0.4s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .results h3 {
            color: #4fc3f7;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .result-item {
            background: rgba(0, 0, 0, 0.2);
            padding: 15px 20px;
            border-radius: 8px;
            border-left: 4px solid #4fc3f7;
            margin-bottom: 10px;
        }

        .result-item .label {
            color: #90caf9;
            font-size: 0.85rem;
            margin-bottom: 5px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .result-item .value {
            font-size: 1.2rem;
            font-family: 'Consolas', 'Monaco', monospace;
            color: #fff;
        }

        .result-item .subtext {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.85rem;
            margin-top: 5px;
        }

        .raid-info {
            background: rgba(79, 195, 247, 0.1);
            border: 1px solid rgba(79, 195, 247, 0.3);
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
        }

        .raid-info .info-title {
            color: #4fc3f7;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .raid-info ul {
            margin-left: 20px;
            color: #90caf9;
            font-size: 0.9rem;
        }

        .raid-info li {
            margin-bottom: 5px;
        }

        .conversion-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        .conversion-table th,
        .conversion-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .conversion-table th {
            color: #4fc3f7;
            font-weight: 600;
        }

        .conversion-table td {
            color: #fff;
            font-family: 'Consolas', 'Monaco', monospace;
        }

        .alert {
            background: rgba(255, 152, 0, 0.2);
            border: 1px solid #ff9800;
            color: #ffb74d;
            padding: 10px 15px;
            border-radius: 8px;
            margin-top: 10px;
            font-size: 0.9rem;
        }

        .ascii-logo {
            position: absolute;
            top: 20px;
            right: 40px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.65rem;
            line-height: 1.1;
            color: #4fc3f7;
            text-shadow: 0 0 10px rgba(79, 195, 247, 0.3);
            opacity: 0.8;
            white-space: pre;
        }

        @media (max-width: 768px) {
            .ascii-logo {
                position: static;
                text-align: center;
                margin-bottom: 20px;
                font-size: 0.5rem;
            }

            .input-row {
                grid-template-columns: 1fr;
            }
        }

        footer {
            text-align: center;
            margin-top: 30px;
            color: rgba(255, 255, 255, 0.4);
            font-size: 0.85rem;
        }

        .btn.secondary {
            background: transparent;
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: #90caf9;
            margin-top: 10px;
        }
        .btn.secondary:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.5);
            box-shadow: none;
            transform: none;
        }

        .help-text {
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.85rem;
            margin-top: 5px;
        }
    </style>

    <!-- Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "DISK Tools - RAID & Storage Calculator",
      "description": "Calculate RAID capacity, usable storage, and parity overhead. Supports RAID 0, 1, 5, 6, 10, and JBOD configurations. Storage planning made easy.",
      "url": "https://oldweb.tech/disk-tools.html",
      "applicationCategory": "UtilitiesApplication",
      "operatingSystem": "Web Browser",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "creator": {
        "@type": "Organization",
        "name": "OldWeb.tech"
      }
    }
    </script>
</head>
<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>
    <div class="ascii-logo" aria-hidden="true">  ___  _    _  __        __   _
 / _ \| | _| | \ \      / /__| |__
| | | | |/ _` | \ \ /\ / / _ \ '_ \
| |_| | | (_| |  \ V  V /  __/ |_) |
 \___/|_|\__,_|   \_/\_/ \___|_.__/
</div>
    <main id="main-content" class="container">
        <h1>DISK Tools</h1>

        <div class="tools-grid">
            <!-- RAID Calculator -->
            <div class="calculator">
                <h2>RAID Calculator</h2>
                <form aria-label="RAID capacity calculator form">
                <div class="input-group">
                    <div class="input-field">
                        <label for="raidLevel">RAID Level</label>
                        <select id="raidLevel" onchange="updateRaidInfo()" aria-describedby="raid-help">
                        <span id="raid-help" class="sr-only">Select RAID level to calculate capacity and performance characteristics</span>
                            <option value="0">RAID 0 - Striping (No Redundancy)</option>
                            <option value="1">RAID 1 - Mirroring</option>
                            <option value="5" selected>RAID 5 - Distributed Parity</option>
                            <option value="6">RAID 6 - Double Parity</option>
                            <option value="10">RAID 10 - Mirrored Stripes</option>
                        </select>
                    </div>
                    <div class="input-row">
                        <div class="input-field">
                            <label for="numDisks">Number of Disks</label>
                            <input type="number" id="numDisks" value="4" min="2" placeholder="4" aria-required="true" aria-describedby="num-disks-help">
                            <span id="num-disks-help" class="sr-only">Enter the number of physical disks in the RAID array</span>
                        </div>
                        <div class="input-field">
                            <label for="diskSize">Disk Size (TB)</label>
                            <input type="number" id="diskSize" value="2" min="0.001" step="0.001" placeholder="2" aria-required="true" aria-describedby="disk-size-help">
                            <span id="disk-size-help" class="sr-only">Enter the capacity of each disk in terabytes</span>
                        </div>
                    </div>
                    <div class="input-row">
                        <div class="input-field">
                            <label for="rebuildSpeed">Rebuild Speed (MB/s)</label>
                            <input type="number" id="rebuildSpeed" value="100" min="1" placeholder="100" aria-describedby="rebuild-help">
                            <div class="help-text" id="rebuild-help">Typical: 50-150 MB/s</div>
                        </div>
                        <div class="input-field">
                            <label for="stripeSize">Stripe Size (KB)</label>
                            <input type="number" id="stripeSize" value="64" min="4" placeholder="64" aria-describedby="stripe-help">
                            <div class="help-text" id="stripe-help">Common: 64, 128, 256</div>
                        </div>
                    </div>
                </div>
                <button type="button" class="btn" onclick="calculateRAID()" aria-label="Calculate RAID array capacity, rebuild time, and efficiency">Calculate RAID</button>
                </form>

                <div class="results" id="raidResults" role="region" aria-live="polite" aria-label="RAID configuration results">
                    <h3>RAID Configuration Results</h3>
                    <div class="result-item">
                        <div class="label">Usable Capacity</div>
                        <div class="value" id="usableCapacity">-</div>
                        <div class="subtext" id="rawCapacity">-</div>
                    </div>
                    <div class="result-item">
                        <div class="label">Disk Failure Tolerance</div>
                        <div class="value" id="failureTolerance">-</div>
                    </div>
                    <div class="result-item">
                        <div class="label">Estimated Rebuild Time</div>
                        <div class="value" id="rebuildTime">-</div>
                        <div class="subtext" id="rebuildDetails">-</div>
                    </div>
                    <div class="result-item">
                        <div class="label">Storage Efficiency</div>
                        <div class="value" id="efficiency">-</div>
                    </div>
                </div>

                <div class="raid-info" id="raidInfo">
                    <div class="info-title">RAID 5 - Distributed Parity</div>
                    <ul>
                        <li>Minimum disks: 3</li>
                        <li>Can survive 1 disk failure</li>
                        <li>Good read performance</li>
                        <li>Write performance penalty due to parity</li>
                        <li>Capacity: (N-1) × disk size</li>
                    </ul>
                </div>
            </div>

            <!-- Disk Space Calculator -->
            <div class="calculator">
                <h2>Disk Space Calculator</h2>
                <form aria-label="Disk space unit converter form">
                <div class="input-group">
                    <div class="input-field">
                        <label for="diskValue">Value</label>
                        <input type="number" id="diskValue" value="1000" min="0" step="0.001" placeholder="1000" aria-required="true" aria-describedby="value-help">
                        <span id="value-help" class="sr-only">Enter numeric value to convert between storage units</span>
                    </div>
                    <div class="input-field">
                        <label for="diskUnit">From Unit</label>
                        <select id="diskUnit" aria-describedby="unit-help">
                        <span id="unit-help" class="sr-only">Select source unit for conversion</span>
                            <option value="B">Bytes (B)</option>
                            <option value="KB">Kilobytes (KB - 1000)</option>
                            <option value="MB">Megabytes (MB - 1000)</option>
                            <option value="GB" selected>Gigabytes (GB - 1000)</option>
                            <option value="TB">Terabytes (TB - 1000)</option>
                            <option value="PB">Petabytes (PB - 1000)</option>
                            <option value="KiB">Kibibytes (KiB - 1024)</option>
                            <option value="MiB">Mebibytes (MiB - 1024)</option>
                            <option value="GiB">Gibibytes (GiB - 1024)</option>
                            <option value="TiB">Tebibytes (TiB - 1024)</option>
                            <option value="PiB">Pebibytes (PiB - 1024)</option>
                        </select>
                    </div>
                </div>
                <button type="button" class="btn" onclick="calculateDiskSpace()" aria-label="Convert storage value to all common units">Convert Units</button>
                </form>

                <div class="results" id="diskResults" role="region" aria-live="polite" aria-label="Storage unit conversion results">
                    <h3>Unit Conversions</h3>
                    <table class="conversion-table">
                        <thead>
                            <tr>
                                <th>Unit</th>
                                <th>Value</th>
                            </tr>
                        </thead>
                        <tbody id="conversionTable">
                        </tbody>
                    </table>
                </div>

                <!-- Percentage Calculator -->
                <div style="margin-top: 30px;">
                    <h2 style="color: #4fc3f7; font-size: 1.3rem; margin-bottom: 15px;">Percentage & Space Calculator</h2>
                    <form aria-label="Storage percentage calculator form">
                    <div class="input-group">
                        <div class="input-row">
                            <div class="input-field">
                                <label for="totalSpace">Total Space (GB)</label>
                                <input type="number" id="totalSpace" value="1000" min="0" step="0.001" aria-required="true" aria-describedby="total-help">
                                <span id="total-help" class="sr-only">Enter total storage capacity in gigabytes</span>
                            </div>
                            <div class="input-field">
                                <label for="usedSpace">Used Space (GB)</label>
                                <input type="number" id="usedSpace" value="650" min="0" step="0.001" aria-required="true" aria-describedby="used-help">
                                <span id="used-help" class="sr-only">Enter used storage space in gigabytes</span>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn" onclick="calculatePercentage()" aria-label="Calculate storage usage percentage and free space">Calculate</button>
                    </form>

                    <div class="results" id="percentageResults" role="region" aria-live="polite" aria-label="Storage percentage results">
                        <h3>Space Analysis</h3>
                        <div class="result-item">
                            <div class="label">Used Percentage</div>
                            <div class="value" id="usedPercent">-</div>
                        </div>
                        <div class="result-item">
                            <div class="label">Free Space</div>
                            <div class="value" id="freeSpace">-</div>
                            <div class="subtext" id="freePercent">-</div>
                        </div>
                    </div>
                </div>

                <!-- IOPS Calculator -->
                <div style="margin-top: 30px;">
                    <h2 style="color: #4fc3f7; font-size: 1.3rem; margin-bottom: 15px;">IOPS Calculator</h2>
                    <form aria-label="IOPS performance calculator form">
                    <div class="input-group">
                        <div class="input-field">
                            <label for="diskType">Disk Type</label>
                            <select id="diskType" onchange="updateIOPSDefaults()" aria-describedby="disk-type-help">
                            <span id="disk-type-help" class="sr-only">Select disk type to set typical IOPS values</span>
                                <option value="ssd">SSD (Solid State Drive)</option>
                                <option value="sas15k">SAS 15K RPM</option>
                                <option value="sas10k">SAS 10K RPM</option>
                                <option value="sata7k" selected>SATA 7200 RPM</option>
                                <option value="sata5k">SATA 5400 RPM</option>
                                <option value="nvme">NVMe SSD</option>
                            </select>
                        </div>
                        <div class="input-row">
                            <div class="input-field">
                                <label for="iopsPerDisk">IOPS per Disk</label>
                                <input type="number" id="iopsPerDisk" value="80" min="1" aria-required="true" aria-describedby="iops-disk-help">
                                <span id="iops-disk-help" class="sr-only">Enter input/output operations per second for each disk</span>
                            </div>
                            <div class="input-field">
                                <label for="numDrivesIOPS">Number of Drives</label>
                                <input type="number" id="numDrivesIOPS" value="4" min="1" aria-required="true" aria-describedby="drives-help">
                                <span id="drives-help" class="sr-only">Enter number of drives in the array</span>
                            </div>
                        </div>
                        <div class="input-row">
                            <div class="input-field">
                                <label for="readPercent">Read % (0-100)</label>
                                <input type="number" id="readPercent" value="70" min="0" max="100" aria-required="true" aria-describedby="read-help">
                                <span id="read-help" class="sr-only">Enter percentage of operations that are reads, 0 to 100</span>
                            </div>
                            <div class="input-field">
                                <label for="raidLevelIOPS">RAID Level</label>
                                <select id="raidLevelIOPS" aria-describedby="raid-iops-help">
                                <span id="raid-iops-help" class="sr-only">Select RAID level for IOPS calculation</span>
                                    <option value="0">RAID 0</option>
                                    <option value="1">RAID 1</option>
                                    <option value="5" selected>RAID 5</option>
                                    <option value="6">RAID 6</option>
                                    <option value="10">RAID 10</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn" onclick="calculateIOPS()" aria-label="Calculate total IOPS performance for the disk array">Calculate IOPS</button>
                    </form>

                    <div class="results" id="iopsResults" role="region" aria-live="polite" aria-label="IOPS performance results">
                        <h3>IOPS Performance</h3>
                        <div class="result-item">
                            <div class="label">Total Read IOPS</div>
                            <div class="value" id="readIOPS">-</div>
                        </div>
                        <div class="result-item">
                            <div class="label">Total Write IOPS</div>
                            <div class="value" id="writeIOPS">-</div>
                        </div>
                        <div class="result-item">
                            <div class="label">Effective Total IOPS</div>
                            <div class="value" id="totalIOPS">-</div>
                            <div class="subtext" id="iopsNote">-</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <button type="button" class="btn secondary" onclick="clearAllSavedData()" aria-label="Clear all saved form data from this page" style="max-width: 300px; margin: 20px auto;">Clear Saved Data</button>

        <footer role="contentinfo">
            DISK Tools - RAID & Storage Calculator | Works offline, no installation required
        </footer>
    </main>

    <script>
        // RAID Calculator Functions
        const raidConfigs = {
            '0': {
                name: 'RAID 0 - Striping',
                minDisks: 2,
                failureTolerance: 0,
                usableCapacity: (n, size) => n * size,
                info: [
                    'Minimum disks: 2',
                    'No disk failure tolerance',
                    'Excellent read and write performance',
                    'Data is striped across all disks',
                    'Capacity: N × disk size'
                ]
            },
            '1': {
                name: 'RAID 1 - Mirroring',
                minDisks: 2,
                failureTolerance: (n) => Math.floor(n / 2),
                usableCapacity: (n, size) => size,
                info: [
                    'Minimum disks: 2',
                    'Can survive N/2 disk failures',
                    'Excellent read performance',
                    'Write performance same as single disk',
                    'Capacity: 1 × disk size'
                ]
            },
            '5': {
                name: 'RAID 5 - Distributed Parity',
                minDisks: 3,
                failureTolerance: 1,
                usableCapacity: (n, size) => (n - 1) * size,
                info: [
                    'Minimum disks: 3',
                    'Can survive 1 disk failure',
                    'Good read performance',
                    'Write performance penalty due to parity',
                    'Capacity: (N-1) × disk size'
                ]
            },
            '6': {
                name: 'RAID 6 - Double Parity',
                minDisks: 4,
                failureTolerance: 2,
                usableCapacity: (n, size) => (n - 2) * size,
                info: [
                    'Minimum disks: 4',
                    'Can survive 2 disk failures',
                    'Good read performance',
                    'Higher write penalty than RAID 5',
                    'Capacity: (N-2) × disk size'
                ]
            },
            '10': {
                name: 'RAID 10 - Mirrored Stripes',
                minDisks: 4,
                failureTolerance: (n) => Math.floor(n / 2),
                usableCapacity: (n, size) => (n / 2) * size,
                info: [
                    'Minimum disks: 4 (must be even)',
                    'Can survive multiple disk failures',
                    'Excellent read and write performance',
                    'Combines RAID 0 and RAID 1',
                    'Capacity: (N/2) × disk size'
                ]
            }
        };

        function updateRaidInfo() {
            const level = document.getElementById('raidLevel').value;
            const config = raidConfigs[level];
            const infoDiv = document.getElementById('raidInfo');

            let html = `<div class="info-title">${config.name}</div><ul>`;
            config.info.forEach(item => {
                html += `<li>${item}</li>`;
            });
            html += '</ul>';

            infoDiv.innerHTML = html;
        }

        function calculateRAID() {
            const level = document.getElementById('raidLevel').value;
            const numDisks = parseInt(document.getElementById('numDisks').value);
            const diskSize = parseFloat(document.getElementById('diskSize').value);
            const rebuildSpeed = parseFloat(document.getElementById('rebuildSpeed').value);
            const config = raidConfigs[level];

            // Validation
            if (numDisks < config.minDisks) {
                alert(`RAID ${level} requires at least ${config.minDisks} disks`);
                return;
            }

            if (level === '10' && numDisks % 2 !== 0) {
                alert('RAID 10 requires an even number of disks');
                return;
            }

            // Calculate usable capacity
            const rawCapacity = numDisks * diskSize;
            const usableCapacity = config.usableCapacity(numDisks, diskSize);
            const efficiency = (usableCapacity / rawCapacity) * 100;

            // Calculate failure tolerance
            const failureTolerance = typeof config.failureTolerance === 'function'
                ? config.failureTolerance(numDisks)
                : config.failureTolerance;

            // Calculate rebuild time (in hours)
            const rebuildSizeGB = diskSize * 1000; // Convert TB to GB
            const rebuildSizeMB = rebuildSizeGB * 1000; // Convert GB to MB
            const rebuildTimeSeconds = rebuildSizeMB / rebuildSpeed;
            const rebuildTimeHours = rebuildTimeSeconds / 3600;

            // Display results
            document.getElementById('usableCapacity').textContent = `${usableCapacity.toFixed(2)} TB`;
            document.getElementById('rawCapacity').textContent = `Raw capacity: ${rawCapacity.toFixed(2)} TB`;
            document.getElementById('failureTolerance').textContent =
                failureTolerance === 0 ? 'None (data loss on any failure)' :
                `${failureTolerance} disk${failureTolerance > 1 ? 's' : ''}`;

            // Format rebuild time
            let rebuildTimeText = '';
            if (rebuildTimeHours < 1) {
                rebuildTimeText = `${(rebuildTimeHours * 60).toFixed(0)} minutes`;
            } else if (rebuildTimeHours < 24) {
                rebuildTimeText = `${rebuildTimeHours.toFixed(1)} hours`;
            } else {
                const days = Math.floor(rebuildTimeHours / 24);
                const hours = Math.floor(rebuildTimeHours % 24);
                rebuildTimeText = `${days} day${days > 1 ? 's' : ''} ${hours} hour${hours !== 1 ? 's' : ''}`;
            }

            document.getElementById('rebuildTime').textContent = rebuildTimeText;
            document.getElementById('rebuildDetails').textContent =
                `Rebuilding ${diskSize} TB at ${rebuildSpeed} MB/s`;
            document.getElementById('efficiency').textContent = `${efficiency.toFixed(1)}%`;

            // Add alert for RAID 0
            const resultsDiv = document.getElementById('raidResults');
            const existingAlert = resultsDiv.querySelector('.alert');
            if (existingAlert) existingAlert.remove();

            if (level === '0') {
                const alert = document.createElement('div');
                alert.className = 'alert';
                alert.innerHTML = '<strong>⚠ Warning:</strong> RAID 0 provides no redundancy. Any single disk failure will result in complete data loss!';
                resultsDiv.appendChild(alert);
            }

            document.getElementById('raidResults').classList.add('show');
        }

        // Disk Space Calculator Functions
        const units = {
            'B': 1,
            'KB': 1000,
            'MB': 1000000,
            'GB': 1000000000,
            'TB': 1000000000000,
            'PB': 1000000000000000,
            'KiB': 1024,
            'MiB': 1048576,
            'GiB': 1073741824,
            'TiB': 1099511627776,
            'PiB': 1125899906842624
        };

        function formatNumber(num) {
            if (num >= 1e15) return num.toExponential(3);
            if (num < 0.001 && num > 0) return num.toExponential(3);
            return num.toLocaleString('en-US', { maximumFractionDigits: 3 });
        }

        function calculateDiskSpace() {
            const value = parseFloat(document.getElementById('diskValue').value);
            const unit = document.getElementById('diskUnit').value;

            if (isNaN(value) || value < 0) {
                alert('Please enter a valid positive number');
                return;
            }

            // Convert to bytes first
            const bytes = value * units[unit];

            // Convert to all units
            const tableBody = document.getElementById('conversionTable');
            tableBody.innerHTML = '';

            // Decimal units (base 1000)
            const decimalUnits = ['B', 'KB', 'MB', 'GB', 'TB', 'PB'];
            decimalUnits.forEach(u => {
                const converted = bytes / units[u];
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${u}</td>
                    <td>${formatNumber(converted)}</td>
                `;
                tableBody.appendChild(row);
            });

            // Binary units (base 1024)
            const binaryUnits = ['KiB', 'MiB', 'GiB', 'TiB', 'PiB'];
            binaryUnits.forEach(u => {
                const converted = bytes / units[u];
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${u}</td>
                    <td>${formatNumber(converted)}</td>
                `;
                tableBody.appendChild(row);
            });

            document.getElementById('diskResults').classList.add('show');
            A11yUtils.announce(`Converted ${value} ${unit} to all storage units`, 'polite');
        }

        // Percentage Calculator
        function calculatePercentage() {
            const total = parseFloat(document.getElementById('totalSpace').value);
            const used = parseFloat(document.getElementById('usedSpace').value);

            if (isNaN(total) || isNaN(used) || total <= 0) {
                alert('Please enter valid values');
                return;
            }

            if (used > total) {
                alert('Used space cannot exceed total space');
                return;
            }

            const usedPercent = (used / total) * 100;
            const free = total - used;
            const freePercent = (free / total) * 100;

            document.getElementById('usedPercent').textContent = `${usedPercent.toFixed(2)}%`;
            document.getElementById('freeSpace').textContent = `${free.toFixed(2)} GB`;
            document.getElementById('freePercent').textContent = `${freePercent.toFixed(2)}% free`;

            document.getElementById('percentageResults').classList.add('show');
            A11yUtils.announce(`Storage analysis complete. Using ${usedPercent.toFixed(2)}% of total space. ${freeGb.toFixed(2)} GB free.`, 'polite');
        }

        // IOPS Calculator
        const diskIOPS = {
            'ssd': 3000,
            'sas15k': 180,
            'sas10k': 130,
            'sata7k': 80,
            'sata5k': 50,
            'nvme': 50000
        };

        function updateIOPSDefaults() {
            const diskType = document.getElementById('diskType').value;
            document.getElementById('iopsPerDisk').value = diskIOPS[diskType];
        }

        function calculateIOPS() {
            const iopsPerDisk = parseFloat(document.getElementById('iopsPerDisk').value);
            const numDrives = parseInt(document.getElementById('numDrivesIOPS').value);
            const readPercent = parseFloat(document.getElementById('readPercent').value) / 100;
            const raidLevel = document.getElementById('raidLevelIOPS').value;

            if (isNaN(iopsPerDisk) || isNaN(numDrives) || numDrives < 1) {
                alert('Please enter valid values');
                return;
            }

            const writePercent = 1 - readPercent;

            // RAID penalties
            let readIOPS, writeIOPS;

            switch(raidLevel) {
                case '0':
                    readIOPS = iopsPerDisk * numDrives;
                    writeIOPS = iopsPerDisk * numDrives;
                    break;
                case '1':
                    readIOPS = iopsPerDisk * numDrives;
                    writeIOPS = (iopsPerDisk * numDrives) / 2; // Write penalty
                    break;
                case '5':
                    readIOPS = iopsPerDisk * numDrives;
                    writeIOPS = (iopsPerDisk * (numDrives - 1)) / 4; // 4x write penalty
                    break;
                case '6':
                    readIOPS = iopsPerDisk * numDrives;
                    writeIOPS = (iopsPerDisk * (numDrives - 2)) / 6; // 6x write penalty
                    break;
                case '10':
                    readIOPS = iopsPerDisk * numDrives;
                    writeIOPS = (iopsPerDisk * numDrives) / 2;
                    break;
            }

            const effectiveTotal = (readIOPS * readPercent) + (writeIOPS * writePercent);

            document.getElementById('readIOPS').textContent = Math.round(readIOPS).toLocaleString();
            document.getElementById('writeIOPS').textContent = Math.round(writeIOPS).toLocaleString();
            document.getElementById('totalIOPS').textContent = Math.round(effectiveTotal).toLocaleString();
            document.getElementById('iopsNote').textContent =
                `Based on ${(readPercent * 100).toFixed(0)}% read / ${(writePercent * 100).toFixed(0)}% write workload`;

            document.getElementById('iopsResults').classList.add('show');
            A11yUtils.announce(`IOPS calculation complete. Total effective IOPS: ${Math.round(effectiveTotal).toLocaleString()}`, 'polite');
        }

        // localStorage persistence
        const diskToolsFields = ['raidLevel', 'numDisks', 'diskSize', 'rebuildSpeed', 'stripeSize', 'diskValue', 'diskUnit', 'totalSpace', 'usedSpace', 'diskType', 'iopsPerDisk', 'numDrivesIOPS', 'readPercent', 'raidLevelIOPS'];

        function clearAllSavedData() {
            StorageUtils.remove('disk-tools');
            // Reset to defaults
            document.getElementById('raidLevel').value = '5';
            document.getElementById('numDisks').value = '4';
            document.getElementById('diskSize').value = '2';
            document.getElementById('rebuildSpeed').value = '100';
            document.getElementById('stripeSize').value = '64';
            document.getElementById('diskValue').value = '1000';
            document.getElementById('diskUnit').value = 'GB';
            document.getElementById('totalSpace').value = '1000';
            document.getElementById('usedSpace').value = '650';
            document.getElementById('diskType').value = 'sata7k';
            document.getElementById('iopsPerDisk').value = '80';
            document.getElementById('numDrivesIOPS').value = '4';
            document.getElementById('readPercent').value = '70';
            document.getElementById('raidLevelIOPS').value = '5';
            // Update display
            updateRaidInfo();
            A11yUtils.announce('All saved data has been cleared', 'polite');
        }

        document.addEventListener('DOMContentLoaded', function() {
            StorageUtils.loadFormInputs('disk-tools', diskToolsFields, function() {
                // After loading, update display from loaded values
                updateRaidInfo();
                updateIOPSDefaults();
            });
            StorageUtils.autoSaveFormInputs('disk-tools', diskToolsFields);
        });

        // Initialize RAID info on page load
        updateRaidInfo();
    </script>
    <script>
        document.querySelector('.skip-link').addEventListener('click', function(e) {
            e.preventDefault();
            const target = document.getElementById('main-content');
            if (target) {
                target.setAttribute('tabindex', '-1');
                target.focus();
                target.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        });
    </script>
</body>
</html>
