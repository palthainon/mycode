<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- SEO Meta Tags -->
    <meta name="description" content="String manipulation toolkit with case conversion (camelCase, snake_case, kebab-case), line operations (trim, sort, reverse), duplicate removal, and escape/unescape for HTML, JSON, SQL, and more.">
    <meta name="keywords" content="string manipulation, case converter, camelCase, snake_case, kebab-case, text tools, line sorter, duplicate remover, escape strings, unescape strings">
    <meta name="author" content="OldWeb LLC">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://oldweb.tech/data/string-tools.html">

    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="String Manipulation Toolkit - OldWeb.tech">
    <meta property="og:description" content="String manipulation toolkit with case conversion, line operations, duplicate removal, and escape/unescape utilities.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://oldweb.tech/data/string-tools.html">
    <meta property="og:site_name" content="OldWeb.tech">

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="String Manipulation Toolkit - OldWeb.tech">
    <meta name="twitter:description" content="String manipulation toolkit with case conversion, line operations, duplicate removal, and escape/unescape utilities.">

    <!-- Additional Meta Tags -->
    <meta name="theme-color" content="#1a1a2e">

    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="../logo/favicon-32x32.png">

    <title>String Manipulation Toolkit - OldWeb.tech</title>
    <link rel="stylesheet" href="../a11y.css">
    <script src="../a11y-utils.js"></script>
    <script src="../navigationv2.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            padding: 40px 20px;
            color: #fff;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        .ascii-logo {
            position: absolute;
            top: 20px;
            right: 40px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.65rem;
            line-height: 1.1;
            color: #4fc3f7;
            text-shadow: 0 0 10px rgba(79, 195, 247, 0.3);
            opacity: 0.8;
            white-space: pre;
        }

        h1 {
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5rem;
            color: #4fc3f7;
            text-shadow: 0 0 20px rgba(79, 195, 247, 0.3);
        }

        .subtitle {
            text-align: center;
            color: #90caf9;
            font-size: 1rem;
            margin-bottom: 30px;
            opacity: 0.9;
        }

        .calculator {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 20px;
        }

        .tabs {
            display: flex;
            gap: 5px;
            margin-bottom: 25px;
            border-bottom: 2px solid rgba(79, 195, 247, 0.2);
            padding-bottom: 5px;
            flex-wrap: wrap;
        }

        .tab-btn {
            padding: 12px 24px;
            border: none;
            background: transparent;
            color: #90caf9;
            border-radius: 8px 8px 0 0;
            cursor: pointer;
            font-size: 0.95rem;
            font-weight: 600;
            transition: all 0.3s;
        }

        .tab-btn:hover {
            background: rgba(79, 195, 247, 0.1);
            color: #4fc3f7;
        }

        .tab-btn.active {
            background: rgba(79, 195, 247, 0.2);
            color: #4fc3f7;
            border-bottom: 3px solid #4fc3f7;
            margin-bottom: -7px;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .section-title {
            font-size: 0.9rem;
            color: #90caf9;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 12px;
        }

        .input-area {
            margin-bottom: 20px;
        }

        .input-area textarea {
            width: 100%;
            height: 150px;
            padding: 15px;
            border: 1px solid rgba(79, 195, 247, 0.3);
            border-radius: 8px;
            background: rgba(0, 0, 0, 0.3);
            color: #fff;
            font-family: 'Courier New', monospace;
            font-size: 0.95rem;
            resize: vertical;
        }

        .input-area textarea:focus {
            outline: none;
            border-color: #4fc3f7;
            box-shadow: 0 0 15px rgba(79, 195, 247, 0.3);
        }

        .input-area textarea::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }

        .button-row {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .action-btn {
            padding: 12px 24px;
            background: linear-gradient(135deg, #4fc3f7 0%, #2196f3 100%);
            border: none;
            border-radius: 8px;
            color: #1a1a2e;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.95rem;
            transition: all 0.3s;
        }

        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(79, 195, 247, 0.4);
        }

        .action-btn.secondary {
            background: linear-gradient(135deg, #66bb6a 0%, #4caf50 100%);
        }

        .action-btn.secondary:hover {
            box-shadow: 0 5px 20px rgba(102, 187, 106, 0.4);
        }

        .action-btn.tertiary {
            background: linear-gradient(135deg, #ffb74d 0%, #ff9800 100%);
        }

        .action-btn.tertiary:hover {
            box-shadow: 0 5px 20px rgba(255, 183, 77, 0.4);
        }

        .output-area {
            margin-bottom: 20px;
        }

        .output-box {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 20px;
            position: relative;
        }

        .output-box textarea {
            width: 100%;
            height: 150px;
            padding: 0;
            border: none;
            background: transparent;
            color: #4fc3f7;
            font-family: 'Courier New', monospace;
            font-size: 0.95rem;
            resize: vertical;
        }

        .output-box textarea:focus {
            outline: none;
        }

        .output-box .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 6px 14px;
            background: rgba(102, 187, 106, 0.2);
            border: 1px solid #66bb6a;
            border-radius: 6px;
            color: #66bb6a;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.2s;
        }

        .output-box .copy-btn:hover {
            background: rgba(102, 187, 106, 0.3);
        }

        .output-box .copy-btn.copied {
            background: #66bb6a;
            color: #1a1a2e;
        }

        .options-row {
            display: flex;
            gap: 20px;
            margin-bottom: 15px;
            flex-wrap: wrap;
            align-items: center;
        }

        .option-item {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #90caf9;
            font-size: 0.9rem;
        }

        .option-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: #4fc3f7;
        }

        .option-item input[type="number"],
        .option-item input[type="text"],
        .option-item select {
            padding: 12px 16px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            background: #0f1419;
            color: #fff;
            font-size: 1rem;
            width: auto;
            transition: border-color 0.3s, box-shadow 0.3s;
            cursor: pointer;
        }

        .option-item input[type="number"] {
            width: 80px;
        }

        .option-item input[type="text"] {
            width: 60px;
        }

        .option-item select {
            min-width: 120px;
        }

        .option-item select option {
            background: #0f1419;
            color: #fff;
        }

        .option-item input:focus,
        .option-item select:focus {
            outline: none;
            border-color: #4fc3f7;
            box-shadow: 0 0 15px rgba(79, 195, 247, 0.2);
        }

        /* Enhanced focus visibility for accessibility */
        .action-btn:focus,
        .copy-btn:focus,
        .tab-btn:focus {
            outline: 2px solid #4fc3f7;
            outline-offset: 2px;
        }

        .error {
            background: rgba(244, 67, 54, 0.1);
            border: 1px solid #f44336;
            border-left: 4px solid #f44336;
            color: #ff8a80;
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
        }

        .error.show {
            display: block;
        }

        .info-box {
            background: rgba(79, 195, 247, 0.1);
            border-left: 4px solid #4fc3f7;
            padding: 12px 16px;
            border-radius: 0 8px 8px 0;
            margin-bottom: 20px;
            font-size: 0.85rem;
            color: #90caf9;
        }

        .stats-box {
            background: rgba(102, 187, 106, 0.1);
            border-left: 4px solid #66bb6a;
            padding: 12px 16px;
            border-radius: 0 8px 8px 0;
            margin-bottom: 20px;
            font-size: 0.85rem;
            color: #a5d6a7;
        }

        .stats-box code {
            background: rgba(0, 0, 0, 0.3);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
        }

        .count-results {
            display: grid;
            gap: 8px;
            max-height: 300px;
            overflow-y: auto;
        }

        .count-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(0, 0, 0, 0.2);
            padding: 10px 15px;
            border-radius: 6px;
            border-left: 3px solid #4fc3f7;
        }

        .count-item .text {
            font-family: 'Courier New', monospace;
            color: #4fc3f7;
            word-break: break-all;
            flex: 1;
            margin-right: 15px;
        }

        .count-item .count {
            background: rgba(79, 195, 247, 0.2);
            padding: 4px 12px;
            border-radius: 20px;
            color: #4fc3f7;
            font-weight: 600;
            font-size: 0.85rem;
            flex-shrink: 0;
        }

        footer {
            text-align: center;
            margin-top: 30px;
            color: rgba(255, 255, 255, 0.4);
            font-size: 0.85rem;
        }

        @media (max-width: 768px) {
            .ascii-logo {
                position: static;
                text-align: center;
                margin-bottom: 20px;
                font-size: 0.5rem;
            }

            h1 {
                font-size: 1.8rem;
            }

            .tabs {
                flex-wrap: wrap;
            }

            .tab-btn {
                padding: 10px 16px;
                font-size: 0.85rem;
            }

            .button-row {
                flex-direction: column;
            }

            .action-btn {
                width: 100%;
            }

            .options-row {
                flex-direction: column;
                align-items: flex-start;
            }
        }
    </style>

    <!-- Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "String Manipulation Toolkit",
      "description": "String manipulation toolkit with case conversion, line operations, duplicate removal, and escape/unescape utilities.",
      "url": "https://oldweb.tech/data/string-tools.html",
      "applicationCategory": "UtilitiesApplication",
      "operatingSystem": "Web Browser",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "creator": {
        "@type": "Organization",
        "name": "OldWeb.tech"
      }
    }
    </script>
</head>
<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>
    <div class="ascii-logo" aria-hidden="true">  ___  _    _  __        __   _
 / _ \| | _| | \ \      / /__| |__
| | | | |/ _` | \ \ /\ / / _ \ '_ \
| |_| | | (_| |  \ V  V /  __/ |_) |
 \___/|_|\__,_|   \_/\_/ \___|_.__/
</div>
    <main id="main-content" class="container">
        <h1>String Manipulation Toolkit</h1>
        <p class="subtitle">Case conversion, line operations, and text utilities</p>

        <div class="calculator">
            <div class="tabs" role="tablist" aria-label="String manipulation tool tabs">
                <button type="button" class="tab-btn active" onclick="switchTab('case')" role="tab" aria-selected="true" aria-controls="case-tab" id="tab-case">Case Convert</button>
                <button type="button" class="tab-btn" onclick="switchTab('lines')" role="tab" aria-selected="false" aria-controls="lines-tab" id="tab-lines">Line Ops</button>
                <button type="button" class="tab-btn" onclick="switchTab('duplicates')" role="tab" aria-selected="false" aria-controls="duplicates-tab" id="tab-duplicates">Duplicates</button>
                <button type="button" class="tab-btn" onclick="switchTab('escape')" role="tab" aria-selected="false" aria-controls="escape-tab" id="tab-escape">Escape</button>
            </div>

            <!-- Case Conversion Tab -->
            <div id="case-tab" class="tab-content active" role="tabpanel" aria-labelledby="tab-case">
                <form aria-label="Case conversion form">
                    <div class="input-area">
                        <h3 class="section-title"><label for="caseInput">Input Text</label></h3>
                        <textarea id="caseInput" placeholder="Enter text to convert..." aria-label="Input text for case conversion" aria-required="true" aria-describedby="case-input-help"></textarea>
                        <span id="case-input-help" class="sr-only">Enter text to convert between uppercase, lowercase, title case, camelCase, snake_case, or kebab-case</span>
                    </div>

                    <div class="button-row">
                        <button type="button" class="action-btn" onclick="convertCase('upper')" aria-label="Convert to uppercase">UPPERCASE</button>
                        <button type="button" class="action-btn" onclick="convertCase('lower')" aria-label="Convert to lowercase">lowercase</button>
                        <button type="button" class="action-btn secondary" onclick="convertCase('title')" aria-label="Convert to title case">Title Case</button>
                    </div>
                    <div class="button-row">
                        <button type="button" class="action-btn tertiary" onclick="convertCase('camel')" aria-label="Convert to camelCase">camelCase</button>
                        <button type="button" class="action-btn tertiary" onclick="convertCase('pascal')" aria-label="Convert to PascalCase">PascalCase</button>
                        <button type="button" class="action-btn tertiary" onclick="convertCase('snake')" aria-label="Convert to snake_case">snake_case</button>
                        <button type="button" class="action-btn tertiary" onclick="convertCase('kebab')" aria-label="Convert to kebab-case">kebab-case</button>
                    </div>

                    <div class="error" id="caseError" role="alert" aria-live="assertive" aria-atomic="true"></div>

                    <div class="output-area" role="region" aria-live="polite" aria-label="Case conversion result">
                        <h3 class="section-title"><label for="caseOutput">Output</label></h3>
                        <div class="output-box">
                            <textarea id="caseOutput" readonly placeholder="Result will appear here..." aria-label="Case conversion output" aria-readonly="true"></textarea>
                            <button type="button" class="copy-btn" onclick="copyOutput('caseOutput', this)" aria-label="Copy output to clipboard">Copy</button>
                        </div>
                    </div>
                </form>

                <div class="info-box">
                    camelCase/PascalCase/snake_case/kebab-case conversions work best with space-separated or already-formatted text.
                </div>
            </div>

            <!-- Line Operations Tab -->
            <div id="lines-tab" class="tab-content" role="tabpanel" aria-labelledby="tab-lines">
                <form aria-label="Line operations form">
                    <div class="input-area">
                        <h3 class="section-title"><label for="linesInput">Input Text (one item per line)</label></h3>
                        <textarea id="linesInput" placeholder="Enter text with multiple lines..." aria-label="Input text for line operations" aria-required="true" aria-describedby="lines-input-help"></textarea>
                        <span id="lines-input-help" class="sr-only">Enter text with multiple lines to trim, pad, reverse, sort, or remove empty lines</span>
                    </div>

                    <div class="options-row" role="group" aria-label="Line operation options">
                        <label class="option-item">
                            <span>Pad character:</span>
                            <input type="text" id="padChar" value=" " maxlength="1" aria-label="Character to use for padding">
                        </label>
                        <label class="option-item">
                            <span>Pad length:</span>
                            <input type="number" id="padLength" value="20" min="1" max="1000" aria-label="Total length after padding">
                        </label>
                        <label class="option-item">
                            <select id="padSide" aria-label="Padding side">
                                <option value="left">Pad Left</option>
                                <option value="right">Pad Right</option>
                                <option value="both">Pad Both</option>
                            </select>
                        </label>
                    </div>

                    <div class="button-row">
                        <button type="button" class="action-btn" onclick="lineOp('trim')" aria-label="Trim whitespace from each line">Trim Lines</button>
                        <button type="button" class="action-btn" onclick="lineOp('pad')" aria-label="Pad each line to specified length">Pad Lines</button>
                        <button type="button" class="action-btn secondary" onclick="lineOp('reverse')" aria-label="Reverse order of lines">Reverse Lines</button>
                    </div>
                    <div class="button-row">
                        <button type="button" class="action-btn tertiary" onclick="lineOp('sort')" aria-label="Sort lines alphabetically">Sort A-Z</button>
                        <button type="button" class="action-btn tertiary" onclick="lineOp('sortDesc')" aria-label="Sort lines reverse alphabetically">Sort Z-A</button>
                        <button type="button" class="action-btn tertiary" onclick="lineOp('sortNum')" aria-label="Sort lines numerically">Sort Numeric</button>
                        <button type="button" class="action-btn tertiary" onclick="lineOp('shuffle')" aria-label="Randomly shuffle lines">Shuffle</button>
                    </div>
                    <div class="button-row">
                        <button type="button" class="action-btn" onclick="lineOp('removeEmpty')" aria-label="Remove empty lines">Remove Empty</button>
                        <button type="button" class="action-btn" onclick="lineOp('reverseChars')" aria-label="Reverse characters in each line">Reverse Chars</button>
                    </div>

                    <div class="error" id="linesError" role="alert" aria-live="assertive" aria-atomic="true"></div>

                    <div class="output-area" role="region" aria-live="polite" aria-label="Line operation result">
                        <h3 class="section-title"><label for="linesOutput">Output</label></h3>
                        <div class="output-box">
                            <textarea id="linesOutput" readonly placeholder="Result will appear here..." aria-label="Line operation output" aria-readonly="true"></textarea>
                            <button type="button" class="copy-btn" onclick="copyOutput('linesOutput', this)" aria-label="Copy output to clipboard">Copy</button>
                        </div>
                    </div>
                </form>

                <div id="linesStats" class="stats-box" style="display: none;" role="status" aria-live="polite"></div>
            </div>

            <!-- Duplicates Tab -->
            <div id="duplicates-tab" class="tab-content" role="tabpanel" aria-labelledby="tab-duplicates">
                <form aria-label="Duplicate handling form">
                    <div class="input-area">
                        <h3 class="section-title"><label for="dupInput">Input Text (one item per line)</label></h3>
                        <textarea id="dupInput" placeholder="Enter text with multiple lines to find/remove duplicates..." aria-label="Input text for duplicate operations" aria-required="true" aria-describedby="dup-input-help"></textarea>
                        <span id="dup-input-help" class="sr-only">Enter text with multiple lines to remove duplicates, show only duplicates, or count occurrences</span>
                    </div>

                    <div class="options-row" role="group" aria-label="Duplicate options">
                        <label class="option-item">
                            <input type="checkbox" id="dupCaseSensitive" checked aria-label="Case sensitive comparison">
                            Case sensitive
                        </label>
                        <label class="option-item">
                            <input type="checkbox" id="dupTrimLines" checked aria-label="Trim whitespace before comparing">
                            Trim before compare
                        </label>
                    </div>

                    <div class="button-row">
                        <button type="button" class="action-btn" onclick="dupOp('remove')" aria-label="Remove duplicate lines keeping first occurrence">Remove Duplicates</button>
                        <button type="button" class="action-btn secondary" onclick="dupOp('keepDups')" aria-label="Show only lines that appear more than once">Show Only Duplicates</button>
                        <button type="button" class="action-btn tertiary" onclick="dupOp('count')" aria-label="Count occurrences of each unique line">Count Occurrences</button>
                    </div>

                    <div class="error" id="dupError" role="alert" aria-live="assertive" aria-atomic="true"></div>

                    <div class="output-area" role="region" aria-live="polite" aria-label="Duplicate operation result">
                        <h3 class="section-title"><label for="dupOutput">Output</label></h3>
                        <div class="output-box" id="dupOutputBox">
                            <textarea id="dupOutput" readonly placeholder="Result will appear here..." aria-label="Duplicate operation output" aria-readonly="true"></textarea>
                            <button type="button" class="copy-btn" onclick="copyOutput('dupOutput', this)" aria-label="Copy output to clipboard">Copy</button>
                        </div>
                        <div id="countResults" class="count-results" style="display: none;" role="list" aria-label="Occurrence count results"></div>
                    </div>
                </form>

                <div id="dupStats" class="stats-box" style="display: none;" role="status" aria-live="polite"></div>
            </div>

            <!-- Escape/Unescape Tab -->
            <div id="escape-tab" class="tab-content" role="tabpanel" aria-labelledby="tab-escape">
                <form aria-label="Escape and unescape form">
                    <div class="input-area">
                        <h3 class="section-title"><label for="escapeInput">Input Text</label></h3>
                        <textarea id="escapeInput" placeholder="Enter text to escape or unescape..." aria-label="Input text for escape operations" aria-required="true" aria-describedby="escape-input-help"></textarea>
                        <span id="escape-input-help" class="sr-only">Enter text to escape or unescape for HTML, JSON, URL, SQL, regex, shell, CSV, or XML formats</span>
                    </div>

                    <div class="options-row" role="group" aria-label="Escape format selection">
                        <label class="option-item">
                            <span id="format-label">Format:</span>
                            <select id="escapeFormat" aria-labelledby="format-label" aria-describedby="format-help">
                                <option value="html">HTML Entities</option>
                                <option value="json">JSON String</option>
                                <option value="url">URL Encoding</option>
                                <option value="sql">SQL String</option>
                                <option value="regex">Regex Special Chars</option>
                                <option value="shell">Shell/Bash</option>
                                <option value="csv">CSV Field</option>
                                <option value="xml">XML Entities</option>
                            </select>
                            <span id="format-help" class="sr-only">Select the format for escaping or unescaping text</span>
                        </label>
                    </div>

                    <div class="button-row">
                        <button type="button" class="action-btn" onclick="escapeOp('escape')" aria-label="Escape special characters">Escape</button>
                        <button type="button" class="action-btn secondary" onclick="escapeOp('unescape')" aria-label="Unescape special characters">Unescape</button>
                    </div>

                    <div class="error" id="escapeError" role="alert" aria-live="assertive" aria-atomic="true"></div>

                    <div class="output-area" role="region" aria-live="polite" aria-label="Escape operation result">
                        <h3 class="section-title"><label for="escapeOutput">Output</label></h3>
                        <div class="output-box">
                            <textarea id="escapeOutput" readonly placeholder="Result will appear here..." aria-label="Escape operation output" aria-readonly="true"></textarea>
                            <button type="button" class="copy-btn" onclick="copyOutput('escapeOutput', this)" aria-label="Copy output to clipboard">Copy</button>
                        </div>
                    </div>
                </form>

                <div class="info-box">
                    HTML: &amp; &lt; &gt; &quot; | JSON: quotes, backslashes, control chars | SQL: single quotes | Regex: special metacharacters | Shell: quotes and special chars
                </div>
            </div>
        </div>

        <footer role="contentinfo">
            String Manipulation Toolkit - Works offline, no installation required
        </footer>
    </main>

    <script>
        // Tab switching
        function switchTab(tabName) {
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
                btn.setAttribute('aria-selected', 'false');
            });
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));

            const activeBtn = document.querySelector(`[onclick="switchTab('${tabName}')"]`);
            activeBtn.classList.add('active');
            activeBtn.setAttribute('aria-selected', 'true');
            document.getElementById(`${tabName}-tab`).classList.add('active');

            const tabNames = {
                'case': 'Case conversion',
                'lines': 'Line operations',
                'duplicates': 'Duplicate handling',
                'escape': 'Escape and unescape'
            };
            A11yUtils.announce(`Switched to ${tabNames[tabName]} tab`, 'polite');
        }

        // ==================== CASE CONVERSION ====================
        function convertCase(type) {
            const input = document.getElementById('caseInput').value;
            hideError('caseError');

            if (!input.trim()) {
                showError('caseError', 'Please enter some text to convert');
                return;
            }

            let result;
            switch (type) {
                case 'upper':
                    result = input.toUpperCase();
                    break;
                case 'lower':
                    result = input.toLowerCase();
                    break;
                case 'title':
                    result = toTitleCase(input);
                    break;
                case 'camel':
                    result = toCamelCase(input);
                    break;
                case 'pascal':
                    result = toPascalCase(input);
                    break;
                case 'snake':
                    result = toSnakeCase(input);
                    break;
                case 'kebab':
                    result = toKebabCase(input);
                    break;
            }

            document.getElementById('caseOutput').value = result;
            A11yUtils.announce(`Converted to ${type} case`, 'polite');
        }

        function toTitleCase(str) {
            return str.replace(/\b\w/g, char => char.toUpperCase());
        }

        function toCamelCase(str) {
            const words = splitIntoWords(str);
            return words.map((word, index) => {
                word = word.toLowerCase();
                return index === 0 ? word : word.charAt(0).toUpperCase() + word.slice(1);
            }).join('');
        }

        function toPascalCase(str) {
            const words = splitIntoWords(str);
            return words.map(word => {
                word = word.toLowerCase();
                return word.charAt(0).toUpperCase() + word.slice(1);
            }).join('');
        }

        function toSnakeCase(str) {
            return splitIntoWords(str).map(w => w.toLowerCase()).join('_');
        }

        function toKebabCase(str) {
            return splitIntoWords(str).map(w => w.toLowerCase()).join('-');
        }

        function splitIntoWords(str) {
            // Handle camelCase, PascalCase, snake_case, kebab-case, and spaces
            return str
                .replace(/([a-z])([A-Z])/g, '$1 $2') // camelCase -> camel Case
                .replace(/[_-]/g, ' ') // snake_case and kebab-case -> spaces
                .split(/\s+/)
                .filter(w => w.length > 0);
        }

        // ==================== LINE OPERATIONS ====================
        function lineOp(operation) {
            const input = document.getElementById('linesInput').value;
            hideError('linesError');
            document.getElementById('linesStats').style.display = 'none';

            if (!input.trim()) {
                showError('linesError', 'Please enter some text');
                return;
            }

            let lines = input.split('\n');
            const originalCount = lines.length;
            let result;

            switch (operation) {
                case 'trim':
                    result = lines.map(line => line.trim()).join('\n');
                    break;
                case 'pad':
                    const padChar = document.getElementById('padChar').value || ' ';
                    const padLength = parseInt(document.getElementById('padLength').value) || 20;
                    const padSide = document.getElementById('padSide').value;
                    result = lines.map(line => padLine(line, padLength, padChar, padSide)).join('\n');
                    break;
                case 'reverse':
                    result = lines.reverse().join('\n');
                    break;
                case 'reverseChars':
                    result = lines.map(line => line.split('').reverse().join('')).join('\n');
                    break;
                case 'sort':
                    result = lines.slice().sort((a, b) => a.localeCompare(b)).join('\n');
                    break;
                case 'sortDesc':
                    result = lines.slice().sort((a, b) => b.localeCompare(a)).join('\n');
                    break;
                case 'sortNum':
                    result = lines.slice().sort((a, b) => {
                        const numA = parseFloat(a) || 0;
                        const numB = parseFloat(b) || 0;
                        return numA - numB;
                    }).join('\n');
                    break;
                case 'shuffle':
                    result = shuffleArray(lines.slice()).join('\n');
                    break;
                case 'removeEmpty':
                    const nonEmpty = lines.filter(line => line.trim().length > 0);
                    result = nonEmpty.join('\n');
                    const removed = originalCount - nonEmpty.length;
                    showStats('linesStats', `Removed <code>${removed}</code> empty line${removed !== 1 ? 's' : ''}`);
                    break;
            }

            document.getElementById('linesOutput').value = result;
            A11yUtils.announce(`Line operation ${operation} completed`, 'polite');
        }

        function padLine(str, length, char, side) {
            if (str.length >= length) return str;
            const padding = char.repeat(length - str.length);
            if (side === 'left') return padding + str;
            if (side === 'right') return str + padding;
            // both sides
            const leftPad = char.repeat(Math.floor((length - str.length) / 2));
            const rightPad = char.repeat(Math.ceil((length - str.length) / 2));
            return leftPad + str + rightPad;
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // ==================== DUPLICATES ====================
        function dupOp(operation) {
            const input = document.getElementById('dupInput').value;
            const caseSensitive = document.getElementById('dupCaseSensitive').checked;
            const trimLines = document.getElementById('dupTrimLines').checked;

            hideError('dupError');
            document.getElementById('dupStats').style.display = 'none';
            document.getElementById('countResults').style.display = 'none';
            document.getElementById('dupOutputBox').style.display = 'block';

            if (!input.trim()) {
                showError('dupError', 'Please enter some text');
                return;
            }

            let lines = input.split('\n');
            const originalCount = lines.length;

            const normalize = (str) => {
                let s = trimLines ? str.trim() : str;
                return caseSensitive ? s : s.toLowerCase();
            };

            if (operation === 'count') {
                const counts = new Map();
                const originalLines = new Map(); // Keep original format for display

                lines.forEach(line => {
                    const key = normalize(line);
                    const displayLine = trimLines ? line.trim() : line;
                    if (!counts.has(key)) {
                        counts.set(key, 0);
                        originalLines.set(key, displayLine);
                    }
                    counts.set(key, counts.get(key) + 1);
                });

                // Sort by count descending
                const sorted = [...counts.entries()].sort((a, b) => b[1] - a[1]);

                document.getElementById('dupOutputBox').style.display = 'none';
                const resultsDiv = document.getElementById('countResults');
                resultsDiv.innerHTML = '';
                resultsDiv.style.display = 'grid';

                sorted.forEach(([key, count]) => {
                    const item = document.createElement('div');
                    item.className = 'count-item';
                    item.setAttribute('role', 'listitem');
                    item.innerHTML = `<span class="text">${escapeHtml(originalLines.get(key))}</span><span class="count" aria-label="${count} occurrences">${count}</span>`;
                    resultsDiv.appendChild(item);
                });

                showStats('dupStats', `Found <code>${counts.size}</code> unique value${counts.size !== 1 ? 's' : ''} from <code>${originalCount}</code> line${originalCount !== 1 ? 's' : ''}`);
                A11yUtils.announce(`Counted ${counts.size} unique values`, 'polite');
                return;
            }

            const seen = new Set();
            const duplicates = new Set();
            let result;

            // First pass: identify duplicates
            lines.forEach(line => {
                const key = normalize(line);
                if (seen.has(key)) {
                    duplicates.add(key);
                } else {
                    seen.add(key);
                }
            });

            if (operation === 'remove') {
                const seenOnce = new Set();
                result = lines.filter(line => {
                    const key = normalize(line);
                    if (seenOnce.has(key)) return false;
                    seenOnce.add(key);
                    return true;
                });
                const removed = originalCount - result.length;
                showStats('dupStats', `Removed <code>${removed}</code> duplicate${removed !== 1 ? 's' : ''}, kept <code>${result.length}</code> unique line${result.length !== 1 ? 's' : ''}`);
            } else if (operation === 'keepDups') {
                result = lines.filter(line => duplicates.has(normalize(line)));
                showStats('dupStats', `Found <code>${result.length}</code> line${result.length !== 1 ? 's' : ''} that are duplicates`);
            }

            document.getElementById('dupOutput').value = result.join('\n');
            A11yUtils.announce(`Duplicate operation completed`, 'polite');
        }

        // ==================== ESCAPE/UNESCAPE ====================
        function escapeOp(operation) {
            const input = document.getElementById('escapeInput').value;
            const format = document.getElementById('escapeFormat').value;

            hideError('escapeError');

            if (!input) {
                showError('escapeError', 'Please enter some text');
                return;
            }

            let result;
            try {
                if (operation === 'escape') {
                    result = escapeText(input, format);
                } else {
                    result = unescapeText(input, format);
                }
                document.getElementById('escapeOutput').value = result;
                A11yUtils.announce(`Text ${operation}d for ${format}`, 'polite');
            } catch (e) {
                showError('escapeError', `Error: ${e.message}`);
            }
        }

        function escapeText(str, format) {
            switch (format) {
                case 'html':
                    return str
                        .replace(/&/g, '&amp;')
                        .replace(/</g, '&lt;')
                        .replace(/>/g, '&gt;')
                        .replace(/"/g, '&quot;')
                        .replace(/'/g, '&#039;');
                case 'xml':
                    return str
                        .replace(/&/g, '&amp;')
                        .replace(/</g, '&lt;')
                        .replace(/>/g, '&gt;')
                        .replace(/"/g, '&quot;')
                        .replace(/'/g, '&apos;');
                case 'json':
                    return JSON.stringify(str).slice(1, -1);
                case 'url':
                    return encodeURIComponent(str);
                case 'sql':
                    return str.replace(/'/g, "''");
                case 'regex':
                    return str.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
                case 'shell':
                    return "'" + str.replace(/'/g, "'\"'\"'") + "'";
                case 'csv':
                    if (str.includes('"') || str.includes(',') || str.includes('\n')) {
                        return '"' + str.replace(/"/g, '""') + '"';
                    }
                    return str;
                default:
                    return str;
            }
        }

        function unescapeText(str, format) {
            switch (format) {
                case 'html':
                case 'xml':
                    const textarea = document.createElement('textarea');
                    textarea.innerHTML = str;
                    return textarea.value;
                case 'json':
                    return JSON.parse('"' + str + '"');
                case 'url':
                    return decodeURIComponent(str);
                case 'sql':
                    return str.replace(/''/g, "'");
                case 'regex':
                    return str.replace(/\\([.*+?^${}()|[\]\\])/g, '$1');
                case 'shell':
                    // Remove surrounding quotes and unescape
                    if (str.startsWith("'") && str.endsWith("'")) {
                        return str.slice(1, -1).replace(/'\"'\"'/g, "'");
                    }
                    return str;
                case 'csv':
                    if (str.startsWith('"') && str.endsWith('"')) {
                        return str.slice(1, -1).replace(/""/g, '"');
                    }
                    return str;
                default:
                    return str;
            }
        }

        // ==================== UTILITIES ====================
        function showError(elementId, message) {
            const errorDiv = document.getElementById(elementId);
            errorDiv.textContent = message;
            errorDiv.classList.add('show');
            // Announce error to screen readers
            A11yUtils.announce('Error: ' + message, 'assertive');
        }

        function hideError(elementId) {
            const errorDiv = document.getElementById(elementId);
            errorDiv.classList.remove('show');
            errorDiv.textContent = '';
        }

        function showStats(elementId, html) {
            const statsDiv = document.getElementById(elementId);
            statsDiv.innerHTML = html;
            statsDiv.style.display = 'block';
        }

        function escapeHtml(str) {
            const div = document.createElement('div');
            div.textContent = str;
            return div.innerHTML;
        }

        function copyOutput(elementId, button) {
            const value = document.getElementById(elementId).value;
            if (!value) return;

            navigator.clipboard.writeText(value).then(() => {
                button.textContent = 'Copied!';
                button.classList.add('copied');
                A11yUtils.announce('Output copied to clipboard', 'polite');
                setTimeout(() => {
                    button.textContent = 'Copy';
                    button.classList.remove('copied');
                }, 1500);
            });
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && e.ctrlKey) {
                const activeTab = document.querySelector('.tab-content.active');
                if (activeTab.id === 'case-tab') convertCase('upper');
                else if (activeTab.id === 'lines-tab') lineOp('trim');
                else if (activeTab.id === 'duplicates-tab') dupOp('remove');
                else if (activeTab.id === 'escape-tab') escapeOp('escape');
            }
        });
    </script>
    <script>
        document.querySelector('.skip-link').addEventListener('click', function(e) {
            e.preventDefault();
            const target = document.getElementById('main-content');
            if (target) {
                target.setAttribute('tabindex', '-1');
                target.focus();
                target.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        });
    </script>
</body>
</html>
