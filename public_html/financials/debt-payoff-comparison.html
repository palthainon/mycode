<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- SEO Meta Tags -->
    <meta name="description" content="Compare debt snowball vs avalanche payoff methods. See which strategy saves you more money and time. Free calculator for credit cards, auto loans, student loans, and more.">
    <meta name="keywords" content="debt payoff calculator, debt snowball, debt avalanche, debt comparison, credit card payoff, loan payoff calculator, debt free calculator">
    <meta name="author" content="OldWeb LLC">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://oldweb.tech/financials/debt-payoff-comparison.html">

    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Debt Payoff Comparison - Snowball vs Avalanche - OldWeb.tech">
    <meta property="og:description" content="Compare debt snowball vs avalanche payoff methods. See which strategy saves you more money and time with our free calculator.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://oldweb.tech/financials/debt-payoff-comparison.html">
    <meta property="og:site_name" content="OldWeb.tech">

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Debt Payoff Comparison - Snowball vs Avalanche - OldWeb.tech">
    <meta name="twitter:description" content="Compare debt snowball vs avalanche payoff methods. See which strategy saves you more money and time.">

    <!-- Additional Meta Tags -->
    <meta name="theme-color" content="#1a1a2e">

    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="../logo/favicon-32x32.png">

    <title>Debt Payoff Comparison - Snowball vs Avalanche - OldWeb.tech</title>
    <link rel="stylesheet" href="../a11y.css">
    <script src="../a11y-utils.js"></script>
    <script src="../navigationv2.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            padding: 40px 20px;
            color: #fff;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5rem;
            color: #4fc3f7;
            text-shadow: 0 0 20px rgba(79, 195, 247, 0.3);
        }

        .subtitle {
            text-align: center;
            color: #90caf9;
            font-size: 1.1rem;
            margin-bottom: 30px;
            opacity: 0.9;
        }

        .calculator {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 30px;
        }

        .section-title {
            color: #4fc3f7;
            font-size: 1.3rem;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .debt-list {
            margin-bottom: 25px;
        }

        .debt-item {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: grid;
            grid-template-columns: 1fr 140px 140px 120px 120px 40px;
            gap: 12px;
            align-items: end;
        }

        .debt-item .input-field {
            display: flex;
            flex-direction: column;
        }

        .debt-item .input-field label {
            display: block;
            margin-bottom: 6px;
            color: #90caf9;
            font-weight: 500;
            font-size: 0.85rem;
        }

        .debt-item .input-field input,
        .debt-item .input-field select {
            width: 100%;
            padding: 10px 12px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            background: #0f1419;
            color: #fff;
            font-size: 0.95rem;
            transition: border-color 0.3s, box-shadow 0.3s;
        }

        .debt-item .input-field select option {
            background: #0f1419;
            color: #fff;
        }

        .debt-item .input-field input:focus,
        .debt-item .input-field select:focus {
            outline: none;
            border-color: #4fc3f7;
            box-shadow: 0 0 10px rgba(79, 195, 247, 0.2);
        }

        .debt-item .input-field input::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }

        .input-prefix {
            position: relative;
        }

        .input-prefix span {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: rgba(255, 255, 255, 0.5);
            pointer-events: none;
        }

        .input-prefix input {
            padding-left: 26px !important;
        }

        .input-suffix {
            position: relative;
        }

        .input-suffix span {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: rgba(255, 255, 255, 0.5);
            pointer-events: none;
        }

        .input-suffix input {
            padding-right: 26px !important;
        }

        .remove-btn {
            background: rgba(244, 67, 54, 0.2);
            border: 1px solid rgba(244, 67, 54, 0.3);
            color: #ff8a80;
            width: 36px;
            height: 36px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            align-self: end;
            margin-bottom: 2px;
        }

        .remove-btn:hover {
            background: rgba(244, 67, 54, 0.3);
            border-color: #f44336;
        }

        .remove-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .add-btn {
            background: rgba(102, 187, 106, 0.2);
            border: 1px solid rgba(102, 187, 106, 0.3);
            color: #81c784;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.95rem;
            transition: all 0.2s;
            font-weight: 500;
        }

        .add-btn:hover {
            background: rgba(102, 187, 106, 0.3);
            border-color: #66bb6a;
        }

        .extra-payment-section {
            display: grid;
            grid-template-columns: 200px 1fr;
            gap: 20px;
            align-items: end;
            margin-bottom: 25px;
            padding: 20px;
            background: rgba(79, 195, 247, 0.1);
            border-radius: 8px;
            border: 1px solid rgba(79, 195, 247, 0.2);
        }

        .extra-payment-section .input-field {
            display: flex;
            flex-direction: column;
        }

        .extra-payment-section .input-field label {
            display: block;
            margin-bottom: 8px;
            color: #90caf9;
            font-weight: 500;
        }

        .extra-payment-section .input-field input {
            width: 100%;
            padding: 12px 16px;
            padding-left: 30px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            background: #0f1419;
            color: #fff;
            font-size: 1rem;
            transition: border-color 0.3s, box-shadow 0.3s;
        }

        .extra-payment-section .input-field input:focus {
            outline: none;
            border-color: #4fc3f7;
            box-shadow: 0 0 15px rgba(79, 195, 247, 0.2);
        }

        .minimum-summary {
            color: #90caf9;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .minimum-summary strong {
            color: #fff;
            font-size: 1.1rem;
        }

        .btn {
            background: linear-gradient(135deg, #4fc3f7 0%, #2196f3 100%);
            color: #fff;
            border: none;
            padding: 14px 40px;
            font-size: 1.1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            font-weight: 600;
            display: block;
            width: 100%;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(79, 195, 247, 0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        .quick-presets {
            margin-bottom: 20px;
        }

        .quick-presets h3 {
            color: #90caf9;
            font-size: 0.85rem;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .preset-checkboxes {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .preset-checkbox {
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(79, 195, 247, 0.1);
            border: 1px solid rgba(79, 195, 247, 0.3);
            color: #4fc3f7;
            padding: 8px 14px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.2s;
            user-select: none;
        }

        .preset-checkbox:hover {
            background: rgba(79, 195, 247, 0.2);
            border-color: #4fc3f7;
        }

        .preset-checkbox:has(input:checked) {
            background: rgba(79, 195, 247, 0.25);
            border-color: #4fc3f7;
            box-shadow: 0 0 8px rgba(79, 195, 247, 0.3);
        }

        .preset-checkbox input[type="checkbox"] {
            width: 16px;
            height: 16px;
            accent-color: #4fc3f7;
            cursor: pointer;
        }

        .preset-checkbox span {
            cursor: pointer;
        }

        .preset-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .preset-btn {
            background: rgba(79, 195, 247, 0.1);
            border: 1px solid rgba(79, 195, 247, 0.3);
            color: #4fc3f7;
            padding: 8px 14px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.2s;
        }

        .preset-btn:hover {
            background: rgba(79, 195, 247, 0.2);
            border-color: #4fc3f7;
        }

        .error {
            background: rgba(244, 67, 54, 0.2);
            border: 1px solid #f44336;
            color: #ff8a80;
            padding: 15px 20px;
            border-radius: 8px;
            margin-top: 20px;
            display: none;
        }

        .error.show {
            display: block;
        }

        /* Results Section */
        .results {
            display: none;
            margin-bottom: 30px;
        }

        .results.show {
            display: block;
            animation: fadeIn 0.4s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 25px;
        }

        .method-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 25px;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.1);
        }

        .method-card.snowball {
            border-color: rgba(100, 181, 246, 0.4);
        }

        .method-card.avalanche {
            border-color: rgba(129, 199, 132, 0.4);
        }

        .method-card.winner {
            box-shadow: 0 0 25px rgba(102, 187, 106, 0.3);
        }

        .method-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
        }

        .method-icon {
            font-size: 2rem;
        }

        .method-title {
            font-size: 1.4rem;
            color: #fff;
        }

        .method-card.snowball .method-title {
            color: #64b5f6;
        }

        .method-card.avalanche .method-title {
            color: #81c784;
        }

        .winner-badge {
            background: linear-gradient(135deg, #66bb6a 0%, #43a047 100%);
            color: #fff;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .method-stats {
            display: grid;
            gap: 12px;
        }

        .stat-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .stat-row:last-child {
            border-bottom: none;
        }

        .stat-label {
            color: #90caf9;
            font-size: 0.9rem;
        }

        .stat-value {
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 1.1rem;
            font-weight: 600;
            color: #fff;
        }

        .stat-value.highlight {
            color: #66bb6a;
        }

        .payoff-order {
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .payoff-order h4 {
            color: #90caf9;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 12px;
        }

        .payoff-order ol {
            list-style: none;
            counter-reset: payoff-counter;
        }

        .payoff-order li {
            counter-increment: payoff-counter;
            padding: 8px 0;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .payoff-order li::before {
            content: counter(payoff-counter);
            background: rgba(79, 195, 247, 0.2);
            color: #4fc3f7;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .payoff-detail {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.85rem;
        }

        /* Comparison Summary */
        .comparison-summary {
            background: rgba(102, 187, 106, 0.1);
            border: 1px solid rgba(102, 187, 106, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 25px;
        }

        .comparison-summary h3 {
            color: #81c784;
            font-size: 1.1rem;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .comparison-summary p {
            color: #fff;
            line-height: 1.6;
        }

        .comparison-summary .highlight-number {
            color: #66bb6a;
            font-weight: 600;
            font-family: 'Consolas', 'Monaco', monospace;
        }

        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: 12px;
            margin-bottom: 25px;
        }

        .action-btn {
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.95rem;
            font-weight: 600;
            transition: all 0.2s;
            border: none;
        }

        .action-btn.primary {
            background: linear-gradient(135deg, #4fc3f7 0%, #2196f3 100%);
            color: #fff;
        }

        .action-btn.primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(79, 195, 247, 0.4);
        }

        .action-btn.secondary {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .action-btn.secondary:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        /* Schedule Section */
        .schedule-section {
            display: none;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 30px;
        }

        .schedule-section.show {
            display: block;
            animation: fadeIn 0.4s ease;
        }

        .schedule-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .schedule-tab {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: #fff;
            cursor: pointer;
            font-size: 0.95rem;
            transition: all 0.2s;
        }

        .schedule-tab:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        .schedule-tab.active {
            background: linear-gradient(135deg, #4fc3f7 0%, #2196f3 100%);
            border-color: transparent;
        }

        .schedule-table-wrapper {
            overflow-x: auto;
            max-height: 500px;
            overflow-y: auto;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .schedule-table {
            width: 100%;
            border-collapse: collapse;
            min-width: 800px;
        }

        .schedule-table th {
            background: rgba(79, 195, 247, 0.2);
            color: #4fc3f7;
            padding: 12px 15px;
            text-align: right;
            font-weight: 600;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: sticky;
            top: 0;
            z-index: 1;
        }

        .schedule-table th:first-child,
        .schedule-table td:first-child {
            text-align: center;
        }

        .schedule-table th:nth-child(2),
        .schedule-table td:nth-child(2) {
            text-align: left;
        }

        .schedule-table td {
            padding: 10px 15px;
            text-align: right;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9rem;
        }

        .schedule-table tbody tr:hover {
            background: rgba(79, 195, 247, 0.1);
        }

        .schedule-table tbody tr:nth-child(even) {
            background: rgba(0, 0, 0, 0.1);
        }

        .schedule-table tbody tr:nth-child(even):hover {
            background: rgba(79, 195, 247, 0.1);
        }

        .schedule-table .debt-paid-row {
            background: rgba(102, 187, 106, 0.15) !important;
        }

        .schedule-table .debt-paid-row td {
            color: #81c784;
        }

        /* Educational Section */
        .education-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 30px;
        }

        .education-section h2 {
            color: #4fc3f7;
            font-size: 1.5rem;
            margin-bottom: 20px;
        }

        .collapsible {
            margin-bottom: 12px;
        }

        .collapsible-header {
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 15px 20px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.2s;
        }

        .collapsible-header:hover {
            background: rgba(0, 0, 0, 0.3);
            border-color: rgba(79, 195, 247, 0.3);
        }

        .collapsible-header h3 {
            color: #fff;
            font-size: 1rem;
            font-weight: 500;
        }

        .collapsible-icon {
            color: #4fc3f7;
            font-size: 1.2rem;
            transition: transform 0.3s;
        }

        .collapsible.open .collapsible-icon {
            transform: rotate(180deg);
        }

        .collapsible-content {
            display: none;
            padding: 20px;
            background: rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-top: none;
            border-radius: 0 0 8px 8px;
            color: #b0bec5;
            line-height: 1.7;
        }

        .collapsible.open .collapsible-content {
            display: block;
        }

        .collapsible-content p {
            margin-bottom: 12px;
        }

        .collapsible-content p:last-child {
            margin-bottom: 0;
        }

        .collapsible-content strong {
            color: #4fc3f7;
        }

        .collapsible-content ul {
            margin: 12px 0;
            padding-left: 20px;
        }

        .collapsible-content li {
            margin-bottom: 8px;
        }

        .best-for {
            background: rgba(79, 195, 247, 0.1);
            border-left: 3px solid #4fc3f7;
            padding: 12px 15px;
            margin-top: 15px;
            border-radius: 0 6px 6px 0;
        }

        .best-for strong {
            color: #4fc3f7;
        }

        /* Quiz Section */
        .quiz-section {
            background: rgba(156, 39, 176, 0.1);
            border: 1px solid rgba(156, 39, 176, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .quiz-section h3 {
            color: #ce93d8;
            margin-bottom: 15px;
        }

        .quiz-questions {
            display: grid;
            gap: 12px;
        }

        .quiz-question {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            border: 2px solid transparent;
        }

        .quiz-question:hover {
            background: rgba(0, 0, 0, 0.3);
        }

        .quiz-question.selected {
            border-color: rgba(156, 39, 176, 0.5);
            background: rgba(156, 39, 176, 0.15);
        }

        .quiz-question input[type="radio"] {
            width: 18px;
            height: 18px;
            accent-color: #9c27b0;
        }

        .quiz-question label {
            cursor: pointer;
            color: #fff;
            font-size: 0.95rem;
            flex: 1;
        }

        .quiz-result {
            margin-top: 15px;
            padding: 15px;
            border-radius: 8px;
            display: none;
        }

        .quiz-result.show {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .quiz-result.snowball {
            background: rgba(100, 181, 246, 0.2);
            border: 1px solid rgba(100, 181, 246, 0.4);
        }

        .quiz-result.avalanche {
            background: rgba(129, 199, 132, 0.2);
            border: 1px solid rgba(129, 199, 132, 0.4);
        }

        .quiz-result h4 {
            margin-bottom: 8px;
        }

        .quiz-result.snowball h4 {
            color: #64b5f6;
        }

        .quiz-result.avalanche h4 {
            color: #81c784;
        }

        /* Expense Tracking Section */
        .expense-section {
            background: rgba(255, 152, 0, 0.1);
            border: 1px solid rgba(255, 152, 0, 0.3);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 25px;
        }

        .expense-section .section-title {
            color: #ffb74d;
        }

        .expense-section .section-subtitle {
            color: #90caf9;
            font-size: 0.9rem;
            margin-bottom: 15px;
            opacity: 0.9;
        }

        .expense-list {
            margin-bottom: 15px;
        }

        .expense-item {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: grid;
            grid-template-columns: 1fr 120px 100px 120px 40px;
            gap: 10px;
            align-items: end;
        }

        .expense-item .input-field {
            display: flex;
            flex-direction: column;
        }

        .expense-item .input-field label {
            display: block;
            margin-bottom: 5px;
            color: #ffb74d;
            font-weight: 500;
            font-size: 0.8rem;
        }

        .expense-item .input-field input {
            width: 100%;
            padding: 8px 10px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            background: #0f1419;
            color: #fff;
            font-size: 0.9rem;
            transition: border-color 0.3s, box-shadow 0.3s;
        }

        .expense-item .input-field input:focus {
            outline: none;
            border-color: #ffb74d;
            box-shadow: 0 0 10px rgba(255, 152, 0, 0.2);
        }

        .expense-item .input-field input::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }

        .expense-item .input-field.monthly-total input {
            background: rgba(255, 152, 0, 0.15);
            color: #ffb74d;
            font-weight: 600;
        }

        .expense-item .remove-expense-btn {
            background: rgba(244, 67, 54, 0.2);
            border: 1px solid rgba(244, 67, 54, 0.3);
            color: #ff8a80;
            width: 32px;
            height: 32px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            align-self: end;
            margin-bottom: 2px;
        }

        .expense-item .remove-expense-btn:hover {
            background: rgba(244, 67, 54, 0.3);
            border-color: #f44336;
        }

        .add-expense-btn {
            background: rgba(255, 152, 0, 0.2);
            border: 1px solid rgba(255, 152, 0, 0.3);
            color: #ffb74d;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s;
            font-weight: 500;
        }

        .add-expense-btn:hover {
            background: rgba(255, 152, 0, 0.3);
            border-color: #ff9800;
        }

        .expense-presets {
            margin-bottom: 15px;
        }

        .expense-presets h3 {
            color: #ffb74d;
        }

        .expense-presets .preset-btn {
            background: rgba(255, 152, 0, 0.15);
            border-color: rgba(255, 152, 0, 0.4);
            color: #ffb74d;
        }

        .expense-presets .preset-btn:hover {
            background: rgba(255, 152, 0, 0.25);
            border-color: #ff9800;
        }

        .expense-summary {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid rgba(255, 152, 0, 0.3);
            flex-wrap: wrap;
            gap: 10px;
        }

        .expense-total {
            color: #fff;
            font-size: 1rem;
        }

        .expense-total strong {
            color: #ffb74d;
            font-size: 1.2rem;
            font-family: 'Consolas', 'Monaco', monospace;
        }

        .apply-expense-btn {
            background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%);
            border: none;
            color: #fff;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 600;
            transition: all 0.2s;
        }

        .apply-expense-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 3px 10px rgba(255, 152, 0, 0.4);
        }

        .apply-expense-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .export-expenses-btn {
            background: rgba(255, 152, 0, 0.2);
            border: 1px solid rgba(255, 152, 0, 0.3);
            color: #ffb74d;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.2s;
        }

        .export-expenses-btn:hover {
            background: rgba(255, 152, 0, 0.3);
        }

        @media (max-width: 992px) {
            .expense-item {
                grid-template-columns: 1fr 1fr;
            }

            .expense-item .input-field:first-child {
                grid-column: span 2;
            }

            .expense-item .remove-expense-btn {
                grid-column: 2;
                justify-self: end;
            }
        }

        @media (max-width: 768px) {
            .expense-item {
                grid-template-columns: 1fr;
            }

            .expense-item .input-field:first-child {
                grid-column: 1;
            }

            .expense-item .remove-expense-btn {
                grid-column: 1;
                width: 100%;
            }

            .expense-summary {
                flex-direction: column;
                align-items: stretch;
            }
        }

        /* Footer */
        footer {
            text-align: center;
            margin-top: 30px;
            color: rgba(255, 255, 255, 0.4);
            font-size: 0.85rem;
        }

        .ascii-logo {
            position: absolute;
            top: 20px;
            right: 40px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.65rem;
            line-height: 1.1;
            color: #4fc3f7;
            text-shadow: 0 0 10px rgba(79, 195, 247, 0.3);
            opacity: 0.8;
            white-space: pre;
        }

        /* Responsive */
        @media (max-width: 992px) {
            .debt-item {
                grid-template-columns: 1fr 1fr;
                gap: 12px;
            }

            .debt-item .input-field:first-child {
                grid-column: span 2;
            }

            .remove-btn {
                grid-column: 2;
                justify-self: end;
            }

            .comparison-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .ascii-logo {
                position: static;
                text-align: center;
                margin-bottom: 20px;
                font-size: 0.5rem;
            }

            h1 {
                font-size: 2rem;
            }

            .debt-item {
                grid-template-columns: 1fr;
            }

            .debt-item .input-field:first-child {
                grid-column: 1;
            }

            .remove-btn {
                grid-column: 1;
                width: 100%;
                justify-self: stretch;
            }

            .extra-payment-section {
                grid-template-columns: 1fr;
            }

            .action-buttons {
                flex-direction: column;
            }

            .schedule-tabs {
                flex-wrap: wrap;
            }
        }

        @media print {
            body {
                background: #fff;
                color: #000;
                padding: 20px;
            }

            .calculator, .nav-bar, .ascii-logo, .skip-link, footer, .btn, .action-btn, .add-btn, .remove-btn, .preset-buttons, .quick-presets, .education-section, .schedule-tabs, .expense-section {
                display: none !important;
            }

            .results, .schedule-section {
                display: block !important;
                background: #fff;
                border: 1px solid #ccc;
                box-shadow: none;
                backdrop-filter: none;
            }

            .method-card {
                background: #f5f5f5;
                border: 1px solid #ccc;
            }

            .method-title, .stat-label, .stat-value {
                color: #333;
            }

            .comparison-summary {
                background: #f0fff0;
                border-color: #4caf50;
            }

            .schedule-table th {
                background: #eee;
                color: #333;
            }

            .schedule-table td {
                color: #000;
            }
        }
    </style>

    <!-- Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Debt Payoff Comparison Calculator",
      "description": "Compare debt snowball vs avalanche payoff methods. See which strategy saves you more money and time.",
      "url": "https://oldweb.tech/financials/debt-payoff-comparison.html",
      "applicationCategory": "FinanceApplication",
      "operatingSystem": "Web Browser",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "creator": {
        "@type": "Organization",
        "name": "OldWeb.tech"
      }
    }
    </script>
</head>
<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>
    <div class="ascii-logo" aria-hidden="true">  ___  _    _  __        __   _
 / _ \| | _| | \ \      / /__| |__
| | | | |/ _` | \ \ /\ / / _ \ '_ \
| |_| | | (_| |  \ V  V /  __/ |_) |
 \___/|_|\__,_|   \_/\_/ \___|_.__/
</div>
    <main id="main-content" class="container">
        <h1>Debt Payoff Comparison</h1>
        <p class="subtitle">Compare Snowball vs Avalanche methods to find your fastest path to debt freedom</p>

        <div class="calculator">
            <form id="debt-form" aria-label="Debt Payoff Comparison Form">
                <div class="section-title">
                    <span>Your Debts</span>
                    <button type="button" class="add-btn" onclick="addDebt()" aria-label="Add another debt">+ Add Debt</button>
                </div>

                <div class="quick-presets">
                    <h3 id="presets-label">Quick Examples:</h3>
                    <div class="preset-checkboxes" role="group" aria-labelledby="presets-label">
                        <label class="preset-checkbox">
                            <input type="checkbox" id="preset-typical" onchange="toggleDebtPreset('typical', this.checked)">
                            <span>Typical 3-Debt</span>
                        </label>
                        <label class="preset-checkbox">
                            <input type="checkbox" id="preset-credit-cards" onchange="toggleDebtPreset('credit-cards', this.checked)">
                            <span>Credit Cards</span>
                        </label>
                        <label class="preset-checkbox">
                            <input type="checkbox" id="preset-mixed" onchange="toggleDebtPreset('mixed', this.checked)">
                            <span>Mixed Types</span>
                        </label>
                    </div>
                </div>

                <div class="debt-list" id="debtList" role="list" aria-label="List of debts">
                    <!-- Debt items will be added here -->
                </div>

                <!-- Expense Tracking Section -->
                <div class="expense-section">
                    <div class="section-title">
                        <span>Expenses to Cut (Optional)</span>
                        <button type="button" class="add-expense-btn" onclick="addExpense()" aria-label="Add an expense to cut">+ Add Expense</button>
                    </div>
                    <p class="section-subtitle">Track expenses you can eliminate to put toward debt. Americans waste ~$200/year on unused subscriptions alone.</p>

                    <div class="quick-presets expense-presets">
                        <h3 id="expense-presets-label">Common Cuts:</h3>
                        <div class="preset-buttons" role="group" aria-labelledby="expense-presets-label">
                            <button type="button" class="preset-btn" onclick="loadExpensePreset('subscriptions')" aria-label="Load subscription audit example">Subscription Audit</button>
                            <button type="button" class="preset-btn" onclick="loadExpensePreset('daily')" aria-label="Load daily habits example">Daily Habits</button>
                            <button type="button" class="preset-btn" onclick="loadExpensePreset('lifestyle')" aria-label="Load lifestyle cuts example">Lifestyle Cuts</button>
                        </div>
                    </div>

                    <div class="expense-list" id="expenseList" role="list" aria-label="List of expenses to cut">
                        <!-- Expense items will be added here -->
                    </div>

                    <div class="expense-summary">
                        <div class="expense-total">
                            <span>Total monthly savings:</span>
                            <strong id="totalExpenseSavings">$0.00</strong>
                        </div>
                        <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                            <button type="button" class="apply-expense-btn" onclick="applyExpensesToExtra()" id="applyExpenseBtn" disabled aria-label="Apply expense savings to extra payment">Apply to Extra Payment</button>
                            <button type="button" class="export-expenses-btn" onclick="exportDebtsToCSV()" aria-label="Export debts to CSV">Export Debts</button>
                            <button type="button" class="export-expenses-btn" onclick="exportExpensesToCSV()" aria-label="Export expenses to CSV">Export Expenses</button>
                        </div>
                    </div>
                </div>

                <div class="extra-payment-section">
                    <div class="input-field">
                        <label for="extraPayment">Extra Monthly Payment</label>
                        <div class="input-prefix">
                            <span>$</span>
                            <input type="text" id="extraPayment" placeholder="0" aria-describedby="extra-help" inputmode="decimal">
                        </div>
                        <span id="extra-help" class="sr-only">Enter additional monthly payment beyond minimums</span>
                    </div>
                    <div class="minimum-summary">
                        <span>Your minimum payments total:</span>
                        <strong id="totalMinimum">$0.00</strong>
                        <span>per month</span>
                    </div>
                </div>

                <button type="button" class="btn" onclick="calculate()" aria-label="Compare payoff methods">Compare Methods</button>

                <div class="error" id="error" role="alert" aria-live="assertive" aria-atomic="true"></div>
            </form>
        </div>

        <!-- Results Section -->
        <div class="results" id="results" role="region" aria-live="polite" aria-label="Comparison results">
            <div class="comparison-grid">
                <div class="method-card snowball" id="snowballCard">
                    <div class="method-header">
                        <span class="method-icon" aria-hidden="true">&#10052;</span>
                        <h2 class="method-title">Snowball Method</h2>
                    </div>
                    <div class="method-stats" id="snowballStats">
                        <!-- Stats populated by JS -->
                    </div>
                    <div class="payoff-order">
                        <h4>Payoff Order</h4>
                        <ol id="snowballOrder">
                            <!-- Order populated by JS -->
                        </ol>
                    </div>
                </div>

                <div class="method-card avalanche" id="avalancheCard">
                    <div class="method-header">
                        <span class="method-icon" aria-hidden="true">&#9968;</span>
                        <h2 class="method-title">Avalanche Method</h2>
                        <span class="winner-badge" id="winnerBadge" style="display: none;">Saves More</span>
                    </div>
                    <div class="method-stats" id="avalancheStats">
                        <!-- Stats populated by JS -->
                    </div>
                    <div class="payoff-order">
                        <h4>Payoff Order</h4>
                        <ol id="avalancheOrder">
                            <!-- Order populated by JS -->
                        </ol>
                    </div>
                </div>
            </div>

            <div class="comparison-summary" id="comparisonSummary">
                <!-- Summary populated by JS -->
            </div>

            <div class="action-buttons">
                <button type="button" class="action-btn primary" onclick="toggleSchedule()" id="scheduleToggle" aria-expanded="false" aria-controls="scheduleSection">
                    View Detailed Schedule
                </button>
                <button type="button" class="action-btn secondary" onclick="exportToCSV()" aria-label="Export comparison to CSV">Export CSV</button>
                <button type="button" class="action-btn secondary" onclick="window.print()" aria-label="Print comparison">Print</button>
            </div>
        </div>

        <!-- Schedule Section -->
        <div class="schedule-section" id="scheduleSection" role="region" aria-label="Detailed payment schedule">
            <div class="schedule-tabs" role="tablist">
                <button type="button" class="schedule-tab active" onclick="showSchedule('snowball')" role="tab" aria-selected="true" aria-controls="scheduleTable" id="tab-snowball">Snowball Schedule</button>
                <button type="button" class="schedule-tab" onclick="showSchedule('avalanche')" role="tab" aria-selected="false" aria-controls="scheduleTable" id="tab-avalanche">Avalanche Schedule</button>
            </div>
            <div class="schedule-table-wrapper">
                <table class="schedule-table" id="scheduleTable" aria-label="Monthly payment schedule">
                    <thead>
                        <tr>
                            <th scope="col">Month</th>
                            <th scope="col">Target Debt</th>
                            <th scope="col">Payment</th>
                            <th scope="col">Principal</th>
                            <th scope="col">Interest</th>
                            <th scope="col">Total Balance</th>
                        </tr>
                    </thead>
                    <tbody id="scheduleBody">
                        <!-- Schedule rows populated by JS -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Educational Section -->
        <div class="education-section" role="region" aria-label="Learn about debt payoff methods">
            <h2>Learn More</h2>

            <div class="collapsible" id="quiz-collapsible">
                <div class="collapsible-header" onclick="toggleCollapsible('quiz-collapsible')" role="button" aria-expanded="false" tabindex="0">
                    <h3>Which Method Is Right for You?</h3>
                    <span class="collapsible-icon" aria-hidden="true">&#9660;</span>
                </div>
                <div class="collapsible-content">
                    <div class="quiz-section">
                        <h3>Which statement best describes you?</h3>
                        <div class="quiz-questions" role="radiogroup" aria-label="Method selection quiz">
                            <div class="quiz-question" onclick="selectQuizOption('q1')">
                                <input type="radio" id="q1" name="quiz" value="snowball" onchange="updateQuiz()">
                                <label for="q1">I need quick wins to stay motivated - seeing progress keeps me going</label>
                            </div>
                            <div class="quiz-question" onclick="selectQuizOption('q2')">
                                <input type="radio" id="q2" name="quiz" value="snowball" onchange="updateQuiz()">
                                <label for="q2">I've tried paying off debt before but lost motivation and gave up</label>
                            </div>
                            <div class="quiz-question" onclick="selectQuizOption('q3')">
                                <input type="radio" id="q3" name="quiz" value="avalanche" onchange="updateQuiz()">
                                <label for="q3">I'm analytical and patient - I can stick to a plan even without quick rewards</label>
                            </div>
                            <div class="quiz-question" onclick="selectQuizOption('q4')">
                                <input type="radio" id="q4" name="quiz" value="avalanche" onchange="updateQuiz()">
                                <label for="q4">Saving every possible dollar is my priority - the math matters most to me</label>
                            </div>
                        </div>
                        <div class="quiz-result snowball" id="quizResultSnowball">
                            <h4>The Snowball Method is recommended for you!</h4>
                            <p>You value motivation and quick wins. Seeing debts disappear fast will keep you on track. The psychological boost of eliminating accounts quickly will help you stay committed to your debt-free journey.</p>
                        </div>
                        <div class="quiz-result avalanche" id="quizResultAvalanche">
                            <h4>The Avalanche Method is recommended for you!</h4>
                            <p>You're focused on the math and can stay patient for maximum savings. You'll pay less in total interest and become debt-free sooner, even if you don't see quick wins early on.</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="collapsible" id="snowball-info">
                <div class="collapsible-header" onclick="toggleCollapsible('snowball-info')" role="button" aria-expanded="false" tabindex="0">
                    <h3>What is the Debt Snowball Method?</h3>
                    <span class="collapsible-icon" aria-hidden="true">&#9660;</span>
                </div>
                <div class="collapsible-content">
                    <p>The <strong>Debt Snowball Method</strong> focuses on paying off your smallest debt first, regardless of interest rate. Here's how it works:</p>
                    <ul>
                        <li>List all debts from smallest to largest balance</li>
                        <li>Pay minimum payments on all debts except the smallest</li>
                        <li>Put all extra money toward the smallest debt</li>
                        <li>When the smallest is paid off, roll that payment to the next smallest</li>
                        <li>Repeat until all debts are paid</li>
                    </ul>
                    <p>Research from the Kellogg School of Management found that people who use the snowball method are more likely to eliminate their debt completely. This is because small wins create momentum and motivation.</p>
                    <div class="best-for">
                        <strong>Best for:</strong> People who need motivation, have given up on debt before, or have many small debts.
                    </div>
                </div>
            </div>

            <div class="collapsible" id="avalanche-info">
                <div class="collapsible-header" onclick="toggleCollapsible('avalanche-info')" role="button" aria-expanded="false" tabindex="0">
                    <h3>What is the Debt Avalanche Method?</h3>
                    <span class="collapsible-icon" aria-hidden="true">&#9660;</span>
                </div>
                <div class="collapsible-content">
                    <p>The <strong>Debt Avalanche Method</strong> prioritizes paying off debts with the highest interest rates first. Here's how it works:</p>
                    <ul>
                        <li>List all debts from highest to lowest interest rate (APR)</li>
                        <li>Pay minimum payments on all debts except the highest APR</li>
                        <li>Put all extra money toward the highest-interest debt</li>
                        <li>When that debt is paid off, roll that payment to the next highest APR</li>
                        <li>Repeat until all debts are paid</li>
                    </ul>
                    <p>Mathematically, this method always results in paying the least total interest. For a typical household with 3 debts, the avalanche method saves about 1.3% more interest on average.</p>
                    <div class="best-for">
                        <strong>Best for:</strong> Analytical people, those with high-interest credit card debt, or anyone who can stay motivated without quick wins.
                    </div>
                </div>
            </div>

            <div class="collapsible" id="psychology-info">
                <div class="collapsible-header" onclick="toggleCollapsible('psychology-info')" role="button" aria-expanded="false" tabindex="0">
                    <h3>The Psychology of Debt Payoff</h3>
                    <span class="collapsible-icon" aria-hidden="true">&#9660;</span>
                </div>
                <div class="collapsible-content">
                    <p>Research shows that <strong>personal finance is 80% behavior and only 20% head knowledge</strong>. Here's what behavioral economics tells us:</p>
                    <p><strong>Proportional Progress Matters:</strong> When you make a $150 payment on a $600 balance, you've wiped out 25%. On a $6,000 balance, it barely registers. Our brains respond more to proportion than absolute amount.</p>
                    <p><strong>Debt Account Aversion:</strong> We keep mental "accounts" for each debt. Closing an entire account feels like a complete win, even if it's small. This explains why eliminating one small debt can be more motivating than making equal progress on a large one.</p>
                    <p><strong>The Key Insight:</strong> The best debt payoff method is the one you'll actually stick with until completion. If the avalanche method causes you to give up after 6 months, the snowball method that you complete is better for you.</p>
                </div>
            </div>

            <div class="collapsible" id="faq-info">
                <div class="collapsible-header" onclick="toggleCollapsible('faq-info')" role="button" aria-expanded="false" tabindex="0">
                    <h3>Common Questions</h3>
                    <span class="collapsible-icon" aria-hidden="true">&#9660;</span>
                </div>
                <div class="collapsible-content">
                    <p><strong>Should I include my mortgage?</strong><br>
                    Usually no. Focus on consumer debt first (credit cards, auto loans, personal loans). Mortgages are long-term, often have tax benefits, and the interest rate is typically lower than other debts.</p>

                    <p><strong>What about 0% promotional rates?</strong><br>
                    Be careful! Enter the post-promotional APR that will apply when the 0% period ends. If you can't pay it off before then, plan for the higher rate.</p>

                    <p><strong>What if I can only pay minimums?</strong><br>
                    Both methods produce the same result when you can only pay minimums. Focus on finding extra money through budgeting, side income, or reducing expenses. Even $50 extra per month makes a significant difference.</p>

                    <p><strong>Can I switch methods mid-way?</strong><br>
                    Absolutely! Some people start with snowball to get momentum, then switch to avalanche once they've built the habit. The important thing is to keep going.</p>
                </div>
            </div>
        </div>

        <footer role="contentinfo">
            Debt Payoff Comparison - Works offline, no data stored, no sign-up required
        </footer>
    </main>

    <script>
        // Debt data structure
        let debts = [];
        let nextDebtId = 1;
        let snowballSchedule = [];
        let avalancheSchedule = [];
        let currentScheduleView = 'snowball';

        // Expense tracking data structure
        let expenses = [];
        let nextExpenseId = 1;

        // Debt types with typical APRs for reference
        const debtTypes = {
            'credit-card': { label: 'Credit Card', typicalApr: 19.72 },
            'auto-loan': { label: 'Auto Loan', typicalApr: 8.0 },
            'personal-loan': { label: 'Personal Loan', typicalApr: 12.21 },
            'student-loan': { label: 'Student Loan', typicalApr: 6.0 },
            'medical': { label: 'Medical Debt', typicalApr: 0 },
            'other': { label: 'Other', typicalApr: 10.0 }
        };

        // Preset examples
        const presets = {
            'typical': [
                { name: 'Credit Card', type: 'credit-card', balance: 5200, apr: 19.72, minPayment: 150 },
                { name: 'Car Loan', type: 'auto-loan', balance: 12400, apr: 7.5, minPayment: 285 },
                { name: 'Personal Loan', type: 'personal-loan', balance: 8000, apr: 11.99, minPayment: 180 }
            ],
            'credit-cards': [
                { name: 'Store Card', type: 'credit-card', balance: 800, apr: 24.99, minPayment: 35 },
                { name: 'Visa', type: 'credit-card', balance: 4500, apr: 18.99, minPayment: 120 },
                { name: 'Mastercard', type: 'credit-card', balance: 7200, apr: 21.49, minPayment: 180 },
                { name: 'Amex', type: 'credit-card', balance: 3100, apr: 16.99, minPayment: 85 }
            ],
            'mixed': [
                { name: 'Medical Bill', type: 'medical', balance: 1500, apr: 0, minPayment: 100 },
                { name: 'Credit Card', type: 'credit-card', balance: 6000, apr: 19.99, minPayment: 150 },
                { name: 'Student Loan', type: 'student-loan', balance: 15000, apr: 5.5, minPayment: 175 },
                { name: 'Car Payment', type: 'auto-loan', balance: 8500, apr: 6.9, minPayment: 225 }
            ]
        };

        // Expense preset examples (based on 2025 average costs)
        const expensePresets = {
            'subscriptions': [
                { label: 'Netflix', amount: 15.49, timesPerMonth: 1 },
                { label: 'Spotify/Apple Music', amount: 10.99, timesPerMonth: 1 },
                { label: 'Disney+', amount: 9.99, timesPerMonth: 1 },
                { label: 'HBO Max', amount: 15.99, timesPerMonth: 1 },
                { label: 'Amazon Prime', amount: 14.99, timesPerMonth: 1 },
                { label: 'Cloud Storage', amount: 2.99, timesPerMonth: 1 }
            ],
            'daily': [
                { label: 'Morning Coffee', amount: 5.50, timesPerMonth: 20 },
                { label: 'Lunch Out', amount: 15, timesPerMonth: 12 },
                { label: 'Afternoon Snack/Drink', amount: 4, timesPerMonth: 15 },
                { label: 'Vending Machine', amount: 2, timesPerMonth: 10 }
            ],
            'lifestyle': [
                { label: 'Gym Membership', amount: 45, timesPerMonth: 1 },
                { label: 'Food Delivery (DoorDash/Uber Eats)', amount: 35, timesPerMonth: 4 },
                { label: 'Dining Out', amount: 60, timesPerMonth: 4 },
                { label: 'Impulse Amazon Purchases', amount: 30, timesPerMonth: 2 }
            ]
        };

        function formatCurrency(num) {
            return new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'USD',
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            }).format(num);
        }

        function parseNumber(str) {
            if (!str) return 0;
            const cleaned = str.replace(/[,$\s]/g, '');
            const num = parseFloat(cleaned);
            return isNaN(num) ? 0 : num;
        }

        function formatInput(input) {
            let value = input.value.replace(/[^\d.]/g, '');
            if (value) {
                const parts = value.split('.');
                parts[0] = parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, ',');
                if (parts[1]) {
                    parts[1] = parts[1].substring(0, 2);
                }
                input.value = parts.join('.');
            }
        }

        function addDebt(data = null) {
            const id = nextDebtId++;
            const debt = data || {
                id: id,
                name: '',
                type: 'credit-card',
                balance: 0,
                apr: 0,
                minPayment: 0
            };
            debt.id = id;
            debts.push(debt);
            renderDebtItem(debt);
            updateTotalMinimum();
        }

        function renderDebtItem(debt) {
            const container = document.getElementById('debtList');
            const item = document.createElement('div');
            item.className = 'debt-item';
            item.id = `debt-${debt.id}`;
            item.setAttribute('role', 'listitem');

            item.innerHTML = `
                <div class="input-field">
                    <label for="name-${debt.id}">Debt Name</label>
                    <input type="text" id="name-${debt.id}" placeholder="e.g., Chase Visa" value="${debt.name}" onchange="updateDebt(${debt.id}, 'name', this.value)" aria-required="true">
                </div>
                <div class="input-field">
                    <label for="type-${debt.id}">Type</label>
                    <select id="type-${debt.id}" onchange="updateDebt(${debt.id}, 'type', this.value)">
                        ${Object.entries(debtTypes).map(([key, val]) =>
                            `<option value="${key}" ${debt.type === key ? 'selected' : ''}>${val.label}</option>`
                        ).join('')}
                    </select>
                </div>
                <div class="input-field">
                    <label for="balance-${debt.id}">Balance</label>
                    <div class="input-prefix">
                        <span>$</span>
                        <input type="text" id="balance-${debt.id}" placeholder="0.00" value="${debt.balance ? debt.balance.toLocaleString() : ''}" oninput="formatInput(this)" onchange="updateDebt(${debt.id}, 'balance', parseNumber(this.value))" inputmode="decimal" aria-required="true">
                    </div>
                </div>
                <div class="input-field">
                    <label for="apr-${debt.id}">APR</label>
                    <div class="input-suffix">
                        <input type="text" id="apr-${debt.id}" placeholder="0.00" value="${debt.apr || ''}" onchange="updateDebt(${debt.id}, 'apr', parseNumber(this.value))" inputmode="decimal" aria-required="true">
                        <span>%</span>
                    </div>
                </div>
                <div class="input-field">
                    <label for="min-${debt.id}">Min Payment</label>
                    <div class="input-prefix">
                        <span>$</span>
                        <input type="text" id="min-${debt.id}" placeholder="0.00" value="${debt.minPayment ? debt.minPayment.toLocaleString() : ''}" oninput="formatInput(this)" onchange="updateDebt(${debt.id}, 'minPayment', parseNumber(this.value))" inputmode="decimal" aria-required="true">
                    </div>
                </div>
                <button type="button" class="remove-btn" onclick="removeDebt(${debt.id})" aria-label="Remove this debt" ${debts.length <= 1 ? 'disabled' : ''}>&#10005;</button>
            `;

            container.appendChild(item);
        }

        function updateDebt(id, field, value) {
            const debt = debts.find(d => d.id === id);
            if (debt) {
                debt[field] = value;
                updateTotalMinimum();
            }
        }

        function removeDebt(id) {
            if (debts.length <= 1) return;

            // Check if this debt was from a preset
            const debtToRemove = debts.find(d => d.id === id);
            const presetSource = debtToRemove?.presetSource;

            debts = debts.filter(d => d.id !== id);
            document.getElementById(`debt-${id}`).remove();

            // If this was the last debt from a preset, uncheck that preset
            if (presetSource && !debts.some(d => d.presetSource === presetSource)) {
                const checkbox = document.getElementById(`preset-${presetSource}`);
                if (checkbox) checkbox.checked = false;
            }

            updateRemoveButtons();
            updateTotalMinimum();
        }

        function updateRemoveButtons() {
            const buttons = document.querySelectorAll('.remove-btn');
            buttons.forEach(btn => {
                btn.disabled = debts.length <= 1;
            });
        }

        function updateTotalMinimum() {
            const total = debts.reduce((sum, d) => sum + (d.minPayment || 0), 0);
            document.getElementById('totalMinimum').textContent = formatCurrency(total);
        }

        function toggleDebtPreset(presetName, isChecked) {
            const preset = presets[presetName];
            if (!preset) return;

            if (isChecked) {
                // Remove empty debt rows first (no name and no balance)
                const emptyDebts = debts.filter(d => !d.name && !d.balance && !d.presetSource);
                emptyDebts.forEach(debt => {
                    const element = document.getElementById(`debt-${debt.id}`);
                    if (element) element.remove();
                });
                debts = debts.filter(d => d.name || d.balance || d.presetSource);

                // Add preset debts
                preset.forEach(debtData => {
                    addDebt({ ...debtData, presetSource: presetName });
                });
                A11yUtils.announce(`Added ${preset.length} debts from ${presetName.replace('-', ' ')} example`, 'polite');
            } else {
                // Remove debts from this preset
                const debtsToRemove = debts.filter(d => d.presetSource === presetName);
                debtsToRemove.forEach(debt => {
                    const element = document.getElementById(`debt-${debt.id}`);
                    if (element) element.remove();
                });
                debts = debts.filter(d => d.presetSource !== presetName);
                A11yUtils.announce(`Removed ${debtsToRemove.length} debts from ${presetName.replace('-', ' ')} example`, 'polite');
            }

            // Ensure at least one empty debt row if all removed
            if (debts.length === 0) {
                addDebt();
            }

            updateRemoveButtons();
            updateTotalMinimum();
        }

        function loadPreset(presetName) {
            const preset = presets[presetName];
            if (!preset) return;

            // Clear existing debts
            debts = [];
            nextDebtId = 1;
            document.getElementById('debtList').innerHTML = '';

            // Uncheck all preset checkboxes
            document.querySelectorAll('.preset-checkbox input').forEach(cb => cb.checked = false);

            // Add preset debts
            preset.forEach(debtData => {
                addDebt({ ...debtData });
            });

            // Set extra payment
            document.getElementById('extraPayment').value = '300';

            // Update UI
            updateRemoveButtons();
            updateTotalMinimum();

            A11yUtils.announce(`Loaded ${presetName.replace('-', ' ')} example with ${preset.length} debts`, 'polite');
        }

        function loadExpensePreset(presetName) {
            const preset = expensePresets[presetName];
            if (!preset) return;

            // Clear existing expenses
            expenses = [];
            nextExpenseId = 1;
            document.getElementById('expenseList').innerHTML = '';

            // Add preset expenses
            preset.forEach(expenseData => {
                const expense = {
                    ...expenseData,
                    monthlyTotal: expenseData.amount * expenseData.timesPerMonth
                };
                addExpense(expense);
            });

            updateExpenseTotal();
            A11yUtils.announce(`Loaded ${presetName} example with ${preset.length} expenses`, 'polite');
        }

        function validateDebts() {
            const errorDiv = document.getElementById('error');
            errorDiv.classList.remove('show');
            errorDiv.textContent = '';

            for (const debt of debts) {
                if (!debt.name.trim()) {
                    errorDiv.textContent = 'Please enter a name for all debts';
                    errorDiv.classList.add('show');
                    document.getElementById(`name-${debt.id}`).focus();
                    return false;
                }
                if (debt.balance <= 0) {
                    errorDiv.textContent = `Please enter a valid balance for "${debt.name}"`;
                    errorDiv.classList.add('show');
                    document.getElementById(`balance-${debt.id}`).focus();
                    return false;
                }
                if (debt.minPayment <= 0) {
                    errorDiv.textContent = `Please enter a minimum payment for "${debt.name}"`;
                    errorDiv.classList.add('show');
                    document.getElementById(`min-${debt.id}`).focus();
                    return false;
                }
            }

            return true;
        }

        function calculate() {
            if (!validateDebts()) return;

            const extraPayment = parseNumber(document.getElementById('extraPayment').value) || 0;

            // Calculate both methods
            const snowballResult = calculatePayoff(debts, extraPayment, 'snowball');
            const avalancheResult = calculatePayoff(debts, extraPayment, 'avalanche');

            snowballSchedule = snowballResult.schedule;
            avalancheSchedule = avalancheResult.schedule;

            // Display results
            displayResults(snowballResult, avalancheResult);

            // Show results section
            document.getElementById('results').classList.add('show');
            document.getElementById('scheduleSection').classList.remove('show');
            document.getElementById('scheduleToggle').setAttribute('aria-expanded', 'false');

            // Scroll to results
            document.getElementById('results').scrollIntoView({ behavior: 'smooth', block: 'start' });

            // Announce results
            const savings = avalancheResult.totalInterest < snowballResult.totalInterest
                ? formatCurrency(snowballResult.totalInterest - avalancheResult.totalInterest)
                : formatCurrency(avalancheResult.totalInterest - snowballResult.totalInterest);
            A11yUtils.announce(`Comparison complete. Avalanche method saves ${savings} in interest.`, 'polite');
        }

        function calculatePayoff(debtsInput, extraPayment, method) {
            // Deep copy and sort debts based on method
            let activeDebts = debtsInput.map(d => ({
                ...d,
                currentBalance: d.balance,
                monthlyRate: d.apr / 100 / 12
            }));

            if (method === 'snowball') {
                activeDebts.sort((a, b) => a.balance - b.balance);
            } else {
                activeDebts.sort((a, b) => b.apr - a.apr);
            }

            const payoffOrder = activeDebts.map(d => ({
                name: d.name,
                balance: d.balance,
                apr: d.apr
            }));

            const schedule = [];
            let month = 0;
            let totalInterest = 0;
            const totalMinPayments = activeDebts.reduce((sum, d) => sum + d.minPayment, 0);
            const totalMonthlyBudget = totalMinPayments + extraPayment;

            // Track when each debt is paid off
            const debtPaidOffMonths = {};

            while (activeDebts.some(d => d.currentBalance > 0.01) && month < 600) {
                month++;
                let availablePayment = totalMonthlyBudget;
                let monthlyInterest = 0;
                let monthlyPrincipal = 0;
                let targetDebt = null;

                // Find first debt with balance (our target)
                const targetIndex = activeDebts.findIndex(d => d.currentBalance > 0.01);
                if (targetIndex >= 0) {
                    targetDebt = activeDebts[targetIndex];
                }

                // Process each debt
                for (let i = 0; i < activeDebts.length; i++) {
                    const debt = activeDebts[i];
                    if (debt.currentBalance <= 0.01) continue;

                    // Calculate interest for this month
                    const interest = debt.currentBalance * debt.monthlyRate;
                    monthlyInterest += interest;
                    totalInterest += interest;

                    // Determine payment for this debt
                    let payment;
                    if (i === targetIndex) {
                        // Target debt gets all remaining budget
                        payment = availablePayment;
                    } else {
                        // Other debts get minimum payment
                        payment = Math.min(debt.minPayment, availablePayment);
                    }

                    // Can't pay more than balance + interest
                    payment = Math.min(payment, debt.currentBalance + interest);
                    availablePayment -= payment;

                    const principal = payment - interest;
                    monthlyPrincipal += principal;
                    debt.currentBalance -= principal;

                    // Track if debt was paid off this month
                    if (debt.currentBalance <= 0.01 && !debtPaidOffMonths[debt.name]) {
                        debtPaidOffMonths[debt.name] = month;
                    }
                }

                const totalBalance = activeDebts.reduce((sum, d) => Math.max(0, d.currentBalance), 0);

                schedule.push({
                    month: month,
                    targetDebt: targetDebt ? targetDebt.name : '',
                    payment: totalMonthlyBudget - availablePayment,
                    principal: monthlyPrincipal,
                    interest: monthlyInterest,
                    totalBalance: totalBalance,
                    debtPaidOff: Object.entries(debtPaidOffMonths).find(([name, m]) => m === month)?.[0] || null
                });
            }

            return {
                months: month,
                totalInterest: totalInterest,
                totalPaid: debtsInput.reduce((sum, d) => sum + d.balance, 0) + totalInterest,
                payoffOrder: payoffOrder,
                schedule: schedule,
                firstDebtPaidMonth: Math.min(...Object.values(debtPaidOffMonths))
            };
        }

        function displayResults(snowball, avalanche) {
            // Determine winner
            const avalancheWins = avalanche.totalInterest < snowball.totalInterest;

            // Update winner badge
            const badge = document.getElementById('winnerBadge');
            if (avalancheWins && snowball.totalInterest > avalanche.totalInterest + 1) {
                badge.style.display = 'inline-block';
                document.getElementById('avalancheCard').classList.add('winner');
                document.getElementById('snowballCard').classList.remove('winner');
            } else {
                badge.style.display = 'none';
                document.getElementById('avalancheCard').classList.remove('winner');
                document.getElementById('snowballCard').classList.remove('winner');
            }

            // Format months to years/months
            const formatTime = (months) => {
                const years = Math.floor(months / 12);
                const remainingMonths = months % 12;
                if (years === 0) return `${remainingMonths} month${remainingMonths !== 1 ? 's' : ''}`;
                if (remainingMonths === 0) return `${years} year${years !== 1 ? 's' : ''}`;
                return `${years} yr ${remainingMonths} mo`;
            };

            // Calculate debt-free date
            const getDebtFreeDate = (months) => {
                const date = new Date();
                date.setMonth(date.getMonth() + months);
                return date.toLocaleDateString('en-US', { month: 'short', year: 'numeric' });
            };

            // Display snowball stats
            document.getElementById('snowballStats').innerHTML = `
                <div class="stat-row">
                    <span class="stat-label">Debt-Free Date</span>
                    <span class="stat-value">${getDebtFreeDate(snowball.months)}</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">Time to Pay Off</span>
                    <span class="stat-value">${formatTime(snowball.months)}</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">Total Interest</span>
                    <span class="stat-value">${formatCurrency(snowball.totalInterest)}</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">Total Paid</span>
                    <span class="stat-value">${formatCurrency(snowball.totalPaid)}</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">First Debt Paid Off</span>
                    <span class="stat-value highlight">${snowball.firstDebtPaidMonth} months</span>
                </div>
            `;

            // Display avalanche stats
            document.getElementById('avalancheStats').innerHTML = `
                <div class="stat-row">
                    <span class="stat-label">Debt-Free Date</span>
                    <span class="stat-value">${getDebtFreeDate(avalanche.months)}</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">Time to Pay Off</span>
                    <span class="stat-value">${formatTime(avalanche.months)}</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">Total Interest</span>
                    <span class="stat-value ${avalancheWins ? 'highlight' : ''}">${formatCurrency(avalanche.totalInterest)}</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">Total Paid</span>
                    <span class="stat-value">${formatCurrency(avalanche.totalPaid)}</span>
                </div>
                <div class="stat-row">
                    <span class="stat-label">First Debt Paid Off</span>
                    <span class="stat-value">${avalanche.firstDebtPaidMonth} months</span>
                </div>
            `;

            // Display payoff orders
            document.getElementById('snowballOrder').innerHTML = snowball.payoffOrder.map(d => `
                <li>${d.name} <span class="payoff-detail">(${formatCurrency(d.balance)})</span></li>
            `).join('');

            document.getElementById('avalancheOrder').innerHTML = avalanche.payoffOrder.map(d => `
                <li>${d.name} <span class="payoff-detail">(${d.apr}% APR)</span></li>
            `).join('');

            // Display comparison summary
            const interestDiff = Math.abs(snowball.totalInterest - avalanche.totalInterest);
            const monthsDiff = Math.abs(snowball.months - avalanche.months);
            const firstDebtDiff = Math.abs(snowball.firstDebtPaidMonth - avalanche.firstDebtPaidMonth);

            let summaryHtml = '<h3>&#128161; Key Insights</h3>';

            if (avalancheWins) {
                summaryHtml += `<p>The <strong>Avalanche method</strong> saves you <span class="highlight-number">${formatCurrency(interestDiff)}</span> in interest`;
                if (monthsDiff > 0) {
                    summaryHtml += ` and pays off your debt <span class="highlight-number">${monthsDiff} month${monthsDiff !== 1 ? 's' : ''}</span> sooner.`;
                } else {
                    summaryHtml += `.`;
                }
            } else if (interestDiff < 1) {
                summaryHtml += `<p>Both methods produce <strong>nearly identical results</strong> for your debt mix. Choose based on which approach fits your personality better.</p>`;
            } else {
                summaryHtml += `<p>The <strong>Snowball method</strong> saves you <span class="highlight-number">${formatCurrency(interestDiff)}</span> in interest for this debt mix.`;
            }

            if (snowball.firstDebtPaidMonth < avalanche.firstDebtPaidMonth) {
                summaryHtml += ` However, <strong>Snowball</strong> pays off your first debt <span class="highlight-number">${firstDebtDiff} month${firstDebtDiff !== 1 ? 's' : ''}</span> sooner, giving you an early win.</p>`;
            } else if (avalanche.firstDebtPaidMonth < snowball.firstDebtPaidMonth) {
                summaryHtml += ` <strong>Avalanche</strong> also pays off your first debt <span class="highlight-number">${firstDebtDiff} month${firstDebtDiff !== 1 ? 's' : ''}</span> sooner.</p>`;
            } else {
                summaryHtml += `</p>`;
            }

            document.getElementById('comparisonSummary').innerHTML = summaryHtml;
        }

        function toggleSchedule() {
            const section = document.getElementById('scheduleSection');
            const toggle = document.getElementById('scheduleToggle');
            const isShowing = section.classList.toggle('show');
            toggle.setAttribute('aria-expanded', isShowing);
            toggle.textContent = isShowing ? 'Hide Detailed Schedule' : 'View Detailed Schedule';

            if (isShowing) {
                showSchedule(currentScheduleView);
                section.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }

        function showSchedule(method) {
            currentScheduleView = method;
            const schedule = method === 'snowball' ? snowballSchedule : avalancheSchedule;

            // Update tabs
            document.querySelectorAll('.schedule-tab').forEach(tab => {
                tab.classList.remove('active');
                tab.setAttribute('aria-selected', 'false');
            });
            document.getElementById(`tab-${method}`).classList.add('active');
            document.getElementById(`tab-${method}`).setAttribute('aria-selected', 'true');

            // Render schedule
            const tbody = document.getElementById('scheduleBody');
            tbody.innerHTML = schedule.map(row => `
                <tr class="${row.debtPaidOff ? 'debt-paid-row' : ''}">
                    <td>${row.month}</td>
                    <td>${row.targetDebt}${row.debtPaidOff ? ' &#10003;' : ''}</td>
                    <td>${formatCurrency(row.payment)}</td>
                    <td>${formatCurrency(row.principal)}</td>
                    <td>${formatCurrency(row.interest)}</td>
                    <td>${formatCurrency(row.totalBalance)}</td>
                </tr>
            `).join('');
        }

        function exportToCSV() {
            const snowball = snowballSchedule;
            const avalanche = avalancheSchedule;

            // Create CSV with both schedules
            let csv = 'Debt Payoff Comparison Export\n\n';

            // Debts Summary
            csv += 'YOUR DEBTS\n';
            csv += 'Name,Type,Balance,APR,Minimum Payment\n';
            debts.forEach(debt => {
                csv += `"${debt.name}","${debtTypes[debt.type]?.label || debt.type}",${debt.balance.toFixed(2)},${debt.apr}%,${debt.minPayment.toFixed(2)}\n`;
            });
            csv += '\n';

            // Expenses (if any)
            if (expenses.length > 0) {
                csv += 'EXPENSES TO CUT\n';
                csv += 'Expense,Cost Each,Times Per Month,Monthly Total\n';
                expenses.forEach(expense => {
                    csv += `"${expense.label || 'Unnamed'}",${expense.amount.toFixed(2)},${expense.timesPerMonth},${expense.monthlyTotal.toFixed(2)}\n`;
                });
                const expenseTotal = expenses.reduce((sum, e) => sum + (e.monthlyTotal || 0), 0);
                csv += `Total Monthly Savings,,,${expenseTotal.toFixed(2)}\n\n`;
            }

            // Summary
            csv += 'COMPARISON SUMMARY\n';
            csv += 'Method,Months,Total Interest,Total Paid\n';
            const snowballInterest = snowball.reduce((sum, r) => sum + r.interest, 0);
            const avalancheInterest = avalanche.reduce((sum, r) => sum + r.interest, 0);
            const totalDebt = debts.reduce((sum, d) => sum + d.balance, 0);

            csv += `Snowball,${snowball.length},${snowballInterest.toFixed(2)},${(totalDebt + snowballInterest).toFixed(2)}\n`;
            csv += `Avalanche,${avalanche.length},${avalancheInterest.toFixed(2)},${(totalDebt + avalancheInterest).toFixed(2)}\n\n`;

            // Snowball Schedule
            csv += 'SNOWBALL SCHEDULE\n';
            csv += 'Month,Target Debt,Payment,Principal,Interest,Remaining Balance\n';
            snowball.forEach(row => {
                csv += `${row.month},"${row.targetDebt}",${row.payment.toFixed(2)},${row.principal.toFixed(2)},${row.interest.toFixed(2)},${row.totalBalance.toFixed(2)}\n`;
            });

            csv += '\nAVALANCHE SCHEDULE\n';
            csv += 'Month,Target Debt,Payment,Principal,Interest,Remaining Balance\n';
            avalanche.forEach(row => {
                csv += `${row.month},"${row.targetDebt}",${row.payment.toFixed(2)},${row.principal.toFixed(2)},${row.interest.toFixed(2)},${row.totalBalance.toFixed(2)}\n`;
            });

            // Download
            const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', 'debt-payoff-comparison.csv');
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);

            A11yUtils.announce('Comparison exported to CSV file', 'polite');
        }

        function toggleCollapsible(id) {
            const element = document.getElementById(id);
            const header = element.querySelector('.collapsible-header');
            const isOpen = element.classList.toggle('open');
            header.setAttribute('aria-expanded', isOpen);
        }

        function selectQuizOption(id) {
            const radio = document.getElementById(id);
            radio.checked = true;
            updateQuiz();
        }

        function updateQuiz() {
            const selectedRadio = document.querySelector('input[name="quiz"]:checked');

            // Update visual selection
            document.querySelectorAll('.quiz-question').forEach(q => q.classList.remove('selected'));
            if (selectedRadio) {
                selectedRadio.closest('.quiz-question').classList.add('selected');
            }

            const snowballResult = document.getElementById('quizResultSnowball');
            const avalancheResult = document.getElementById('quizResultAvalanche');

            snowballResult.classList.remove('show');
            avalancheResult.classList.remove('show');

            if (selectedRadio) {
                if (selectedRadio.value === 'snowball') {
                    snowballResult.classList.add('show');
                } else {
                    avalancheResult.classList.add('show');
                }
            }
        }

        // Expense tracking functions
        function addExpense(data = null) {
            const id = nextExpenseId++;
            const expense = data || {
                id: id,
                label: '',
                amount: 0,
                timesPerMonth: 1,
                monthlyTotal: 0
            };
            expense.id = id;
            expenses.push(expense);
            renderExpenseItem(expense);
            updateExpenseTotal();
        }

        function renderExpenseItem(expense) {
            const container = document.getElementById('expenseList');
            const item = document.createElement('div');
            item.className = 'expense-item';
            item.id = `expense-${expense.id}`;
            item.setAttribute('role', 'listitem');

            item.innerHTML = `
                <div class="input-field">
                    <label for="expense-label-${expense.id}">Expense</label>
                    <input type="text" id="expense-label-${expense.id}" placeholder="e.g., Morning coffee" value="${expense.label}" onchange="updateExpense(${expense.id}, 'label', this.value)">
                </div>
                <div class="input-field">
                    <label for="expense-amount-${expense.id}">Cost Each</label>
                    <div class="input-prefix">
                        <span>$</span>
                        <input type="text" id="expense-amount-${expense.id}" placeholder="0.00" value="${expense.amount || ''}" oninput="formatInput(this)" onchange="updateExpenseAmount(${expense.id})" inputmode="decimal">
                    </div>
                </div>
                <div class="input-field">
                    <label for="expense-times-${expense.id}">Times/Month</label>
                    <input type="number" id="expense-times-${expense.id}" placeholder="1" value="${expense.timesPerMonth || 1}" min="1" onchange="updateExpenseAmount(${expense.id})" inputmode="numeric">
                </div>
                <div class="input-field monthly-total">
                    <label for="expense-total-${expense.id}">Monthly</label>
                    <div class="input-prefix">
                        <span>$</span>
                        <input type="text" id="expense-total-${expense.id}" value="${expense.monthlyTotal.toFixed(2)}" readonly tabindex="-1">
                    </div>
                </div>
                <button type="button" class="remove-expense-btn" onclick="removeExpense(${expense.id})" aria-label="Remove this expense">&#10005;</button>
            `;

            container.appendChild(item);
        }

        function updateExpense(id, field, value) {
            const expense = expenses.find(e => e.id === id);
            if (expense) {
                expense[field] = value;
            }
        }

        function updateExpenseAmount(id) {
            const expense = expenses.find(e => e.id === id);
            if (expense) {
                const amount = parseNumber(document.getElementById(`expense-amount-${id}`).value) || 0;
                const times = parseInt(document.getElementById(`expense-times-${id}`).value) || 1;
                expense.amount = amount;
                expense.timesPerMonth = times;
                expense.monthlyTotal = amount * times;
                document.getElementById(`expense-total-${id}`).value = expense.monthlyTotal.toFixed(2);
                updateExpenseTotal();
            }
        }

        function removeExpense(id) {
            expenses = expenses.filter(e => e.id !== id);
            document.getElementById(`expense-${id}`).remove();
            updateExpenseTotal();
        }

        function updateExpenseTotal() {
            const total = expenses.reduce((sum, e) => sum + (e.monthlyTotal || 0), 0);
            document.getElementById('totalExpenseSavings').textContent = formatCurrency(total);
            document.getElementById('applyExpenseBtn').disabled = total <= 0;
        }

        function applyExpensesToExtra() {
            const total = expenses.reduce((sum, e) => sum + (e.monthlyTotal || 0), 0);
            if (total > 0) {
                const currentExtra = parseNumber(document.getElementById('extraPayment').value) || 0;
                document.getElementById('extraPayment').value = (currentExtra + total).toFixed(2);
                A11yUtils.announce(`Added ${formatCurrency(total)} to extra payment. New total: ${formatCurrency(currentExtra + total)}`, 'polite');
            }
        }

        function exportDebtsToCSV() {
            if (debts.length === 0 || !debts.some(d => d.name && d.balance > 0)) {
                A11yUtils.announce('No debts to export. Add some debts first.', 'polite');
                return;
            }

            let csv = 'Debt Summary Export\n\n';
            csv += 'Name,Type,Balance,APR,Minimum Payment\n';

            debts.forEach(debt => {
                if (debt.name && debt.balance > 0) {
                    const debtType = debtTypes[debt.type]?.label || debt.type;
                    csv += `"${debt.name}","${debtType}",${debt.balance.toFixed(2)},${debt.apr}%,${debt.minPayment.toFixed(2)}\n`;
                }
            });

            const totalDebt = debts.reduce((sum, d) => sum + (d.balance || 0), 0);
            const totalMinPayment = debts.reduce((sum, d) => sum + (d.minPayment || 0), 0);
            csv += `\nTOTAL,,$${totalDebt.toFixed(2)},,$${totalMinPayment.toFixed(2)}\n`;

            // Download
            const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', 'my-debts.csv');
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);

            A11yUtils.announce('Debts exported to CSV file', 'polite');
        }

        function exportExpensesToCSV() {
            if (expenses.length === 0) {
                A11yUtils.announce('No expenses to export. Add some expenses first.', 'polite');
                return;
            }

            let csv = 'Expenses to Cut Export\n\n';
            csv += 'Expense,Cost Each,Times Per Month,Monthly Total\n';

            expenses.forEach(expense => {
                csv += `"${expense.label || 'Unnamed'}",${expense.amount.toFixed(2)},${expense.timesPerMonth},${expense.monthlyTotal.toFixed(2)}\n`;
            });

            const total = expenses.reduce((sum, e) => sum + (e.monthlyTotal || 0), 0);
            csv += `\nTOTAL MONTHLY SAVINGS,,,$${total.toFixed(2)}\n`;
            csv += `ANNUAL SAVINGS,,,$${(total * 12).toFixed(2)}\n`;

            // Download
            const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', 'expenses-to-cut.csv');
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);

            A11yUtils.announce('Expenses exported to CSV file', 'polite');
        }

        // Initialize with one empty debt
        document.addEventListener('DOMContentLoaded', function() {
            addDebt();

            // Handle Enter key
            document.querySelectorAll('#debt-form input').forEach(input => {
                input.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        e.preventDefault();
                        calculate();
                    }
                });
            });

            // Handle keyboard navigation for collapsibles
            document.querySelectorAll('.collapsible-header').forEach(header => {
                header.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        header.click();
                    }
                });
            });
        });

        // Skip link handler
        document.querySelector('.skip-link').addEventListener('click', function(e) {
            e.preventDefault();
            const target = document.getElementById('main-content');
            if (target) {
                target.setAttribute('tabindex', '-1');
                target.focus();
                target.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        });
    </script>
</body>
</html>
