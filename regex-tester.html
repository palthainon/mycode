<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Regex Tester</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            padding: 40px 20px;
            color: #fff;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        .ascii-logo {
            position: absolute;
            top: 20px;
            right: 40px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.65rem;
            line-height: 1.1;
            color: #4fc3f7;
            text-shadow: 0 0 10px rgba(79, 195, 247, 0.3);
            opacity: 0.8;
            white-space: pre;
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5rem;
            color: #4fc3f7;
            text-shadow: 0 0 20px rgba(79, 195, 247, 0.3);
        }

        .calculator {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 30px;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            color: #90caf9;
            font-weight: 500;
        }

        textarea {
            width: 100%;
            min-height: 200px;
            padding: 12px 16px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            background: rgba(0, 0, 0, 0.3);
            color: #fff;
            font-size: 0.95rem;
            font-family: 'Consolas', 'Monaco', monospace;
            resize: vertical;
            transition: border-color 0.3s, box-shadow 0.3s;
            line-height: 1.6;
        }

        textarea:focus, input:focus {
            outline: none;
            border-color: #4fc3f7;
            box-shadow: 0 0 15px rgba(79, 195, 247, 0.2);
        }

        textarea::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }

        input[type="text"] {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            background: rgba(0, 0, 0, 0.3);
            color: #fff;
            font-size: 1rem;
            font-family: 'Consolas', 'Monaco', monospace;
            transition: border-color 0.3s, box-shadow 0.3s;
        }

        input[type="text"]::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }

        input[type="text"].error {
            border-color: #f44336;
        }

        .flags-group {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .flag-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .flag-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
            accent-color: #4fc3f7;
        }

        .flag-item label {
            color: #90caf9;
            font-size: 0.95rem;
            cursor: pointer;
            user-select: none;
        }

        .presets-section {
            margin-bottom: 20px;
        }

        .presets-label {
            display: block;
            margin-bottom: 12px;
            color: #90caf9;
            font-weight: 500;
        }

        .presets-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 10px;
        }

        .preset-btn {
            padding: 8px 12px;
            background: rgba(79, 195, 247, 0.1);
            border: 1px solid rgba(79, 195, 247, 0.3);
            border-radius: 6px;
            color: #4fc3f7;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
            white-space: nowrap;
        }

        .preset-btn:hover {
            background: rgba(79, 195, 247, 0.2);
            border-color: rgba(79, 195, 247, 0.5);
            transform: translateY(-1px);
        }

        .btn {
            background: linear-gradient(135deg, #4fc3f7 0%, #2196f3 100%);
            color: #fff;
            border: none;
            padding: 14px 40px;
            font-size: 1.1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            font-weight: 600;
            display: block;
            width: 100%;
            margin-bottom: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(79, 195, 247, 0.4);
        }

        .btn.secondary {
            background: linear-gradient(135deg, #66bb6a 0%, #4caf50 100%);
        }

        .btn.secondary:hover {
            box-shadow: 0 5px 20px rgba(102, 187, 106, 0.4);
        }

        .error {
            background: rgba(244, 67, 54, 0.1);
            border-left: 4px solid #f44336;
            color: #ff8a80;
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
        }

        .error.show {
            display: block;
        }

        .results {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 30px;
            display: none;
        }

        .results.show {
            display: block;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .results-header h2 {
            color: #4fc3f7;
            font-size: 1.8rem;
        }

        .export-buttons {
            display: flex;
            gap: 10px;
        }

        .export-btn {
            background: linear-gradient(135deg, #66bb6a 0%, #4caf50 100%);
            color: #fff;
            border: none;
            padding: 10px 20px;
            font-size: 0.9rem;
            border-radius: 6px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            font-weight: 600;
        }

        .export-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 187, 106, 0.4);
        }

        .match-summary {
            background: rgba(0, 0, 0, 0.2);
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #66bb6a;
        }

        .match-summary .count {
            font-size: 1.3rem;
            color: #66bb6a;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .match-summary .count.no-matches {
            color: #ff8a65;
        }

        .match-summary .info {
            color: #90caf9;
            font-size: 0.9rem;
            margin-top: 5px;
            font-family: 'Consolas', 'Monaco', monospace;
        }

        .view-toggle {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            justify-content: center;
        }

        .view-btn {
            padding: 10px 24px;
            background: rgba(79, 195, 247, 0.1);
            border: 2px solid rgba(79, 195, 247, 0.3);
            border-radius: 8px;
            color: #4fc3f7;
            font-size: 0.95rem;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 600;
        }

        .view-btn:hover {
            background: rgba(79, 195, 247, 0.2);
        }

        .view-btn.active {
            background: rgba(79, 195, 247, 0.3);
            border-color: #4fc3f7;
        }

        .highlighted-view {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 8px;
            max-height: 500px;
            overflow-y: auto;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9rem;
            line-height: 1.8;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .highlighted-view mark {
            background: rgba(102, 187, 106, 0.3);
            color: #fff;
            padding: 2px 0;
            border-left: 3px solid #66bb6a;
            padding-left: 4px;
            position: relative;
        }

        .highlighted-view mark:hover {
            background: rgba(102, 187, 106, 0.4);
        }

        .match-badge {
            display: inline-block;
            background: #4fc3f7;
            color: #fff;
            font-size: 0.65rem;
            padding: 2px 6px;
            border-radius: 10px;
            margin-left: 4px;
            font-weight: 600;
            vertical-align: super;
        }

        .list-view {
            display: none;
        }

        .list-view.active {
            display: block;
        }

        .match-item {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 15px;
            border-left: 4px solid #66bb6a;
        }

        .match-item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .match-number {
            background: #4fc3f7;
            color: #fff;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .copy-btn {
            background: rgba(79, 195, 247, 0.2);
            border: 1px solid rgba(79, 195, 247, 0.3);
            color: #4fc3f7;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .copy-btn:hover {
            background: rgba(79, 195, 247, 0.3);
            border-color: rgba(79, 195, 247, 0.5);
        }

        .copy-btn.copied {
            background: rgba(102, 187, 106, 0.3);
            border-color: #66bb6a;
            color: #66bb6a;
        }

        .match-text {
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 1rem;
            color: #fff;
            background: rgba(0, 0, 0, 0.2);
            padding: 10px;
            border-radius: 6px;
            margin-bottom: 10px;
            word-wrap: break-word;
        }

        .match-position {
            color: #90caf9;
            font-size: 0.85rem;
            margin-bottom: 8px;
        }

        .captured-groups {
            margin-top: 10px;
        }

        .captured-groups .label {
            color: #90caf9;
            font-size: 0.85rem;
            margin-bottom: 5px;
        }

        .group-item {
            background: rgba(79, 195, 247, 0.1);
            padding: 6px 10px;
            border-radius: 4px;
            margin-bottom: 5px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.85rem;
        }

        .group-item .group-label {
            color: #4fc3f7;
            font-weight: 600;
            margin-right: 8px;
        }

        footer {
            text-align: center;
            color: rgba(255, 255, 255, 0.4);
            font-size: 0.85rem;
            padding-top: 30px;
        }

        .nav-bar {
            position: absolute;
            top: 20px;
            left: 40px;
            display: flex;
            gap: 15px;
            align-items: center;
            z-index: 100;
        }

        .nav-link {
            color: #4fc3f7;
            text-decoration: none;
            font-size: 0.9rem;
            font-weight: 600;
            transition: color 0.2s, text-shadow 0.2s;
        }

        .nav-link:hover {
            color: #2196f3;
            text-shadow: 0 0 10px rgba(79, 195, 247, 0.5);
        }

        .nav-link.current {
            color: #66bb6a;
            border-bottom: 2px solid #66bb6a;
        }

        .nav-separator {
            color: rgba(79, 195, 247, 0.3);
            user-select: none;
        }

        @media (max-width: 768px) {
            .nav-bar {
                position: static;
                justify-content: center;
                flex-wrap: wrap;
                margin-bottom: 20px;
                gap: 10px;
            }

            .ascii-logo {
                position: static;
                text-align: center;
                margin-bottom: 20px;
                font-size: 0.5rem;
            }

            h1 {
                font-size: 2rem;
            }

            .container {
                max-width: 100%;
            }

            .presets-grid {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            }

            .results-header {
                flex-direction: column;
                align-items: flex-start;
            }

            .export-buttons {
                width: 100%;
                flex-direction: column;
            }

            .export-btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <nav class="nav-bar">
        <a href="index.html" class="nav-link">Home</a>
        <span class="nav-separator">|</span>
        <a href="subnet-calculator.html" class="nav-link">Subnet Calc</a>
        <span class="nav-separator">|</span>
        <a href="bit-calculator.html" class="nav-link">Bit Calc</a>
        <span class="nav-separator">|</span>
        <a href="data-rate-calculator.html" class="nav-link">Data Rate</a>
        <span class="nav-separator">|</span>
        <a href="regex-tester.html" class="nav-link current">Regex</a>
    </nav>
    <div class="ascii-logo">  ___  _    _  __        __   _
 / _ \| | _| | \ \      / /__| |__
| | | | |/ _` | \ \ /\ / / _ \ '_ \
| |_| | | (_| |  \ V  V /  __/ |_) |
 \___/|_|\__,_|   \_/\_/ \___|_.__/
</div>
    <div class="container">
        <h1>Regex Tester</h1>

        <div class="calculator">
            <div class="input-group">
                <label for="testString">Test String</label>
                <textarea id="testString" placeholder="Enter text to test against your regex pattern..."></textarea>
            </div>

            <div class="input-group">
                <label for="pattern">Regular Expression Pattern</label>
                <input type="text" id="pattern" placeholder="Enter regex pattern or select from presets...">
            </div>

            <div class="input-group">
                <label class="presets-label">Regex Flags</label>
                <div class="flags-group">
                    <div class="flag-item">
                        <input type="checkbox" id="flagG" checked>
                        <label for="flagG">g - Global (find all)</label>
                    </div>
                    <div class="flag-item">
                        <input type="checkbox" id="flagI">
                        <label for="flagI">i - Case insensitive</label>
                    </div>
                    <div class="flag-item">
                        <input type="checkbox" id="flagM">
                        <label for="flagM">m - Multiline</label>
                    </div>
                    <div class="flag-item">
                        <input type="checkbox" id="flagS">
                        <label for="flagS">s - Dotall</label>
                    </div>
                </div>
            </div>

            <div class="presets-section">
                <label class="presets-label">Common Network Patterns</label>
                <div class="presets-grid">
                    <button class="preset-btn" data-pattern="^.*$" data-flags="">Entire Line</button>
                    <button class="preset-btn" data-pattern="([0-9A-Fa-f]{2}:){5}[0-9A-Fa-f]{2}" data-flags="g">MAC (colon)</button>
                    <button class="preset-btn" data-pattern="([0-9A-Fa-f]{2}-){5}[0-9A-Fa-f]{2}" data-flags="g">MAC (dash)</button>
                    <button class="preset-btn" data-pattern="([0-9A-Fa-f]{4}\.){2}[0-9A-Fa-f]{4}" data-flags="g">MAC (dot)</button>
                    <button class="preset-btn" data-pattern="([0-9A-Fa-f]{2}[:-]){5}[0-9A-Fa-f]{2}|([0-9A-Fa-f]{4}\.){2}[0-9A-Fa-f]{4}" data-flags="g">MAC (any)</button>
                    <button class="preset-btn" data-pattern="\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b" data-flags="g">IPv4</button>
                    <button class="preset-btn" data-pattern="\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\/(?:[0-9]|[12][0-9]|3[0-2])\b" data-flags="g">IPv4 CIDR</button>
                    <button class="preset-btn" data-pattern="\bvlan\s*(\d{1,4})\b" data-flags="gi">VLAN ID</button>
                    <button class="preset-btn" data-pattern="\b(?:Ethernet|FastEthernet|GigabitEthernet|eth|ge|fe)\s*[\d/]+" data-flags="gi">Interface</button>
                    <button class="preset-btn" data-pattern="\s+" data-flags="g">All Spaces</button>
                    <button class="preset-btn" data-pattern="^\s*$" data-flags="gm">Blank Lines</button>
                </div>
            </div>

            <div class="error" id="errorMsg"></div>

            <button class="btn" onclick="testPattern()">Test Pattern</button>
            <button class="btn secondary" onclick="loadSample()">Load Sample Data</button>
        </div>

        <div class="results" id="results">
            <div class="results-header">
                <h2>Matches</h2>
                <div class="export-buttons">
                    <button class="export-btn" onclick="exportCSV()">Export CSV</button>
                    <button class="export-btn" onclick="exportTXT()">Export TXT</button>
                </div>
            </div>

            <div class="match-summary" id="matchSummary"></div>

            <div class="view-toggle">
                <button class="view-btn active" onclick="switchView('highlighted')">Highlighted View</button>
                <button class="view-btn" onclick="switchView('list')">List View</button>
            </div>

            <div class="highlighted-view" id="highlightedView"></div>
            <div class="list-view" id="listView"></div>
        </div>

        <footer>
            Regex Tester - Works offline, no installation required
        </footer>
    </div>

    <script>
        let matchesData = [];
        let currentPattern = '';
        let currentFlags = '';
        let testString = '';

        document.getElementById('pattern').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                testPattern();
            }
        });

        document.querySelectorAll('.flag-item input').forEach(checkbox => {
            checkbox.addEventListener('change', function() {
                if (document.getElementById('pattern').value && document.getElementById('testString').value) {
                    testPattern();
                }
            });
        });

        document.querySelectorAll('.preset-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const pattern = this.getAttribute('data-pattern');
                const flags = this.getAttribute('data-flags');

                document.getElementById('pattern').value = pattern;

                document.getElementById('flagG').checked = flags.includes('g');
                document.getElementById('flagI').checked = flags.includes('i');
                document.getElementById('flagM').checked = flags.includes('m');
                document.getElementById('flagS').checked = flags.includes('s');

                if (document.getElementById('testString').value) {
                    testPattern();
                }
            });
        });

        function testPattern() {
            const errorDiv = document.getElementById('errorMsg');
            const resultsDiv = document.getElementById('results');

            errorDiv.classList.remove('show');
            errorDiv.textContent = '';

            testString = document.getElementById('testString').value;
            currentPattern = document.getElementById('pattern').value;

            if (!testString) {
                errorDiv.textContent = 'Please enter text to test.';
                errorDiv.classList.add('show');
                resultsDiv.classList.remove('show');
                return;
            }

            if (!currentPattern) {
                errorDiv.textContent = 'Please enter a regex pattern.';
                errorDiv.classList.add('show');
                resultsDiv.classList.remove('show');
                return;
            }

            currentFlags = '';
            if (document.getElementById('flagG').checked) currentFlags += 'g';
            if (document.getElementById('flagI').checked) currentFlags += 'i';
            if (document.getElementById('flagM').checked) currentFlags += 'm';
            if (document.getElementById('flagS').checked) currentFlags += 's';

            let regex;
            try {
                regex = new RegExp(currentPattern, currentFlags);
            } catch (e) {
                errorDiv.textContent = 'Invalid regex pattern: ' + e.message;
                errorDiv.classList.add('show');
                document.getElementById('pattern').classList.add('error');
                resultsDiv.classList.remove('show');
                return;
            }

            document.getElementById('pattern').classList.remove('error');

            matchesData = [];
            let match;

            if (currentFlags.includes('g')) {
                while ((match = regex.exec(testString)) !== null) {
                    matchesData.push({
                        text: match[0],
                        index: match.index,
                        groups: Array.from(match).slice(1),
                        fullMatch: match
                    });

                    if (match[0].length === 0) {
                        regex.lastIndex++;
                    }

                    if (matchesData.length > 1000) {
                        errorDiv.textContent = 'Warning: Only showing first 1000 matches.';
                        errorDiv.classList.add('show');
                        break;
                    }
                }
            } else {
                match = regex.exec(testString);
                if (match) {
                    matchesData.push({
                        text: match[0],
                        index: match.index,
                        groups: Array.from(match).slice(1),
                        fullMatch: match
                    });
                }
            }

            displayResults();
        }

        function displayResults() {
            const resultsDiv = document.getElementById('results');
            const summaryDiv = document.getElementById('matchSummary');

            resultsDiv.classList.add('show');

            const countClass = matchesData.length > 0 ? '' : 'no-matches';
            const flagsText = currentFlags || 'none';

            summaryDiv.innerHTML = `
                <div class="count ${countClass}">Found ${matchesData.length} match${matchesData.length !== 1 ? 'es' : ''}</div>
                <div class="info">Pattern: /${currentPattern}/${flagsText}</div>
            `;

            if (matchesData.length > 0) {
                displayHighlightedView();
                displayListView();
            } else {
                document.getElementById('highlightedView').innerHTML = '<div style="color: #ff8a65;">No matches found.</div>';
                document.getElementById('listView').innerHTML = '<div style="color: #ff8a65;">No matches found.</div>';
            }
        }

        function displayHighlightedView() {
            const highlightedDiv = document.getElementById('highlightedView');
            let result = testString;
            let offset = 0;

            matchesData.forEach((match, index) => {
                const actualIndex = match.index + offset;
                const matchText = match.text;
                const replacement = `<mark>${escapeHtml(matchText)}<span class="match-badge">${index + 1}</span></mark>`;

                result = result.substring(0, actualIndex) + replacement + result.substring(actualIndex + matchText.length);
                offset += replacement.length - matchText.length;
            });

            highlightedDiv.innerHTML = result;
        }

        function displayListView() {
            const listDiv = document.getElementById('listView');
            let html = '';

            matchesData.forEach((match, index) => {
                const position = getMatchPosition(testString, match.index, match.text.length);

                html += `
                    <div class="match-item">
                        <div class="match-item-header">
                            <span class="match-number">Match #${index + 1}</span>
                            <button class="copy-btn" onclick="copyMatch(${index})">Copy</button>
                        </div>
                        <div class="match-text">${escapeHtml(match.text)}</div>
                        <div class="match-position">Line ${position.line}, Characters ${position.start}-${position.end}</div>
                `;

                if (match.groups.length > 0 && match.groups.some(g => g !== undefined)) {
                    html += '<div class="captured-groups"><div class="label">Captured Groups:</div>';
                    match.groups.forEach((group, gIndex) => {
                        if (group !== undefined) {
                            html += `<div class="group-item"><span class="group-label">Group ${gIndex + 1}:</span>${escapeHtml(group)}</div>`;
                        }
                    });
                    html += '</div>';
                }

                html += '</div>';
            });

            listDiv.innerHTML = html;
        }

        function getMatchPosition(text, index, length) {
            const beforeMatch = text.substring(0, index);
            const lines = beforeMatch.split('\n');
            const line = lines.length;
            const start = index - beforeMatch.lastIndexOf('\n');
            const end = start + length - 1;

            return { line, start, end };
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function switchView(view) {
            const highlightedView = document.getElementById('highlightedView');
            const listView = document.getElementById('listView');
            const buttons = document.querySelectorAll('.view-btn');

            buttons.forEach(btn => btn.classList.remove('active'));

            if (view === 'highlighted') {
                highlightedView.style.display = 'block';
                listView.style.display = 'none';
                buttons[0].classList.add('active');
            } else {
                highlightedView.style.display = 'none';
                listView.style.display = 'block';
                buttons[1].classList.add('active');
            }
        }

        function copyMatch(index) {
            const match = matchesData[index];
            navigator.clipboard.writeText(match.text).then(() => {
                const btn = event.target;
                const originalText = btn.textContent;
                btn.textContent = 'Copied!';
                btn.classList.add('copied');

                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.classList.remove('copied');
                }, 2000);
            });
        }

        function exportCSV() {
            if (matchesData.length === 0) return;

            let csv = 'Match #,Text,Line,Start,End,Captured Groups\n';

            matchesData.forEach((match, index) => {
                const position = getMatchPosition(testString, match.index, match.text.length);
                const groups = match.groups.filter(g => g !== undefined).join('; ');
                const text = match.text.replace(/"/g, '""').replace(/\n/g, ' ');

                csv += `${index + 1},"${text}",${position.line},${position.start},${position.end},"${groups}"\n`;
            });

            downloadFile(csv, 'regex-matches.csv', 'text/csv');
        }

        function exportTXT() {
            if (matchesData.length === 0) return;

            let txt = `Regex Pattern: /${currentPattern}/${currentFlags}\n`;
            txt += `Total Matches: ${matchesData.length}\n\n`;

            matchesData.forEach((match, index) => {
                const position = getMatchPosition(testString, match.index, match.text.length);
                txt += `Match #${index + 1} (Line ${position.line}, Chars ${position.start}-${position.end}):\n`;
                txt += match.text + '\n\n';
            });

            downloadFile(txt, 'regex-matches.txt', 'text/plain');
        }

        function downloadFile(content, filename, mimeType) {
            const blob = new Blob([content], { type: mimeType });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function loadSample() {
            const sample = `interface GigabitEthernet0/1
 description Uplink to Core Switch
 ip address 192.168.1.1 255.255.255.0
 mac-address 00:1A:2B:3C:4D:5E
 vlan 100

interface FastEthernet0/2
 description Access Port
 ip address 192.168.2.1 255.255.255.0
 mac-address aa-bb-cc-dd-ee-ff
 vlan 200

Jan 15 14:23:45 router1 %SYS-5-CONFIG_I: Configured from console
Jan 15 14:24:12 switch1 %LINK-3-UPDOWN: Interface GigabitEthernet0/1, changed state to up

Routing Table:
10.0.0.0/8 via 192.168.1.254
172.16.0.0/12 via 192.168.1.254
192.168.0.0/16 is directly connected`;

            document.getElementById('testString').value = sample;
        }
    </script>
</body>
</html>
